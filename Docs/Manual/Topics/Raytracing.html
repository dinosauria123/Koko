<!DOCTYPE html>
<html>
<head>
<meta name="generator" content=
"HTML Tidy for HTML5 for Linux version 5.6.0">
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<style type="text/css">
@import url('https://themes.googleusercontent.com/fonts/css?kit=r3oQQBWBLofdqMg7XagtpryACU-dpWPXZrZUPlWEcIh5KYe-uuCKUYXIDMi_lD047ebMze0MJP7bZu91CQ7uEDTuLqYM6x6ICRZT_kL-IXY');ol.lst-kix_list_1-3{list-style-type:none}ol.lst-kix_list_1-4{list-style-type:none}ol.lst-kix_list_1-5{list-style-type:none}ol.lst-kix_list_1-6{list-style-type:none}ol.lst-kix_list_1-0{list-style-type:none}.lst-kix_list_1-4>li{counter-increment:lst-ctn-kix_list_1-4}ol.lst-kix_list_1-1{list-style-type:none}ol.lst-kix_list_1-2{list-style-type:none}ol.lst-kix_list_1-6.start{counter-reset:lst-ctn-kix_list_1-6 0}.lst-kix_list_1-1>li{counter-increment:lst-ctn-kix_list_1-1}ol.lst-kix_list_1-3.start{counter-reset:lst-ctn-kix_list_1-3 0}ol.lst-kix_list_1-2.start{counter-reset:lst-ctn-kix_list_1-2 0}ol.lst-kix_list_1-8.start{counter-reset:lst-ctn-kix_list_1-8 0}.lst-kix_list_1-0>li:before{content:" "}ol.lst-kix_list_1-5.start{counter-reset:lst-ctn-kix_list_1-5 0}ol.lst-kix_list_1-7{list-style-type:none}.lst-kix_list_1-1>li:before{content:" "}.lst-kix_list_1-2>li:before{content:" "}.lst-kix_list_1-7>li{counter-increment:lst-ctn-kix_list_1-7}ol.lst-kix_list_1-8{list-style-type:none}.lst-kix_list_1-3>li:before{content:" "}.lst-kix_list_1-4>li:before{content:" "}ol.lst-kix_list_1-0.start{counter-reset:lst-ctn-kix_list_1-0 0}.lst-kix_list_1-0>li{counter-increment:lst-ctn-kix_list_1-0}.lst-kix_list_1-6>li{counter-increment:lst-ctn-kix_list_1-6}.lst-kix_list_1-7>li:before{content:" "}.lst-kix_list_1-3>li{counter-increment:lst-ctn-kix_list_1-3}.lst-kix_list_1-5>li:before{content:" "}.lst-kix_list_1-6>li:before{content:" "}ol.lst-kix_list_1-7.start{counter-reset:lst-ctn-kix_list_1-7 0}.lst-kix_list_1-2>li{counter-increment:lst-ctn-kix_list_1-2}.lst-kix_list_1-5>li{counter-increment:lst-ctn-kix_list_1-5}.lst-kix_list_1-8>li{counter-increment:lst-ctn-kix_list_1-8}ol.lst-kix_list_1-4.start{counter-reset:lst-ctn-kix_list_1-4 0}.lst-kix_list_1-8>li:before{content:" "}ol.lst-kix_list_1-1.start{counter-reset:lst-ctn-kix_list_1-1 0}ol{margin:0;padding:0}table td,table th{padding:0}.c49{border-right-style:solid;padding:0pt 5.4pt 0pt 5.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:108pt;border-top-color:#000000;border-bottom-style:solid}.c25{border-right-style:solid;padding:0pt 4pt 0pt 3.6pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:360.8pt;border-top-color:#000000;border-bottom-style:solid}.c31{border-right-style:solid;padding:0pt 5.4pt 0pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:93.6pt;border-top-color:#000000;border-bottom-style:solid}.c55{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:103pt;border-top-color:#000000;border-bottom-style:solid}.c30{border-right-style:solid;padding:0pt 5.4pt 0pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:159.2pt;border-top-color:#000000;border-bottom-style:solid}.c7{border-right-style:solid;padding:0pt 5.4pt 0pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:72pt;border-top-color:#000000;border-bottom-style:solid}.c38{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:101.5pt;border-top-color:#000000;border-bottom-style:solid}.c37{border-right-style:solid;padding:0pt 5.4pt 0pt 5.2pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:257.9pt;border-top-color:#000000;border-bottom-style:solid}.c51{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:103pt;border-top-color:#000000;border-bottom-style:solid}.c33{border-right-style:solid;padding:0pt 4pt 0pt 3.5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:216.8pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:0pt 5.4pt 0pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:90pt;border-top-color:#000000;border-bottom-style:solid}.c32{border-right-style:solid;padding:0pt 5.4pt 0pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:108pt;border-top-color:#000000;border-bottom-style:solid}.c34{border-right-style:solid;padding:0pt 5.4pt 0pt 5.4pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:100.8pt;border-top-color:#000000;border-bottom-style:solid}.c27{border-right-style:solid;padding:0pt 5.4pt 0pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:360.8pt;border-top-color:#000000;border-bottom-style:solid}.c46{border-right-style:solid;padding:0pt 4pt 0pt 3.5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:136.8pt;border-top-color:#000000;border-bottom-style:solid}.c26{border-right-style:solid;padding:0pt 4pt 0pt 3.6pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:108pt;border-top-color:#000000;border-bottom-style:solid}.c44{border-right-style:solid;padding:0pt 5.4pt 0pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:122.4pt;border-top-color:#000000;border-bottom-style:solid}.c16{border-right-style:solid;padding:0pt 5.4pt 0pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:216.8pt;border-top-color:#000000;border-bottom-style:solid}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Palatino";font-style:normal}.c5{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Palatino";font-style:normal}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:justify}.c11{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:center}.c0{margin-left:13.5pt;padding-top:0pt;text-indent:-13.5pt;padding-bottom:0pt;line-height:1.0;text-align:justify}.c12{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c19{vertical-align:sub;font-size:15pt;font-family:"Times New Roman";color:#ff0000;font-weight:700}.c1{font-size:9pt;font-family:"Times New Roman";color:#ff0000;font-weight:700}.c15{font-size:9pt;font-family:"Noto Sans Symbols";color:#ff0000;font-weight:700}.c39{margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto}.c10{font-size:9pt;font-family:"Times New Roman";color:#0000ff;font-weight:700}.c54{margin-left:-11.2pt;border-spacing:0;border-collapse:collapse;margin-right:auto}.c35{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c6{font-size:9pt;font-family:"Times New Roman";color:#000000;font-weight:700}.c14{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c13{vertical-align:sub;font-size:15pt;font-family:"Times New Roman";font-weight:400}.c8{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:justify}.c20{font-size:9pt;color:#ff0000;font-weight:700}.c24{text-decoration:none;vertical-align:baseline;font-style:normal}.c2{font-size:9pt;font-family:"Times New Roman";font-weight:400}.c42{-webkit-text-decoration-skip:none;text-decoration:underline;text-decoration-skip-ink:none}.c36{font-size:9pt;color:#0000ff;font-weight:700}.c21{font-size:9pt;font-family:"Times New Roman";font-weight:700}.c45{font-size:10pt;font-family:"Times New Roman";font-weight:400}.c48{background-color:#ffffff;max-width:504pt;padding:36pt 36pt 53.2pt 72pt}.c53{margin-left:0pt;list-style-position:inside;text-indent:45pt}.c9{font-size:9pt;font-family:"Noto Sans Symbols";font-weight:400}.c41{font-weight:700;font-size:10pt;font-family:"Times New Roman"}.c52{vertical-align:baseline;font-style:italic}.c47{font-weight:400;font-family:"Palatino"}.c56{padding:0;margin:0}.c57{text-decoration:none;font-style:normal}.c50{font-weight:700}.c23{color:#008000}.c40{color:#000000}.c58{color:#ff0000}.c17{height:12pt}.c43{font-size:9pt}.c29{height:0pt}.c22{vertical-align:sub}.c18{vertical-align:super}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Palatino";line-height:1.0;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:12pt;font-family:"Palatino"}p{margin:0;color:#000000;font-size:12pt;font-family:"Palatino"}h1{padding-top:12pt;-webkit-text-decoration-skip:none;color:#000000;font-weight:700;text-decoration:underline;font-size:12pt;padding-bottom:0pt;line-height:1.0;text-decoration-skip-ink:none;font-family:"Helvetica Neue";orphans:2;widows:2;text-align:left}h2{padding-top:6pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:0pt;font-family:"Helvetica Neue";line-height:1.0;orphans:2;widows:2;text-align:left}h3{padding-top:0pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:0pt;font-family:"Times";line-height:1.0;orphans:2;widows:2;text-align:left}h4{padding-top:0pt;-webkit-text-decoration-skip:none;color:#000000;text-decoration:underline;text-decoration-skip-ink:none;font-size:12pt;padding-bottom:0pt;font-family:"Times";line-height:1.0;orphans:2;widows:2;text-align:left}h5{padding-top:0pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:0pt;font-family:"Times";line-height:1.0;orphans:2;widows:2;text-align:left}h6{padding-top:0pt;-webkit-text-decoration-skip:none;color:#000000;text-decoration:underline;text-decoration-skip-ink:none;font-size:10pt;padding-bottom:0pt;font-family:"Times";line-height:1.0;orphans:2;widows:2;text-align:left}
</style>
<title></title>
</head>
<body class="c48">
<p class="c12 c17"></p>
<p class="c3"><span class="c10">RAY TRACE-GENERAL
INFORMATION</span><span class="c2">&nbsp;- All of the commands and
optical system analysis functions described in this section pertain
to the tracing of real, trigonometric rays through the current lens
database. All commands described in this section are issued from
the CMD program level.</span></p>
<p class="c3"><span class="c10">WHEN IS THE TRACE
PERFORMED</span><span class="c2">&nbsp;- Real rays are not
"automatically" traced, as was the case in paraxial ray tracing.
Real rays are traced at the specific request of the designer using
the commands described in this section. These requests may be
explicit or implicit as in the act of ray tracing while performing
optimization or tolerancing.</span></p>
<p class="c12"><span class="c10">SURFACE COATINGS AND RAY
TRACING</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">COATINGS (YES or ON or NO or
OFF)</span><span class="c2">&nbsp; - The "COATINGS" command is used
to tell the program whether or not to calculate ray energy values
based on currently assigned surface coating data and diffraction
grating efficiency, in the case of diffraction gratings. When in
the "OFF" setting, no ray energy calculations are possible. The
default setting is "OFF". If "COATINGS ON" is set, then if there
either bare substrate coatings or multiple layer coatings are
defined on surfaces, polarization values for these surface will be
computed. These polarization values can be explicitly output for
single rays and are used appropriately in spot diagram and complex
aperture function related calculations.</span></p>
<p class="c3"><span class="c10">RAY AIMING</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- In some optical design
and analysis programs, real rays are aimed toward the system
entrance pupil. This entrance pupil is the image of the aperture
stop produced by all optical elements which lie between the object
surface and the aperture stop. Programs which aim rays in this
manner either ignore pupil aberrations or they require auxiliary
ray calculations to account for any pupil aberrations. In this
program, real rays are iteratively aimed at the reference surface.
The reference surface is defined to be that surface at which all
real chief rays have zero height. The reference surface can be
thought of as the real ray equivalent of the aperture stop surface.
For a reference surface with no clear aperture assigned, the chief
ray aiming point is the vertex of this reference surface. This
chief ray aiming point may be shifted from the vertex of the
reference surface to any other point on the reference surface and
angularly re-oriented by assigning a decentered and tilted clear
aperture to the reference surface. All chief rays will then be
aimed so as to pass through the center of the clear aperture on the
reference surface. If there is a non-zero clear aperture tilt
associated with a clear aperture assignment at the reference
surface, the ray aiming orientation will be adjusted so that fans
of rays are parallel to the defining axes of the reference surface
clear aperture rather than parallel to the local coordinate system
at the reference surface. If there is a non-zero reference surface
orientation angle associated with a non-tilted, non-decentered
clear aperture assignment at the reference surface, then the ray
aiming orientation will be rotated through that angle. All
non-chief rays are then aimed to relative coordinate positions in
the reference surface. The reference surface may be assigned to the
same surface as the aperture stop definition, but this is not
required. The choice of aperture stop and reference surface is
completely up to the designer. The designer should always remember,
however, that if the aperture stop and the reference surfaces are
different surfaces and if they are not images on one another, then
strange things may occur during ray aiming and ray aiming
convergence might not occur. The ray aiming discussed above may be
shut off using the "AIMRAY" command discussed later in this
section. When ray aiming is shut off, rays are aimed at the surface
following the object surface. This option should be used carefully.
It is useful in diagnosing difficult to trace systems.</span></p>
<p class="c12"><span class="c10">TRACING A SINGLE RAY</span>
<span class="c2">&nbsp;- In order to trace a single ray and display
the results of the single ray trace, the user does the
following:</span></p>
<p class="c12"><span class="c14 c2">Specify the location in the
object surface from which the ray is traced.</span></p>
<p class="c12"><span class="c14 c2">Specify the location in the
REFERENCE SURFACE through which the ray will be aimed</span></p>
<p class="c12"><span class="c14 c2">Request some display of the
data fror that ray</span></p>
<p class="c12 c17"></p>
<p class="c12"><span class="c10">OBJECT POINT SPECIFICATION (FOB
COMMAND)</span></p>
<p class="c3"><span class="c1">FOB (qualifier word) , Y, X, Z, n,
m</span><span class="c2">&nbsp; - The "FOB" command must be issued
before any ray can be traced. This is true for single rays, fans,
spot diagrams, MTF calculations, etc. This command defines the
object point from which subsequent rays will be traced. It stays in
effect until another "FOB" command is issued or until it is
canceled by some other program option such as "UPDATE LENS". "Y",
"X" AND "Z" are the fractional y, x and z-coordinates of the object
point measured on the current object surface if the reference
object height is set via "SCY" and "SCX" commands. "Y", "X" are the
fractional y and x-object space field angles if the reference
object height is set via "SCY FANG" and "SCX FANG" commands. Z is
represented as a fraction of the current object surface axial
thickness. If "Z" is zero, the object point lies on the object
surface. "Z" is a fractional measure. It represents the fraction of
the thickness assigned to the object surface and is an "off-set".
If "Z" is +1.0, then the object point is a positive z-distance from
the object surface equal to the axial thickness of the current
object surface. If "Z" is -1.0, then the object point is a negative
z-distance from the object surface equal to the axial thickness of
the current object surface. Z is only used when the reference
object height has been set by "SCY" and "SCX" commands. It is
ignored with no warning message, if the reference object height has
been specified using "SCY FANG" and/or "SCX FANG". Issued with the
iterrogator "?", the "FOB" command returns the last "FOB" input
data if a chief ray exists. When an object point is defined, the
program automatically traces a ray from that object point or field
angle to the image plane. This ray passes through the vertex of the
reference surface if the reference surface has no clear aperture
assigned, or through the center of a clear aperture if one has been
assigned. All ray aberrations are calculated with respect to this
chief ray which is also known as the "reference ray".</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c14 c2">Normally, this reference ray is
traced at the control wavelength if "n" is not explicitly input. If
"n" is explicitly input, it can be 1 through 10, the reference ray
is traced at wavelength number "n". The fifth numeric word entry,
"m", is a composite number which defines a temporary reassignment
for the object, reference and image surface numbers. If this entry
is omitted, the object surface is surface 0, the reference surface
is the surface defined as the reference surface in the lens input
mode and the image surface is the last surface.</span></p>
<p class="c3"><span class="c5">Whenever telecentric ray aiming is
in effect, reassignment of the object, reference and image surface
with numeric word #5 of the "FOB" command is not allowed. "m" is a
nine-digit integer of the form "xxxyyyzzz". "xxx" is the new object
surface number, "yyy" is the new reference surface number and "zzz"
is the new image surface number. If "m" is explicitly input, all
nine digits must be input, even if not all three surfaces are to be
reassigned from their original values. The choice of "qualifier
word" selects the specific additional output to be displayed as
shown in the following table:</span></p>
<a id="t.ac5c119f6a065ece23d874c5004cf733743ecdda"></a><a id=
"t.0"></a>
<table class="c39">
<tbody>
<tr class="c29">
<td class="c32" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">Qualifier Word</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">OUTPUT</span></p>
</td>
</tr>
<tr class="c29">
<td class="c32" colspan="1" rowspan="1">
<p class="c11"><span class="c1 c24">(none)</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(none)</span></p>
</td>
</tr>
<tr class="c29">
<td class="c32" colspan="1" rowspan="1">
<p class="c11"><span class="c1 c24">NULL</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(none)</span></p>
</td>
</tr>
<tr class="c29">
<td class="c32" colspan="1" rowspan="1">
<p class="c11"><span class="c1 c24">"P"</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">Yo, Xo, Zo</span></p>
</td>
</tr>
<tr class="c29">
<td class="c32" colspan="1" rowspan="1">
<p class="c11"><span class="c1 c24">"PIC" or "PICNH"</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c11"><span class="c2">Yo, Xo, Zo</span><span class=
"c13">,</span> <span class="c2">Yi, X</span><span class=
"c13">i</span></p>
</td>
</tr>
<tr class="c29">
<td class="c32" colspan="1" rowspan="1">
<p class="c11"><span class="c1 c24">"PFS" or "PFSNH"</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">Yo, Xo, Zo, Fy, Fx</span></p>
</td>
</tr>
</tbody>
</table>
<p class="c12 c17"></p>
<p class="c3"><span class="c2">The qualifier word "P" causes the
reference ray coordinates at the object surface to be displayed.
The qualifier words "PIC" and "PICNH" display the reference ray
coordinates at the object surface, Yo, X0, Zo</span><span class=
"c13">,</span><span class="c2">&nbsp;and the Y and X-coordinates of
the reference ray at the image surface, Yi, Xi. "PIC" produces
header information; "PICNH" produces no header information. The
qualifier words "PFS" and "PFSNH" display the reference ray
coordinates at the object surface, Yo, Xo, Zo</span><span class=
"c13">,</span><span class="c2">&nbsp;and the YZ-plane and XZ-plane
field sags at the image surface, Fy, Fx. "PFS" produces header
information; "PFSNH" produces no header information. Calculation of
Fy and Fx is performed by tracing differential rays about the
reference ray corresponding to differential displacements in Y and
X on the reference surface. Fy locates the intersection of the
Y-differential ray with the reference ray. Fx locates the
intersection of the X-differential ray with the reference ray. Fy
and Fx are distances, measured in the Z direction, from the image
surface to each focus. The options "P", "PIC" and "PFS" display
information indicating the wavelength and the field angle. The
field angle is defined to be the angle between the Z-axis and the
reference ray in the object space. "PICNH" and "PFSNH" suppress
these headings. The "FOB NULL" is used when it is necessary to
trace rays in a situation in which the reference ray fails. In such
a case, a non-chief ray may still pass through the lens system. Of
course, since there will be no reference ray data, aberrations
based upon reference ray calculations will not be possible. The
"FOB NULL" command is identical to the usual "FOB" command, except
that the tracing of the reference ray is suppressed. This allows a
limited subset of ray tracing commands to be performed on
"pathological" systems in which the reference ray at some object
position cannot be traced. Diffraction analysis commands invoked in
this mode use (x,y,z) = (o,o,o) as the center of the reference
sphere. The validity of results obtained in this mode depend on the
optical system, and no general rules can be given.</span>
<span class="c21">IT IS THE RESPONSIBILITY OF THE USER TO VERIFY
THE VALIDITY OF RESULTS OBTAINED IN THIS WAY!</span></p>
<p class="c3"><span class="c1">FOBH (qualifier word) , YH, XH, ZH,
n</span><span class="c2">&nbsp; - The "FOBH" command is similar to
the "FOB" command except that the "YH", "XH" and "ZH" input values
are the Y, X and Z-positions of the current object point relative
to the origin of the current object surface. They are always
represented in current lens units. "n" is the wavelength number.
"FOBH" does not take the fifth numeric word of the "FOB" command.
All valid "FOB" qualifier words may be used with "FOBH".</span></p>
<p class="c3"><span class="c1">FOBA (qualifier word) , Yang , Xang
, n</span><span class="c2">&nbsp;- The "FOBA" command is an
alternate form of the "FOB" command. If has less power than "FOB"
but allows the user to input field of view angles directly in
degrees. The user may specify the "Yang", the "Xang" and the
wavelength number "n". The defaults are 0.0, 0.0 and "cw", the
control wavelength. The command will work whether the reference
object height was specified using "SCX" and "SCY" or "SCX FANG" and
"SCY FANG". For near objects and systems with internal
stops/reference surfaces, the resultant field angles may not be
exactly the angles requested due to the non-zero chief ray height
on surface (newobj+1) and the less than large object distance. For
object distances greater than 1.0x10</span><span class=
"c2 c18">10</span><span class="c2">&nbsp;lens units, the "FOBA"
command should yield exact chief ray angles. All valid "FOB"
qualifier words may be used with "FOBH".</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">THE SINGLE RAY
TRACE</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
Single rays may be traced in an arbitrary order following an "FOB"
command. Single ray trace commands generate no display except for
the "RAY CAOB" command. Results of these ray traces are displayed
using the ray data display commands which are described later in
this section.</span></p>
<p class="c3"><span class="c1">RAY , Y, X, n , I</span><span class=
"c2">&nbsp; - "Y" and "X" are the fractional reference surface
coordinates and "n" is the wavelength number. If no entry is made
for "n", the ray is traced at the control wavelength number. "I" is
the starting ray intensity which may be set to any non-zero value
less than or equal to 1.0. The default value for "I" is 1.0. If the
reference surface has no clear aperture assigned, the actual
reference ray coordinates will be calculated based upon the
reference aperture height set by the paraxial ray trace. If a clear
aperture has been assigned to the reference surface, the actual
reference ray coordinates will be calculated based upon the
fractional reference aperture height relative to the center of the
clear aperture. Whenever an "FOB" command is issued, an automatic
"RAY , 0 0" command is also issued. This avoids the neccessity of
issuing a "RAY" command in order to trace and display regular ray
data for the chief ray.</span></p>
<p class="c3"><span class="c1">RAY CAOB , Y , X , n , I ,
silent</span><span class="c2">&nbsp; - The "RAY CAOB" command works
just like the standard "RAY" command, except that it causes
checking for ray blockages due to clear apertures, obstructions and
erases. If a ray falls outside a clear aperture or within an
obscuration, a ray failure message will be generated, saved
internally and displayed. In order for this message to be
displayed, plotting MUST be turned "OFF". This is done by issuing a
"PLOT END" message after plotting is completed. Clear aperture ray
blocking is not checked on the current object surface or the
current image surface by "RAY CAOB". If "silent" is nonzero, no ray
failure message is displayed</span></p>
<p class="c3"><span class="c6">Example:</span><span class=
"c2">&nbsp;To trace a marginal ray from the maximul +Y field of
view position, the commands would be:</span></p>
<p class="c3"><span class="c24 c21 c23">FOB 1</span></p>
<p class="c3"><span class="c24 c21 c23">RAY 1</span></p>
<p class="c12"><span class="c10">SINGLE RAY DATA
DISPLAY</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The following four commands allow the user to change
the ray angle output mode for real rays to "degrees", "radians" or
"tangents". Paraxial output angles are always expressed as
tangents. These commands do not change any input units. The
"ANGMODE" command displays the current angular mode. The default
angular mode when the program starts is "degrees":</span></p>
<p class="c3"><span class="c1">DEG</span></p>
<p class="c3"><span class="c14 c2">or</span></p>
<p class="c3"><span class="c1">RAD</span></p>
<p class="c3"><span class="c14 c2">or</span></p>
<p class="c3"><span class="c1">TANGENT</span></p>
<p class="c3"><span class="c14 c2">or</span></p>
<p class="c3"><span class="c1">ANGMODE</span><span class=
"c2">&nbsp;</span></p>
<p class="c8"><span class="c1">HEADINGS ON</span><span class=
"c2">&nbsp;or &nbsp;</span><span class="c1">HEADINGS
OFF</span><span class="c2">&nbsp;- Headings are always displayed
when tabular output is requested via the qualifier "ALL". The
"HEADINGS" command with the qualifier words "ON" and "OFF" controls
whether or not headings will be displayed for single lines of
displayed data. The default setting for "HEADINGS" is "OFF" when
the program begins. New users may be more comfortable seeing
headings for all data displays. Headings can be set to "ON" after
program startup or the line "HEADINGS ON" can be added to the
"DEFAULTS.DAT" file before starting the program. If requested
program data does not exist, a message to that effect is
displayed.</span></p>
<p class="c8"><span class="c10">SURFACE DEPENDENT
DATA</span><span class="c2">&nbsp;- Many of the following commands
generate the display of data which is dependent upon a lens
database surface number. This may be entered as a qualifier word or
as numeric word #1. The qualifier words "OB" or "OBJ" will cause
data to be displayed for the object surface only. The qualifier
word "ALL" will generate data for all surfaces and some system
totals. If no qualifier word is entered but explicit, non-negative
numeric word #1 entry is made, a line of data is produced for the
surface whose number "i" is specified by numeric word #1. If no
qualifier or numeric entry is made, either final surface data or
system total data is displayed depending upon the specific command
entered. If a negative value is entered for the surface number, the
program increases the entered value by adding the number of the
image surface. Thus, an entry of -1 may be used to denote the
surface immediately preceding the image surface.</span></p>
<p class="c12"><span class="c10">THE ALL COMMAND</span><span class=
"c21">&nbsp;</span></p>
<p class="c3"><span class="c1">ALL (ON</span> <span class=
"c6">or</span><span class="c1">&nbsp;YES</span> <span class=
"c6">or</span> <span class="c1">OFF</span> <span class=
"c6">or</span><span class="c1">&nbsp;NO)</span><span class=
"c2">&nbsp; Any program command which can take surface number input
or the qualifier word input "ALL" and has the characteristic
behavior that when that command is entered with no input, data for
the final lens surface is printed can be impacted by the "ALL"
command. If "ALL" is set to "ON", the default behavior of that
command will be to assume that the "ALL" qualifier word had been
issued with that command. The default setting for "ALL" will be
"OFF". If it is desired to have "ALL" always set to "ON", place the
"ALL ON" command in the DEFAULTS.DAT file in the main program
directory. It will be executed whenever the program is
run.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">SINGLE RAY DATA
DISPLAY</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The following commands all refer to data related to
the last single ray traced:</span></p>
<p class="c12"><span class="c1">PRX (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRX P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRX , i</span><span class=
"c2">&nbsp; - The "PRX" command displays the X-coordinate of the
ray at a surface and the ray angle to the Z-axis made by the
projection of the ray on the XZ-plane in the space following the
surface. For the image surface, angles are with respect to the
previous surface. The qualifier "ALL" causes a table of data for
all surfaces to be displayed. If no qualifier is entered, single
surface data is displayed. If no qualifier or numeric surface
number "i" input is entered, &nbsp;the current image surface is
assumed. The qualifier "P" causes the wavelength number and
relative aperture coordinates in the reference surface to be
displayed.</span></p>
<p class="c12"><span class="c1">PRY (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRY P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRY , i</span><span class=
"c2">&nbsp; - "PRY" acts just like "PRX" but displays Y-coordinate
and YZ-plane angle projections.</span></p>
<p class="c12"><span class="c1">PRXYZ (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRXYZ P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRXYZ , i</span><span class=
"c2">&nbsp; - "PRXYZ" acts just like "PRX" but displays X, Y and
Z-ray coordinates and XZ and YZ-plane angle projections.</span></p>
<p class="c12"><span class="c1">PRXYI (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRXYI P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRXYI , i</span><span class=
"c2">&nbsp; - "PRXYI" acts just like "PRXYZ" with Z replaced by the
angle of incidence at the surface.</span></p>
<p class="c12"><span class="c1">PRXYIP (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span> <span class="c1">OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRXYIP P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRXYIP , i</span><span class=
"c2">&nbsp; - "PRXYIP" acts just like "PRXYZ" with Z replaced by
the angle of exitance at the surface.</span></p>
<p class="c12"><span class="c1">PRXYD (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span> <span class="c1">OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRXYD P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRXYD , i</span><span class=
"c2">&nbsp; - "PRXYD" acts just like "PRXYZ" with Z replaced by the
optical path length along the ray in the space preceding the
surface.</span></p>
<p class="c12"><span class="c1">PRZ (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRZ P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRZ , i</span><span class=
"c2">&nbsp; - "PRZ" acts like "PRX" but displays the Z-ray
coordinate and the optical path length along the ray in the space
preceding the surface.</span></p>
<p class="c12"><span class="c1">PRR (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRR P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRR , i</span><span class=
"c2">&nbsp; - "PRR" acts like "PRX" but displays the radial ray
coordinate R and the angle from the ray to the Z-axis.</span></p>
<p class="c3"><span class="c14 c2">R is defined in the following
equation:</span></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 108.00px; height: 34.67px;">
<img alt="" src="rt_images/image14.png" style=
"width: 107.99px; height: 34.66px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c12"><span class="c1">PRREF (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRREF P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRREF , i</span><span class=
"c2">&nbsp; - "PRREF" acts like "PRXYZ" but displays the X, Y and
Z-coordinates or the current reference ray and the tangents of the
X and Y-angles which that ray makes with the Z-axis.</span></p>
<p class="c12"><span class="c1">PRLMN (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRLMN P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRLMN , i</span><span class=
"c2">&nbsp; - "PRLMN" acts like "PRXYZ" but displays the current
ray X, Y and Z-coordinates and the L, M and N direction
cosines.</span></p>
<p class="c12"><span class="c1">OPD</span><span class="c2">&nbsp; -
The "OPD" command calculates and displays the optical path
difference for the last ray traced both in lens units and in waves
(at the wavelength at which the reference ray was
traced).</span></p>
<p class="c12"><span class="c1">PRFLUX (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRFLUX P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRFLUX , i</span><span class=
"c2">&nbsp; - "PRFLUX" acts like "PRX" but displays the current
relative ray energy or flux. If coatings are assigned to surfaces
and if "COATINGS" are set to "ON", the surface coatings will be
used to compute ray trasmission or reflection factors which will be
used in the relative ray energy calculation.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c1">PRPOL (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span><span class=
"c2">&nbsp;or</span></p>
<p class="c12"><span class="c1">PRPOL P , i</span><span class=
"c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">PRPOL , i</span><span class=
"c2">&nbsp; - "PRPOL" acts like "PRX" but displays the current ray
polarization data. Data includes the parallel and perpendicular
reduction factors, phases and the angle between the plane of
incidence and the y-vector dirrection of the current chief
ray.</span></p>
<p class="c3"><span class="c10">PLOTTING SINGLE
RAYS</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
The plotting of single rays as part of an optical system layout is
covered in the GRAPHICS section of this manual.</span></p>
<p class="c3"><span class="c10">DIFFERENTIAL
RAYS</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
Whenever a single ray is traced while "DIFRAY" and "DIFFOB" are set
to "(ON or YES)", close differential rays will be traced along side
and near the chief ray traced with the last "FOB" command and along
side and near the regular ray traced with the last "RAY" command.
If differential ray failures occur, adjust the DIFTOL value up or
down until they no longer occur. See the DIFTOL value description
in this section under the "PM" command. Differential chief rays are
traced from the current object position plus small X and Y-shifts
in object position. These rays are traced to the standard aim point
in the reference surface unless the "TEL" is set to "ON". If "TEL"
is set to "ON", meaning telecentric rays, the chief differential
rays are traced parallel to the regular chief ray. Non-chief
differential rays are traced from the current object position.
These rays are traced to the standard aim point in the reference
surface shifted by small X and Y-values. In telecentric systems,
the X and Y-shifts are applied at the NEWOBJ+1 surface rather than
at the reference surface. All shifts are based upon current
reference aperture data and object heights scaled by the current
value of DIFTOL. The following commands provide a way of displaying
the most recent differential ray data:</span></p>
<p class="c3"><span class="c1">PRDIFFXR (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRDIFFXR P, i</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRDIFFXR , i</span><span class=
"c2">&nbsp; - "PRDIFFXR" acts like "PRX" but displays the X, Y and
Z-coordinates and the L, M and N direction cosines of the current
differential ray with respect to a differential shift in the
starting ray X-coordinate at the object surface.</span></p>
<p class="c3"><span class="c1">PRDIFFYR (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRDIFFYR P, i</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRDIFFYR , i</span><span class=
"c2">&nbsp; - "PRDIFFYR" acts like "PRX" but displays the X, Y and
Z-coordinates and the L, M and N direction cosines of the current
differential ray with respect to a differential shift in the
starting ray Y-coordinate at the object surface.</span></p>
<p class="c3"><span class="c1">PRDIFFXM (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRDIFFXM P, i</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRDIFFXM , i</span><span class=
"c2">&nbsp; - "PRDIFFXM" acts like "PRX" but displays the X, Y and
Z-coordinates and the L, M and N direction cosines of the current
differential ray with respect to a differential shift in the
reference ray X-coordinate at the reference surface.</span></p>
<p class="c3"><span class="c1">PRDIFFYM (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRDIFFYM P, i</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRDIFFYM , i</span><span class=
"c2">&nbsp; - "PRDIFFYM" acts like "PRX" but displays the X, Y and
Z-coordinates and the L, M and N direction cosines of the current
differential ray with respect to a differential shift in the
reference ray Y-coordinate at the reference surface. Whenever an
"FOB" command is issued, a "RAY , 0 , 0 , (wavelength number equal
to that used in the "FOB" command)" command is automatically
issued. As long as these two rays can be traced through the optical
system and as long as "DIFFOB" and "DIFRAY" are set to "(ON or
YES)", differential rays will be traced. This program behavior is
used to generate a set of extremely useful data which we will call
"GENERALIZED PARAXIAL RAY TRACE" data. This ray trace, unlike the
true paraxial ray trace, takes into account surface tilts,
decentrations and aspheric and other surface
deformations.</span></p>
<p class="c3"><span class="c2">Whenever this generalized paraxial
data is requested, appropriate rays will be traced automatically.
For this trace, "DIFFOB" and "DIFRAY" will be temporarily turned
"(ON or YES)" if they were "(OFF or NO)" and the associated
differential ray trace will be used to generate the generalized
paraxial ray data. The generalized paraxial ray trace data is
generated and displayed using the following two
commands:</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c10">GENERALIZED PARAXIAL RAY
TRACE</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;</span></p>
<p class="c3"><span class="c1 c24">GPXTY (ALL or OB or OBJ)
or</span></p>
<p class="c3"><span class="c1">GPXTY , i &nbsp;, y-fob , x-fob ,
z-obj. shift , wavelength #</span><span class=
"c2">&nbsp;</span></p>
<p class="c3"><span class="c14 c2">and</span></p>
<p class="c3"><span class="c1">GPXTX (ALL or OB or
OBJ)</span><span class="c2">&nbsp;or</span></p>
<p class="c3"><span class="c1">GPXTX , i &nbsp;, y-fob , x-fob ,
z-obj. shift , wavelength #</span><span class="c2">&nbsp; - The
"GPXTY" and "GPXTX" commands generate and output the YZ or
XZ-plane, generalized paraxial marginal ray heights, generalized
paraxial marginal ray slopes, generalized paraxial chief ray
heights and generalized paraxial chief ray slopes. This data may be
output for "ALL" surfaces, for the object surface ("OB" or "OBJ")
or for surface "i". Output is performed for the current control
wavelength. Generalized paraxial ray data is always generated for
the current configuration. Generalized paraxial ray data is never
used in solves or for 3rd, 5th and 7th order aberration
calculations. Generalized paraxial datum items may be moved to the
"X" register using the "GET" command described in the CMD section.
All the "GPXTX" and "GPXTY" commands may also take numeric words
#2, #3, #4 and #5 input. Numeric words #2 and #3 are Y and X-FOB
values which will override the default 0.0, 0.0. When explicit Y
and X-FOB values are input, the output generated should no longer
be considered a true "generalized paraxial ray trace" which can be
compared to the regular paraxial ray trace. Numeric word #4 is used
to specify a Z-obj. shift as is used in the "FOB" command. Numeric
word #5 is used to specify a wavelength number other than the
control wavelength number. Valid entries are 1 to 10. Generalized
paraxial data is generated by tracing real chief and marginal rays
close to a chief ray and then scaling the resultant data up by the
appropriate and current "SCX", "SCY", "SAX" and "SAY" values. For a
centered systems with the reference surface assigned to the same
surface as the aperture stop, a generalized paraxial ray trace
along the optical &nbsp;axis will yield results identical to an
ordinary first order paraxial ray trace.</span></p>
<p class="c12"><span class="c10">LOCAL COORDINATE
INFORMATION</span><span class="c2">&nbsp;- It is extremely
important to remember the following general information concerning
the nature of non-global coordinate, trigonometric ray tracing as
it is implemented here:</span></p>
<p class="c3"><span class="c14 c2">Object Surface ray coordinates
are represented in the local coordinate system of the Object
Surface.</span></p>
<p class="c3"><span class="c14 c2">Reference Surface ray
coordinates are represented in the local coordinate system of the
Reference Surface.</span></p>
<p class="c3"><span class="c14 c2">Image Surface ray coordinates
are represented in the local coordinate system of the Image
Surface.</span></p>
<p class="c3"><span class="c14 c2">Ray coordinates at any surface
are represented in the local coordinate system of that
surface.</span></p>
<p class="c3"><span class="c14 c2">Spot diagram, geometrical energy
distributions and geometrical MTF calculations are evaluated in the
coordinate system of the image surface but the grid of rays is
aimed at reference surface coordinates.</span></p>
<p class="c3"><span class="c14 c2">If there are rotations which
alter the relative orientations of the Object Surface, Reference
Surface and Image Surface X and Y-axes, then lines or grids of rays
traced so as to line up with local coordinate axes at one surface
may not line up with the local coordinate axes at another surface.
This fact must be remembered when interpreting ray fans, spot
diagrams, energy distibutions and MTF calculations. The user may
always use GAMMA rotations on dummy surfaces to insure that
vertical and horizontal axes relationships represent the real
physical system being designed or modeled. Tilts or decentrations
assigned to the object surface are always ignored during real ray
tracing.</span></p>
<p class="c3"><span class="c10">GLOBAL COORDINATE RAY
TRACING</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- Normally, when a single ray is traced, ray data is
generated for the ray with respect to the local coordinate system
at each surface. Ray data may also be generated with respect to a
"global" coordinate system. If "global" ray trace data is
generated, it is generated in addition to the normally produced
"local" ray trace data. The same object point definition and ray
definition commands "FOB" and "RAY" are used to trace rays for
which this "global" ray trace data is to be generated.</span></p>
<p class="c3"><span class="c1">GLOBAL , i</span><span class=
"c2">&nbsp; - The "GLOBAL" command, when issued with integer
numeric input, is used to define the surface number whose "local"
coordinate system is to be used as the "global" coordinate system
for all subsequent "global" ray trace data.</span></p>
<p class="c3"><span class="c1">GLOBAL OFF</span><span class=
"c2">&nbsp; - The "GLOBAL OFF" command shuts off global coordinate
ray tracing.</span></p>
<p class="c3"><span class="c1">OFFSET DEC , X , Y ,
Z</span><span class="c2">&nbsp; - The "OFFSET DEC" command is used
to define an offset from the vertex of the "global" surface vertex.
This new "offset" location will be the origin for all "global" ray
trace data. "X", "Y" and "Z" are the X, Y and Z-offsets measured in
the local coordinate system of the "global" surface.</span></p>
<p class="c3"><span class="c1">OFFSET TILT , ALPHA , BETA ,
GAMMA</span><span class="c2">&nbsp; - The "OFFSET TILT" command is
used to define an angular offset from the orientation of the
"global" surface vertex coordinate system. This new "angular
offset" will define the "global" coordinate system orientation for
all "global" ray trace data. "ALPHA", "BETA" and "GAMMA" are
defined in the local coordinate system of the "global" surface.
They are input in degrees and are defined in the same sense as the
"ALPHA", "BETA" and "GAMMA" tilts in the LENS section. The angular
offsets in the "OFFSET TILT" command are considered to be either in
the MIXED or in the RIGHT-HANDED directional sense depending upon
the current angular setting in the current lens. See the LENS
section for more details. If offset tilts and decentrations are
entered, the offsets are applied before the tilts in the
determination of the location and orientation of the "offset"
"global" coordinate system.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">GLOBAL</span><span class="c2">&nbsp;
- The "GLOBAL" command, when issued with no additional input, is
used to display the current status of "global" ray tracing. If
"global" ray tracing has been previously set to "on", then the
surface number of the surface whose coordinate system is used as
the origin for "global" data, as well as any defined "offsets",
will be displayed.</span></p>
<p class="c3"><span class="c1">VERTEX (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">VERTEX , i</span><span class=
"c2">&nbsp; - The "VERTEX" command displays "global" surface vertex
coordinates X, Y and Z. It also displays "global" surface
coordinate system L, M and N direction cosines for each local
surface coordinate axis. If the qualifier "ALL" is used, a header
is included which is similar to the display produced by the
"GLOBAL" command.</span></p>
<p class="c3"><span class="c1">PRGLOBAL (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span> <span class=
"c2 c40">or</span></p>
<p class="c3"><span class="c1">PRGLOBAL , i</span><span class=
"c2">&nbsp; - The "PRGLOBAL" command displays "global" ray trace
data. The "global" X, Y and Z ray coordinates and the "global" L, M
and N ray direction cosines before (LOLD, MOLD and NOLD) and after
(L, M and N) surface interaction (reflection, refraction or
diffraction) are displayed. If the qualifier "ALL" is used, a
header is included which is similar to the display produced by the
"GLOBAL" command.</span></p>
<p class="c12"><span class="c10">ADDITIONAL RAY
COMMANDS</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">FOBDUMP</span><span class="c2">The
"FOBDUMP" command displays all internal program reference ray data
for all surfaces for the last single ray traced. It is intended as
a debugging tool when attempting to trace a difficult or poorly
understood case of ray trace failure.</span></p>
<p class="c3"><span class="c1">RAYDUMP</span><span class="c2">The
"RAYDUMP" command displays all internal program ray data for all
surfaces for the last single ray traced. It is intended as a
debugging tool when attempting to trace a difficult or poorly
understood case of ray trace failure.</span></p>
<p class="c3"><span class="c1">DIFFOB (ON</span><span class=
"c2">&nbsp;or</span> <span class="c1">YES</span><span class=
"c2">&nbsp;or</span> <span class="c1">OFF</span><span class=
"c2">&nbsp;or</span> <span class="c1">NO)</span><span class=
"c2">&nbsp; - The "DIFFOB (ON or YES)" and "DIFFOB (OFF or NO)"
commands either activate or deactivate differential reference ray
tracing in cases where differential reference ray tracing would
normally apply such as in the single ray trace. It should only be
used for diagnosing ray tracing problems. Issued with a "?", the
"DIFFOB" command returns a message as to its current setting. It
only applies to the action taken after a "FOB" command is issued.
This command is "sticky" and remains as set until changed by the
user or until the program ends.</span></p>
<p class="c3"><span class="c1">DIFRAY (ON</span><span class=
"c2">&nbsp;or</span> <span class="c1">YES</span><span class=
"c2">&nbsp;or</span> <span class="c1">OFF</span><span class=
"c2">&nbsp;or</span> <span class="c1">NO)</span><span class=
"c2">&nbsp; - The "DIFRAY (ON or YES)" and "DIFRAY (OFF or NO)"
commands either activate or deactivate differential ray tracing in
cases where differential ray tracing would normally apply such as
in the single ray trace. It should only be used for diagnosing ray
tracing problems. Issued with a "?", the "DIFRAY" command returns a
message as to its current setting. This command is "sticky" and
remains as set until changed by the user or until the program
ends.</span></p>
<p class="c3"><span class="c1">AIMRAY (ON</span><span class=
"c2">&nbsp;or</span> <span class="c1">YES</span><span class=
"c2">&nbsp;or</span> <span class="c1">OFF</span><span class=
"c2">&nbsp;or</span> <span class="c1">NO)</span><span class=
"c2">&nbsp; - The "AIMRAY (ON or YES)" and "AIMRAY (OFF or NO)"
commands either activate or deactivate real ray, ray aiming to a
specific relative coordinate in the reference surface. When ray
aiming is "(OFF or NO)", rays are aimed at next surface after the
object surface based only upon the existing paraxial ray trace. It
should only be used for diagnosing ray tracing problems. Issued
with a "?", the "AIMRAY" command returns a message as to the
current setting. This command is "sticky" and remains as set for
the current lens until changed by the user. The setting is
remembered in the current lens database. This command is also
described in the LENS section</span></p>
<p class="c3"><span class="c1">AIMRAY OFFSET , x-offset , y-offset
, z-offset</span><span class="c2">&nbsp; - The "AIMRAY OFFSET"
command is provided in order give the user maximum control over
program ray tracing. It will rarely, if ever, be needed. When the
program begins aiming a chief ray toward the center of the current
reference surface, it uses, as its first guess, paraxial ray trace
data at surface NEWOBJ+1, decentrations assigned to the surface
NEWOBJ+1 and the numeric input issued with the "FOB" command.
&nbsp;In all cases tested, either this "first guess" or the
automatic search engine built into the program has been found to be
good enough to allow chief ray aiming to proceed successfully. In
the unlikely event that the first guess ray coordinate at surface
NEWOBJ+1 is not good enough to allow the chief ray to be traced,
the "AIMRAY OFFSET" command may be used to introduce a permanent
"x-offset", "y-offset" and "z-offset" to the initial surface
NEWOBJ+1 ray coordinate. The default "x-offset", "y-offset" and
"z-offset" are always zero. The "x-offset", "y-offset" and
"z-offset" will be stored with the lens database. These offsets are
only used to give the program a different initial starting point
when aiming the chief ray. They do not change the chief ray aim
point at the reference surface. The command "AIMRAY", when issued
with the special interrogator "?", will display the current status
of ray aiming as well as the current "x-offset", "x-offset" and
"z-offset" values.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">GAUSSIAN BEAM
PROPAGATION</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- In this program, gaussian beam propagation is
performed in the following way:</span></p>
<p class="c3"><span class="c21">First</span><span class="c2">; The
user specifies the XZ and YZ-plane gaussian beam
1/e</span><span class="c2 c18">2</span><span class=
"c2">&nbsp;semi-diameters and gaussian beam divergence half-angles
using the "WRX", "WRY", BDX" and "BDY" described in the LENS
section of this manual. The user has full control of the
1/e</span><span class="c2 c18">2</span><span class=
"c2">&nbsp;semi-diameters and divergence half-angles and is
responsible for the realism of these starting values. All four
values should be explicitly set !</span></p>
<p class="c3"><span class="c21">Second</span><span class="c2">; The
starting wavefront radius of curvature will be the distance between
the wavefront origin position on surface 0 and the center of
surface 1 ( or the center of the clear aperture assigned to surface
1). The wavefront always originates on surface 0. Specification of
a field-of-view position in some of the gaussian beam propagation
commands specifies the point on the object that is to be the origin
of the wavefront. If the distance from surface 0 to surface 1 is
positive, the wavefront will be a diverging wavefront and it will
have a negative radius of curvature associated with it. If the user
wishes to specify that surface 1 is a true "beam waist", then the
distance from the wavefront origin on surface 0 to center of
surface 1 ( or the center of the clear aperture assigned to surface
1) &nbsp;should be set to a large and nearly infinite value
(1.0D+20 is a good choice). This can be done by giving surface 0 a
very large axial thickness. This will cause the wavefront to be
effectively flat.</span></p>
<p class="c3"><span class="c21">Third</span><span class="c2">; The
appropriate gaussian beam analysis command is issued or the
appropriate value is retrieved using the "GET" command or the
appropriate operand is used in optimization or
tolerancing.</span></p>
<p class="c12"><span class="c6 c24">How the calculation are
performed</span></p>
<p class="c3"><span class="c14 c2">In many optical design and
analysis programs, gaussian beam propagation is based upon a
paraxial ray trace. This method is fast and simple but leaves much
to be desired. The "paraxial" method can't be used in "decentered"
optical system or in systems which contain diffractive optical
elements. This program does not use this simplistic "paraxial"
method but instead uses the "generalized paraxial ray trace"
described earlier in this manual section. In the form of the
"generalized paraxial ray trace" used for gaussian beam
propagation, the gaussian beam divergence half-angle plays the role
of a field angle to define the "generalized paraxial chief rays"
&nbsp;and the gaussian beam semi-diameter on surface 1 plays the
role of reference aperture height to define "generalized paraxial
marginal rays". If surface 1 is not the system "reference surface"
then it is temporarily redefined to be the system "reference
surface" &nbsp;for all gaussian beam calculations. A field-of-view
specification in the gaussian beam analysis commands acts to
re-define the reference optical axis of the system for that
particular ray trace by defining a new wavefront origin location on
surface 0. The ray tracing performed is always exact, real,
trigonometric ray tracing. The "generalized paraxial ray trace" is
simulated by tracing real rays close to the central reference axis
ray. The central reference axis ray is the ray that starts at the
specified wavefront origin position on surface 0 and passes through
the center of surface 1 (or the center of the clear aperture
assigned to surface 1).</span></p>
<p class="c12"><span class="c1">BEAM (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span> <span class=
"c6">or</span><span class="c1">&nbsp;BEAM , i &nbsp;, y-fob , x-fob
, z-obj. shift , wavelength #</span><span class="c2">&nbsp; - The
"BEAM" command generates and outputs the YZ or XZ-plane gaussian
beam propagation data. This data consists of:</span></p>
<p class="c3"><span class="c2">The gaussian beam
1/e</span><span class="c2 c18">2</span><span class=
"c2">&nbsp;semi-diameter at each &nbsp;specified
surface.</span></p>
<p class="c3"><span class="c14 c2">The wavefront radius of
curvature after interaction with each specified surface at that
surface.</span></p>
<p class="c3"><span class="c14 c2">The distance to the next beam
waist after interaction with each specified surface.</span></p>
<p class="c3"><span class="c2">The gaussian beam
1/e</span><span class="c2 c18">2</span><span class=
"c2">&nbsp;semi-diameter at the next waist after interaction with
each specified surface.</span></p>
<p class="c3"><span class="c14 c2">This data may be output for
"ALL" surfaces, for the object surface ("OB" or "OBJ") or for
surface "i". Output is performed for the current control
wavelength. The "BEAM" command may take optional numeric words #2,
#3, #4 and #5 input. Numeric words #2 and #3 are Y and X-FOB values
which will override the default 0.0, 0.0 values. Y and X-FOB input
is used to specify wavefront origin points other than at the center
of the object surface. Numeric word #4 is used to specify a Z-obj.
shift as is used in the "FOB" command. Numeric word #5 is used to
specify a wavelength number other than the control wavelength
number. Valid entries are 1 to 10. There are also "GET" options
used for retrieving individual gaussian beam properties. These are
listed later in this section. There are also predefined gaussian
beam operands described in the "OPTIMIZATION" and "TOLERANCING"
sections of this manual.</span></p>
<p class="c12"><span class="c10">ABERRATION RAY
FANS</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
Ray fans are tabulations of ray aberration versus relative
fractional ray position in the reference surface. Each of the
following "ray fan" commands must be preceded by an "FOB"
command.</span></p>
<p class="c3"><span class="c1">XFAN (qualifier word) , Xmin , Xmax
, n , m ,</span> <span class="c15"></span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">YFAN (qualifier word) , Ymin , Ymax
, n , m ,</span> <span class="c15"></span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">PFAN (qualifier word) ,Pmin , Pmax ,
n , m ,</span> <span class="c15"></span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">NFAN (qualifier word) , Nmin , Nmax
, n , m ,</span> <span class="c15"></span><span class="c2">&nbsp;
- The "XFAN", "YFAN", "PFAN" and "NFAN" commands are used to
generate and display ray fan data for a set of rays intersecting
the reference surface. These sets of rays are traced in fan lines
and intersect the reference surface at fractional reference surface
coordinates from "X</span><span class="c13">min</span><span class=
"c2">" to "X</span><span class="c13">max</span><span class="c2">"
for "XFAN", "Y</span><span class="c13">min</span><span class="c2">"
to "Y</span><span class="c13">max</span><span class="c2">",
&nbsp;for "YFAN", "P</span><span class="c13">min</span><span class=
"c2">" to "P</span><span class="c13">max</span><span class="c2">"
for "PFAN" and "N</span><span class="c13">min</span><span class=
"c2">" to "N</span><span class="c13">max</span><span class="c2">"
for "NFAN". There will be "m" rays traced. These "m" rays are
evenly spaced along the fan line between the minimum and maximum
fan reference surface coordinate limits. If no entry is made for
"m", four rays will be traced for an XFAN and nine rays for all
other fans. All rays will be traced at wavelength number "n".
"</span><span class="c9"></span><span class="c2">" is the fan
offset shown in the next figure. "</span><span class=
"c9"></span><span class="c2">" allows a fan to be traced "offset"
in the reference surface. "</span><span class=
"c9"></span><span class="c2">" is entered as a relative,
fractional value of the reference aperture height &nbsp;rather than
an offset in lens system units.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c14 c2">"XFAN" traces a ray fan along a
line defined by:</span></p>
<p class="c3"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 41.33px; height: 18.60px;">
<img alt="" src="rt_images/image16.png" style=
"width: 41.33px; height: 18.60px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3"><span class="c14 c2">"YFAN" traces a ray fan along a
line defined by:</span></p>
<p class="c3"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 41.33px; height: 18.60px;">
<img alt="" src="rt_images/image15.png" style=
"width: 41.33px; height: 18.60px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3"><span class="c14 c2">"PFAN" traces a ray fan along a
+45 degree line defined by:</span></p>
<p class="c3 c17"></p>
<p class="c3"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 213.33px; height: 26.67px;">
<img alt="" src="rt_images/image18.png" style=
"width: 213.32px; height: 26.65px; margin-left: 0.01px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3"><span class="c14 c2">"NFAN" traces a ray fan along a
-45 degree line defined by:</span></p>
<p class="c3"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 232.00px; height: 26.67px;">
<img alt="" src="rt_images/image17.png" style=
"width: 231.99px; height: 26.65px; margin-left: 0.01px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3"><span class="c14 c2">P and N are relative
(fractional) parameters, which measure distance along the "PFAN" or
"NFAN" at the reference surface. All fan extents are referenced to
the reference aperture height. If a PFAN is traced in a system
which has a non-circular clear aperture assigned to it, the maximum
extent of the fan when P is +1 or -1 will be set equal to the
larger of the two non-equal clear aperture height
dimensions.</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 1.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 337.20px; height: 407.33px;">
<img alt="" src="rt_images/image20.png" style=
"width: 337.20px; height: 407.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c11 c17"></p>
<p class="c11"><span class="c14 c2">Fan Offset
Definition</span></p>
<p class="c12 c17"></p>
<p class="c3"><span class="c2">The transverse ray aberrations DX,
DY, DN, DP and DR are displayed in lens units. They are the ray
height differences between the ray and the reference ray at the
image surface, either in the X, Y or radial coordinate direction.
DXA, DYA, DPA, DNA and DRA are the angular equivalents of DX, DY,
DP, DN and DR and are always measured in radians. LAX, LAY, LAN and
LAP are longitudinal aberration measures. They represent the
distance between the image surface and a plane perpendicular to the
local Z-axis of the image surface which passes through the
intersection point of a fan ray and the chief ray. This distance is
measured along the local Z-axis of the image surface. The distance
is always displayed in lens units. DTX , DTY, DTP and DTN are
differences in the tangents of the ray slope angles of a fan and
the chief ray. They are unitless. DR and DRA are defined by the
following equation:</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 145.33px; height: 34.67px;">
<img alt="" src="rt_images/image19.png" style=
"width: 145.32px; height: 34.66px; margin-left: 0.00px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c11 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 181.33px; height: 34.67px;">
<img alt="" src="rt_images/image22.png" style=
"width: 181.32px; height: 34.65px; margin-left: 0.01px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3"><span class="c5">The primary and secondary chromatic
differences, PCDX, PCDY, SCDX, SCDY, PCDP, PCDN, SCDP and SCDN are
measured in lens units at the image surface. PCDXA, PCDYA, SCDXA ,
SCDYA, PCDPA, PCDNA, SCDPA and SCDNA are the angular equivalents of
PCDX, PCDY, SCDX, SCDY, PCDP, PCDN, SCDP and SCDN. They are always
displayed in radians. The chromatic differences are formed by
differencing the transverse ray coordinates (in modes FOCAL and
UFOCAL) or the radian measure of the ray-to-optical axis angles (in
modes AFOCAL and UAFOCAL) calculated at each wavelength of either
the primary or secondary wavelength pairs. The ray datum calculated
at the second wavelength of the chromatic wavelength pair is always
subtracted from the ray datum calculated at the first wavelength of
the chromatic wavelength pair. NFANs and PFANs can be thought of as
YFANs which are rotated through either a + or a - 45 degree GAMMA
rotation at the reference surface. The output of NFANs and PFANs is
also represented in a rotated coordinate system which is located in
the plane of the image surface This rotated image plane coordinate
system has a +45 degree GAMMA rotation for NFANs and a - 45 degree
GAMMA rotation for PFANs. The following table lists output
displayed for each combination of fan type, fan qualifier and lens
mode:</span></p>
<a id="t.d5cfd79d9536874b8b1e5952c5af8a859d6d3795"></a><a id=
"t.1"></a>
<table class="c39">
<tbody>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">FAN</span></p>
<p class="c11"><span class="c10 c24">TYPE</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">FAN QUALIFIER</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">MODE</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">DATA</span></p>
<p class="c11"><span class="c10 c24">DISPLAYED</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">YFAN or XFAN</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(none)</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">FOCAL or UFOCAL</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">DX, DY</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">PFAN and NFAN</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(none)</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">FOCAL or UFOCAL</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">DN, DP</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">YFAN or XFAN</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(none)</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">AFOCAL or UAFOCAL</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">DXA, DYA</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">PFAN or NFAN</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(none)</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">AFOCAL or UAFOCAL</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">DNA, DPA</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(all fan types)</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">OPD</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(all modes)</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">OPD</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(all fan types)</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">LA</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">FOCAL or UFOCAL</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">LAX, LAY, DTX, DTY</span></p>
<p class="c11"><span class="c14 c2">or</span></p>
<p class="c11"><span class="c14 c2">LAN, LAP, DTN, DTP</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(all fan types)</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">LA</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">AFOCAL or UAFOCAL</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(not functional)</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(all fan types)</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">CD</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">FOCAL or UFOCAL</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">PCDX, PCDY, SCDX,
SCDY</span></p>
<p class="c11"><span class="c14 c2">or</span></p>
<p class="c11"><span class="c14 c2">PCDXN PCDP, SCDN,
SCDP</span></p>
</td>
</tr>
<tr class="c29">
<td class="c31" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">(all fan types)</span></p>
</td>
<td class="c28" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">CD</span></p>
</td>
<td class="c44" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">AFOCAL or UAFOCAL</span></p>
</td>
<td class="c30" colspan="1" rowspan="1">
<p class="c11"><span class=
"c14 c2">PCDXA,PCDYA,SCDXA,SCDYA</span></p>
<p class="c11"><span class="c14 c2">or</span></p>
<p class="c11"><span class="c14 c2">PCDNA,PCDPA,SCDNA</span></p>
<p class="c11"><span class="c14 c2">and</span></p>
<p class="c11"><span class="c14 c2">SCDPA</span></p>
</td>
</tr>
</tbody>
</table>
<p class="c12 c17"></p>
<p class="c12"><span class="c10">OPD FANS</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- OPD (optical path
difference) is defined as the optical path length along a given ray
minus the optical path length of the reference chief ray which
passes through the center of the reference surface. The optical
path lengths are measured from the object point to a reference
sphere in the image space. This reference sphere represents the
"perfect" spherical wave traveling in the direction of the
reference ray toward the image surface. The reference sphere is
constructed so that its center of curvature coincides with the
point of intersection of the reference ray with the image surface.
The radius of curvature of the reference sphere is chosen in one of
several ways, depending upon the mode of the lens (FOCAL/UFOCAL or
AFOCAL/UAFOCAL) and whether or not automatic calculation of the
exit pupil position is in effect.</span></p>
<p class="c3"><span class="c1">EXPUP (qualifier
word)</span><span class="c2">&nbsp; - The "EXPUP" command controls
how the radius of curvature of the reference sphere is calculated.
It takes one of two qualifier words, "AUTO" or "NOAUTO", and only
applies in modes FOCAL and UFOCAL. If the qualifier word "AUTO" is
used (this is the default when the program starts and is ALWAYS
used during spot diagram OPD calculations), then close real
differential rays are traced along the chief ray to determine
location of the real exit pupil. The reference sphere radius of
curvature is then equal to the distance from this real exit pupil
to the intersection of the chief ray with the image surface
measured along the chief ray. If the qualifier word "NOAUTO" is
used, then the radius of curvature of the reference sphere is
computed as follows:</span></p>
<p class="c3"><span class="c14 c2">If the surface preceding the
image surface has a non-zero thickness, then the radius of
curvature of the reference sphere is set equal to that axial
thickness.</span></p>
<p class="c3"><span class="c2">If the surface preceding the image
surface has a zero axial thickness, then the radius of curvature of
the reference sphere is set equal to the axial distance from the
image surface to the location of the paraxial exit pupil measured
along the optical axis. The reference ray is always traced at the
wavelength specified in the "FOB" command. The center of curvature
&nbsp;and the radius of the reference sphere do</span> <span class=
"c21">not</span><span class="c2">&nbsp;change as fans are traced at
different wavelengths but only when the object point is redefined
with a new "FOB" command.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c2">For afocal systems, the reference
"sphere" is not a sphere but is a plane located at the intersection
of the reference ray with the image surface. It is perpendicular to
the reference ray. In some cases, such as in visual systems, it may
be a good idea to place this final surface at the location of the
paraxial exit pupil by using an ASTOP EX setting, or at the
location of the real ray exit pupil via an optimization based upon
where the chief ray crosses the optical axis. Since afocal systems
vary so much in their intended use, designer judgement should be
used in the selection of the location of the final surface in
afocal systems when OPD wavefront performance must be evaluated.
For focal systems which have their exit pupil at infinity
(telecentric systems), the reference "sphere" is also not a sphere
but is a plane perpendicular to the reference ray and located at
infinity. Infinity in this case is a value whose magnitude is
greater than or equal to 1.0X10</span><span class=
"c2 c18">10</span><span class="c2">&nbsp;lens units. If reference
ray differential ray tracing has been shut off via the "DIFFOB (OFF
or NO)" command, the paraxial exit pupil position will be used even
if "EXPUP AUTO" was in effect.</span></p>
<p class="c8"><span class="c10">ABERRATION FAN
PLOTTING</span><span class="c21">&nbsp;</span></p>
<p class="c8"><span class="c1">DRAWFAN , (ssi) ,
dflag</span><span class="c2">&nbsp; - During the design process it
is often useful to issue a "FOB" command followed by one of the CMD
level fan commands so as to examine the current aberration
characteristic of the system being designed. If a "DRAWFAN" command
is issued immediately after one of the fan commands, a graphical
representation of this "last" fan will be displayed on the screen.
This fan plot may be re-displayed on the screen with the "DRAW"
command or may be sent to a printer or plotter with the "GRAOUT"
command. The optional scale bar length, "ssi", may be entered to
specify the scale bar length used in the display. If it is
ommitted, the scale bar length will be automatically picked by the
program. The rest of the commands described in this section are
independent of the last fan displayed using the CMD level fan
commands. If "dflag" is explicitly input (any numeric value), the
automatic "draw" command will not be issued.</span></p>
<p class="c8"><span class="c1">PLT_FAN , (ssi)</span><span class=
"c2">&nbsp; - This command is identical to "DRAWFAN" except that
the fan is not drawn. A seperate "DRAW" command should be issued to
draw the plotted fan.</span></p>
<p class="c8"><span class="c10">AUTOMATED FAN
PLOTS</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
These commands are provided so that the designer may custom tune
the type of plot to be generated. They work best when issued from
within a macro. They generate fan plots at three field-of-view
positions. In the default mode, the field positions are at 1.0, 0.7
and 0.0 relative Y-field-of-view positions as defined by the "SCY"
or "SCY FANG" setting in the current lens file.</span></p>
<p class="c8"><span class="c1">FANFIELD (F1 or F2 or F3) , y-fob ,
x-fob</span></p>
<p class="c8"><span class="c14 c2">The CMD level command "FANFIELD"
is used to reset the default values of the field positions for the
automated fan plots to follow. The settings are "sticky" and stay
set until reset or until the program terminates. The valid
qualifiers are "F1", "F2" and "F3". The "y-fob" and "x-fob" are
fractional object or field positions just like those used with the
"FOB" command. The default "y-fob" and "x-fob" values for fields
"F1", "F2" and "F3" are: (1.0,0.0), (0.7,0.0) and
(0.0,0.0).</span></p>
<p class="c8"><span class="c1">FANS (qualifier word) , ssi ,
dflag</span></p>
<p class="c8"><span class="c5">The CMD level command "FANS" causes
a one-page, three field-of-view fan plot to be generated. If
"dflag" is zero (the default), the plot is automatically displayed
on the screen. Afterward, the plot may be printed using the
"GRAOUT" command. If "dflag" is set to any non-zero value, the
automatic display is suppressed. The plot may still be displayed
with the "DRAW" command and printed with the "GRAOUT" command.
"ssi" is the amount of aberration represented by the vertical axis
of the plots. If "ssi" is omitted, the plots will be auto-scaled by
the maximum aberration value in the first field of view. Aberration
fans will be generated and displayed based upon the current "SPTWT"
and "SPTWT2" spectral weight settings in the lens database. The
following table lists all of the valid qualifier words (the default
qualifier word is "XYFAN") &nbsp;and the types of fans which will
be generated by each:</span></p>
<a id="t.ce32cb9f11aa1e7ab6dc5e36e3a80197b3ad1551"></a><a id=
"t.2"></a>
<table class="c39">
<tbody>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<ol class="c56 lst-kix_list_1-2 start" start="1">
<li class="c12 c53">
<h3 style="display:inline"><span class="c10 c24">QUALIFIER
WORD</span></h3>
</li>
</ol>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c35"><span class="c10 c24">TYPE OF FAN
GENERATED</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">XFAN or YFAN</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">X and Y-components of an X-fan
or a Y-fan</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">XYFAN or YXFAN</span></p>
<p class="c35"><span class="c14 c2">(XYFAN is the
default)</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">Transverse tangential or
sagittal aberrations of X and Y ray &nbsp;fans</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">NFAN or PFAN</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">N and P-components of an N-fan
or a P-fan</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">XOPD or YOPD</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">OPD of an X-fan or a
Y-fan</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">XYOPD</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">OPD of X and Y ray
fans</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">NOPD or POPD</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">OPD of an N or a
P-fan</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">XCD or YCD</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">X and Y-chromatic differences of
X or Y-fans</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">XYCD of YXCD</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">Chromatic differences
(tangential or sagittal components) &nbsp;of X and Y ray
&nbsp;fans</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">NCD or PCD</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">N and P-chromatic differences of
N or P-fans</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">XLA or YLA</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">X and Y-components of the
longitudinal aberrations of an X or Y-fan</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">XYLA or YXLA</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">Longitudinal aberrations
(tangential or sagittal) &nbsp;of X and Y ray &nbsp;fans</span></p>
</td>
</tr>
<tr class="c29">
<td class="c46" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">NLA or PLA</span></p>
</td>
<td class="c33" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">N and P-components of the
longitudinal aberrations of an N or P-fan</span></p>
</td>
</tr>
</tbody>
</table>
<hr style="page-break-before:always;display:none;">
<p class="c8 c17"></p>
<p class="c8"><span class="c14 c2">It will be noticed that the X
and Y-fans are not drawn on the same sides on the plots as in some
other optical design programs. This is because X comes before Y in
the English alphabet and we are using a left to right alphabetical
layout for most of the fans in graphical output.</span></p>
<p class="c8"><span class="c10">REGULAR RAY FAN
COMMANDS</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The commands which follow may be used to graphically
display ray fans. The plots are sent to NEUTRAL.DAT as usual and
may then be displayed to the screen or printed in the usual way.
The commands which follow set up parameter values which specify the
exact type of plot to be generated. The final command causes the
specified plot to be generated and sent to NEUTRAL.DAT. The order
of entry of all of these commands, except the last command
"PLOTFANS GO", is not important.</span></p>
<p class="c8"><span class="c1">PLOTFANS SSI , i</span><span class=
"c2">&nbsp;- The "PLOTFANS SSI" command sets the aberration
plotting scale so that "i" units of the specified aberration are
plotted in the vertical height of each fan plot drawn. This command
also sets the magnitude of the aberration represented by the
aberration scale bar. This bar is drawn in the caption area of the
plot. If this command is omitted, the scale bar will be
automatically set equal to the maximum aberration value at the
first field of view position specified in the next two commands. If
this default "ssi" determination yields a zero "ssi" value, "ssi"
will be set to 0.001.</span></p>
<p class="c8"><span class="c1">PLOTFANS YFOB , yfob1 , yfob2 ,
yfob3</span><span class="c2">&nbsp;- The "PLOTFANS YFOB" command
sets Y-fractional object heights "yfob1", "yfob2" and "yfob3" for
up to three fields of view.</span></p>
<p class="c8"><span class="c1">PLOTFANS XFOB , xfob1 , xfob2 ,
xfob3</span><span class="c2">&nbsp;- The "PLOTFANS XFOB" command
sets X-fractional object heights "xfob1", "xfob2" and "xfob3" for
up to three fields of view. The program determines from these two
commands whether one, two or three sets of fans will be drawn per
fan plot. If these commands are omitted, one set of fans will be
drawn using X and Y-fractional object heights both equal to
0.0.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8"><span class="c1">PLOTFANS OFFSET ,</span>
<span class="c15"></span><span class="c2">&nbsp; - The "PLOTFANS
OFFSET" command sets the fan "offset" to be equal to</span>
<span class="c9"></span><span class="c2">. This "offset" is
described in the discussion of ray fans in the CMD
section.</span></p>
<p class="c8"><span class="c1">PLOTFANS NEWOBJ ,
i</span><span class="c2">&nbsp; - The "PLOTFANS NEWOBJ" command
sets surface "i" to be the new temporary object surface for the
next fan plot. The default object surface is surface 0.</span></p>
<p class="c8"><span class="c1">PLOTFANS NEWREF ,
i</span><span class="c2">&nbsp; - The "PLOTFANS NEWREF" command
sets surface "i" to be the new temporary reference surface for the
next fan plot. The default reference surface is the current
reference surface defined in the lens database.</span></p>
<p class="c8"><span class="c1">PLOTFANS NEWIMG ,
i</span><span class="c2">&nbsp; - The "PLOTFANS NEWIMG" command
sets surface "i" to be the new temporary image surface for the next
fan plot. The default image surface is the last surface of the lens
database.</span></p>
<p class="c8"><span class="c1">PLOTFANS REFWV , n</span>
<span class="c2">&nbsp;- The "PLOTFANS REFWV" command sets
wavelength number "n" to be the new temporary reference wavelength
for the next fan plot. The default reference wavelength is the
control wavelength defined in the lens database.</span></p>
<p class="c8"><span class="c1">PLOTFANS WV , i , j , k , l ,
m</span><span class="c2">&nbsp; - The "PLOTFANS WV" command
specifies the first five program wavelengths for which fans will be
traced and plotted. Each of the "i" through "m" input values can be
set to</span> <span class="c9"></span><span class="c2">1
through</span> <span class="c9"></span><span class="c2">10. A plus
value indicates that a fan will be generated at that wavelength
number. A minus indicates that a fan will not be generated at that
wavelength number. If this command is omitted, the current state of
the spectral weighting factors will be used to determine if a fan
will be traced. Fans will be traced, in this default scenario, at
each of the program wavelengths for which the spectral weighting
factor is non-zero.</span></p>
<p class="c12"><span class="c1">PLOTFANS WV2 , i , j , k , l ,
m</span><span class="c2">&nbsp;- The "PLOTFANS WV2" command
specifies the second five program wavelengths for which fans will
be traced and plotted. Each of the "i" through "m" input values can
be set to</span> <span class="c9"></span><span class="c2">1
through</span> <span class="c9"></span><span class="c2">10. A plus
value indicates that a fan will be generated at that wavelength
number. A minus indicates that a fan will not be generated at that
wavelength number. If this command is omitted, the current state of
the spectral weighting factors will be used to determine if a fan
will be traced. Fans will be traced, in this default scenario, at
each of the program wavelengths for which the spectral weighting
factor is non-zero.</span></p>
<p class="c8"><span class="c14 c2">Primary Chromatic Difference
&nbsp;(PCD) fan plots use line style #0 and the color assigned to
wavelength #1 in the other types of fan plots. Secondary Chromatic
Difference (SCD) fan plots use line style # 1 and the color
assigned to wavelength #2 in the other types of fan
plots.</span></p>
<p class="c8"><span class="c1">PLT(X.or Y or XY or YX or N or P)
FAN (qualifier)</span> <span class="c2">&nbsp;- The "PLTXFAN",
"PLTYFAN", "PLTXYFAN", "PLTYXFAN", "PLTNFAN" and "PLTPFAN" commands
specify the type of fan data that will be displayed. "PLTXFAN" will
generate plot data for the X and Y-components of an X-fan .
"PLTYFAN" will generate plot data for the X and Y-components of a
Y-fan. "PLTXYFAN" will generate plot data for the X-component of an
X-fan and the Y-component of a Y-fan. "PLTYXFAN" will generate plot
data for the Y-component of an X-fan and the X-component of a
Y-fan. "PLTNFAN" will generate plot data for the N and P-components
of an N-fan. "PLTPFAN" will generate plot data for the N and
P-components of a P-fan. If none of the above six commands is
explicitly issued, then the default fan type will be that which
would have been generated by a "PLTXYFAN" command. &nbsp;The
"qualifier" may be (no qualifier) or "OPD" or "LA" or "CD". A more
detailed description of aberration fans is contained in the CMD
manual section. The qualifier "OPD" used with either the "PLTXYFAN"
or the "PLTYXFAN" command, produces identical results.</span></p>
<p class="c8"><span class="c1">PLOTFANS RESET</span><span class=
"c2">&nbsp;- The "PLOTFANS RESET" command resets all fan plotting
settings to their original state immediately after a "PLOT NEW"
command.</span></p>
<p class="c8"><span class="c1">PLOTFANS GO</span><span class=
"c2">&nbsp;- The "PLOTFANS GO" command causes all plotfan settings,
both implicit and explicit, to be used to generate a fanplot. This
plot is sent to the NEUTRAL.DAT. Fan plot display is then performed
via the "DRAW", or the "GRAOUT " command.</span></p>
<p class="c8"><span class="c10">USER-DEFINED FAN
PLOTS</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
The fan plotting commands which have been described so far attempt
to give the user a way to generate aberration fan plots in a more
or less automated way. The following user-defined fan plotting
commands give the user complete control, and responsibility, for
the generation of custom aberration fan plots. Before these five
following user-defined fan plotting commands are issued, a "PLOT
NEW" command should be issued. At anytime during the issuing of any
of these user-defined aberration fan plotting commands, the user
may issue "DRAW" commands to check on the progress of the
user-defined aberration plotting.</span></p>
<p class="c8"><span class="c1">PFANAXIS ,(xpos) , (ypos) ,
(x-extent) , (y-extent) , (clipping)</span><span class="c2">&nbsp;
- The "PFANAXIS" command causes an aberration fan axis set to be
generated. The axis set will be centered at "xpos" and "ypos". The
default values are "xpos"= 5000 and "ypos" = 3500 device
independent coordinates. The "x-extent" and "y-extent" set the x
and y-extents of the respective axes in device independent
&nbsp;units. Extent defaults are "x-extent" = 2500 and "y-extent" =
2000 device independent units. "clipping" set to 0 will cause the
fan plots to be clipped outside of a box defined by the axes
extents. "clipping" set to 1 will result is no fan plot clipping.
The color of the axes will be the current RAY color set using
"COLORSET" command and the line style will be the current line
style set using the "PLOT LSTYLE" command. "PFANAXIS", issued with
the interrogator "?", causes the current "xpos", "ypos",
"x-extent", "y-extent" and "clipping" values to be displayed at the
current output device.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8"><span class="c1">PFANSSI ssi</span><span class=
"c2">&nbsp; - The "PFANSSI" command allows the user to explicitly
set the "ssi" scale bar for all user-defined fan plotting. If no
explicit "ssi" is in effect, one will be computed based upon the
first aberration fan plotted with the "PFANCOMP" command. "ssi" is
the amount of vertically represented aberration which will be
displayed in ("y-extent") device independent units. "PFANSSI"
issued with the interrogator "?", causes the current "ssi" value to
be displayed at the current output device.</span></p>
<p class="c8"><span class="c1">PFANLBL (vertical axis label  up to
21 characters)</span><span class="c2">&nbsp; - The "PFANLBL"
command causes the current aberration fan axis set to be labeled.
The left and right extremes of the x-axis will be labled 1.0 and
1.0 representing the limits of the reference aperture. The vertical
axis will be labled with the optionally input label (up to 21
characters in length). The default label is blank.</span></p>
<p class="c8"><span class="c1">PFANCAP (fan caption  up to 40
characters)</span><span class="c2">&nbsp; - The "PFANCAP" command
causes the current aberration fan axis set to be captioned with a
caption up to 40 characters in length. The caption will be fit
beneath the plot, as close to the plot as is practical. The default
caption is blank.</span></p>
<p class="c8"><span class="c1">PFANCOMP , component number , color
number, line style number</span><span class="c2">&nbsp; - The
"PFANCOMP" command causes the specified component of &nbsp;the last
aberration fan generated to be plotted on the current user-defined
fan axis set. Components of the aberration fans are numbered as per
the following table. Remember that "LA" fans are only available in
the FOCAL and UFOCAL modes. Color numbers range from 1 to 10 and
represent the 10 currently assigned colors associated with the WAV1
to WAV10 entries in the "COLORSET" command. Line stype numbers are
the numbers associated with the line styles in the "LSTYLE"
command. When tracing fans in a macro prior to plotting, the
textual output at the screen can be supressed by issuing an "OUT
NULL" before and after each "FAN" command.</span></p>
<a id="t.f19111fe046072d7917be22fd7c36647455321f0"></a><a id=
"t.3"></a>
<table class="c54">
<tbody>
<tr class="c29">
<td class="c55" colspan="1" rowspan="1">
<p class="c8 c17"></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c35"><span class="c10 c24">Component number</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c35"><span class="c10 c24">Component number</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c35"><span class="c10 c24">Component number</span></p>
</td>
<td class="c38" colspan="1" rowspan="1">
<p class="c35"><span class="c10 c24">Component number</span></p>
</td>
</tr>
<tr class="c29">
<td class="c51" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">Fan Type (numeric word #1
value)</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">1</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">2</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">3</span></p>
</td>
<td class="c38" colspan="1" rowspan="1">
<p class="c35"><span class="c14 c2">4</span></p>
</td>
</tr>
<tr class="c29">
<td class="c51" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">Fans (no qualifier)</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">DX, DXA,DN, DNA</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">DY, DYA, DP, DPA</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">(not used)</span></p>
</td>
<td class="c38" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">(not used)</span></p>
</td>
</tr>
<tr class="c29">
<td class="c51" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">OPD fans</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">OPD</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">(not used)</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">(not used)</span></p>
</td>
<td class="c38" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">(not used)</span></p>
</td>
</tr>
<tr class="c29">
<td class="c51" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">LA fans</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">LAX or LAX</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">LAY or LAP</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">DTX or DTN</span></p>
</td>
<td class="c38" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">DTY or DTN</span></p>
</td>
</tr>
<tr class="c29">
<td class="c51" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">CD fans</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">DCDX or DCDN or</span></p>
<p class="c8"><span class="c14 c2">DCDXA or DCDNA</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">DCDY or DCDP or</span></p>
<p class="c8"><span class="c14 c2">DCDYA or DCDPA</span></p>
</td>
<td class="c34" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">SCDX or SCDN or</span></p>
<p class="c8"><span class="c14 c2">SCDXA or SCDNA</span></p>
</td>
<td class="c38" colspan="1" rowspan="1">
<p class="c8"><span class="c14 c2">SCDY or SCDP or</span></p>
<p class="c8"><span class="c14 c2">SCDYA or SCDPA</span></p>
</td>
</tr>
</tbody>
</table>
<p class="c8 c17"></p>
<p class="c8"><span class="c14 c2">This is the end of the
user-defined aberration fan plotting capability. Remember, these
commands are for users who wish to create and label custom types of
aberration plots not normally available in other optical design
programs. Any labeling which is desired and which is not described
in these above five commands may be added using the commands such
as "PLOT NOTE" , "PLOT PEN", "PLOT ACC" etc. which are described
earlier in this section. You don't see the action of these commands
until you issue a "DRAW" command or until you send the plot to the
printer with the "GRAOUT" command.</span></p>
<p class="c8"><span class="c21">Example:</span><span class=
"c2">&nbsp;The following macro is an exaple of user-defined fan
plotting:</span></p>
<p class="c8"><span class="c24 c21 c23">MACRO TESTIT</span></p>
<p class="c8"><span class="c24 c21 c23">C set output to null and
generate fan data</span></p>
<p class="c8"><span class="c24 c21 c23">OUT NULL</span></p>
<p class="c8"><span class="c24 c21 c23">FOB</span></p>
<p class="c8"><span class="c24 c21 c23">YFAN OPD , -1 , 1 , 1 ,
11</span></p>
<p class="c8"><span class="c24 c21 c23">OUT TP</span></p>
<p class="c8"><span class="c24 c21 c23">C set output to screen, fan
data generated</span></p>
<p class="c8"><span class="c24 c21 c23">PLOT NEW</span></p>
<p class="c8"><span class="c24 c21 c23">PFANAXIS 4000 ,
3000</span></p>
<p class="c8"><span class="c24 c21 c23">C center plot at x4000,
y=3000</span></p>
<p class="c8"><span class="c24 c21 c23">PFANLBL OPD FAN
PLOT</span></p>
<p class="c8"><span class="c24 c21 c23">PFANCAP OPD Example
plot</span></p>
<p class="c8"><span class="c24 c21 c23">PFANCOMP 1</span></p>
<p class="c8"><span class="c24 c21 c23">DRAW</span></p>
<p class="c8"><span class="c24 c21 c23">C generate more fans to
plot on this axis set</span></p>
<p class="c8"><span class="c24 c21 c23">C or start a new axis set
and plot more fans.</span></p>
<p class="c8"><span class="c21 c23">EOM</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12 c17"></p>
<p class="c12"><span class="c10">RAY FAILURE
CODES</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
Most of the time when a ray cannot be traced through an optical
system, a full descriptive error message is displayed on the
screen. There are some instances, however, where these messages
would cause too much screen clutter, and in these cases, a shorter
message referencing a ray failure code is displayed. This is
particularly true during ray fan tracing. The following is a list
of ray error codes with their meanings:</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 1 AT SURFACE (I)</span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray was not able to
intersect surface I.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 2 AT SURFACE (I)</span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Iterative intersection
routine for an aspheric, toric or special surface failed to
converge for surface (I).</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 3</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray trace failed to
converge to the reference surface aim point.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 4 AT SURFACE (I)</span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Total internal
reflection occurred at surface (I).</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 5 AT SURFACE (I)</span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Angle of diffraction at
the grating on surface (I) was physically unrealizable.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 6 AT SURFACE (I)</span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray was blocked by a
clear aperture on surface (I).</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 7 AT SURFACE (I)</span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray was blocked by an
obscuration on surface (I).</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 8</span></p>
<p class="c3"><span class="c14 c2">MEANING: Chief ray from the
current object point could not be traced.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 9 AT SURFACE (I)</span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Angle of refraction for
the HOE on surface (I) was physically unrealizable.</span></p>
<p class="c3"><span class="c14 c2">(ray failur code 10 not
currently in use)</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 11 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Reference ray cannot be
traced because current trace wavelength is equal to 0.0 microns.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 12 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray can not be traced
because current trace wavelength is equal to 0.0 microns.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 13 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c2">MEANING: Ray can not be traced
because ray missed the grazing incidence surface section between
the beginning and ending Z-coordinates defined in special surface
coefficients C</span><span class="c2 c22">1</span><span class=
"c2">&nbsp;and C</span><span class="c2 c22">2</span><span class=
"c2">. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 14 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Illumination ray can
not be traced because ray was blocked by a clear
aperture.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 15 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray can not be traced
because GRID (apodization, sag or phase) file data was missing for
this surface.</span></p>
<p class="c3"><span class="c6 c24">RAY FAILURE CODES
(cont'd)</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 16 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Specified object point
does not exist because sag on object surface at specified x and y
points does not exist.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 17 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: No DEFORM file exists
for the surface or the file has insufficient data.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 18 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c2">MEANING: Ray coordinate lies beyond
deformable surface bounds.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 19 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Aimed chief ray could
not hit defined target point in the image surface.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 20 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray failed because it
could not reflect in a TIR condition. This is related to the
"REFLTIRO" command.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 21 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray failed because it
could not be traced in the CONSTRUCTION configuration for a HOE-R,
Type 13 special surface.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 22 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray failed because it
could not be traced in the REFERENCE configuration for a HOE-R,
Type 13 special surface.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 23 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Reference ray could not
intersect the NSS surface group.</span></p>
<p class="c3"><span class="c2">MESSAGE:</span> <span class=
"c21">RAY FAILURE CODE 24 AT SURFACE
(I)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="c3"><span class="c14 c2">MEANING: Ray could not intersect
the NSS surface group.</span></p>
<p class="c3"><span class="c14 c2">In the source code, the failure
code is tracked in RAYCOD(1) and the surface the ray stopped on is
tracked with RAYCOD(2).</span></p>
<p class="c3"><span class="c10">SPOT DIAGRAM RAY
TRACING</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- Spot diagrams, as used in OPTIMIZATION, are described
in the OPTIM section of this manual. Spot diagram ray tracing
provides a means to trace one of several different types of ray
distributions through the current lens system. Each ray in the
distribution is aimed at a specific point in the current reference
surface. If the reference surface has no clear aperture assigned to
it, a temporary clear aperture will be assigned. This temporary
clear aperture will be dimensioned according to the maximum of the
current XZ and YZ-plane reference aperture heights. The clear
aperture type will be circular. After completion of the spot
diagram ray tracing, this temporary clear aperture will be removed.
Spot diagram ray tracing is used to analyze geometrical imaging
properties of the current lens in its current active configuration
and can be used during optimization to optimize the RMS spot
dimensions. An "FOB" command must be in effect before spot diagrams
can be traced. Spot diagram rays all have equal energy unless ray
energies are adjusted using the "APOD" command. The energy
weighting scheme, once set, is used in all calculations involving
spot diagram data including geometrical optical transfer function
calculations described later in this section.</span></p>
<p class="c3"><span class="c1">STATS (FULL or
MIN)</span><span class="c2">&nbsp; - The "STATS" command causes a
sticky switch to be set which determines the amount of statistical
data calculated and displayed by some of the "SPD" commands. The
program default is "FULL". &nbsp;Output generated by this command
will vary depending upon the "MODE" of the current lens and whether
"FOB" or "FOB NULL" is in effect. Ray failure statistics are always
displayed. Spot diagrams are used both for optical system analysis
and for some types of optimization. The default forms of the ray
distributions in the spots for these two purposes are different.
Spot characteristics for optimization are controlled by commands
described in the OPTIMIZATION section of this manual. Spot
characteristics for optical system analysis are controlled by the
next few commands.</span></p>
<p class="c3"><span class="c1">SPOT (RECT, RING,
RAND)</span><span class="c2">&nbsp; - The "SPOT" command, issued
with one of the three qualifier words ("RECT", "RING" or "RAND"),
is used to set the type of grid or ray distribution to be used in
spot diagram ray tracing. "RING" is the default type. "RECT" causes
a rectangular ray grid to be defined over the reference surface.
"RECT" also causes circular clear aperture to be assigned to the
reference surface if one has not yet been assigned. The default
rectangular grid size is 10X10. &nbsp;"RING" causes circular or
elliptical rings of rays to be traced. A temporary circular clear
aperture will be assigned to the reference surface if no clear
aperture is assigned to that surface. The default spot diagram will
contain 33 rays. One ray at the center and eight rays each in rings
at fractional reference surface radii 0.5, 0.707, 0.866 and 1.0.
The eight rays will be uniformly distributed in each of these rings
and all ring angular offsets will be zero. If the reference surface
clear aperture is not square or circular, rays will have similar
fractional relative but different actual coordinate in X and Y on
&nbsp;the reference surface. If the qualifier "RAND" is used, a
pseudo-random ray distribution over the reference surface will be
traced. If no clear aperture is assigned to the reference surface,
a circular clear aperture will be assigned. The randomly
distributed rays are distributed over a square area which is just
large enough to guarantee that the clear aperture on the reference
surface will be filled with rays. This is similar to the area over
which the rectangular grid is placed. Issued without a qualifier or
with the interrogator "?", the current grid style will be
displayed.</span></p>
<p class="c3"><span class="c1">RINGS , n</span><span class=
"c2">&nbsp; - The "RINGS" command is used to specify the number of
rings to be used whenever the "SPOT RING" command is in effect. The
maximum number of rings is set at 50. In general, these rings will
be first defined as circular. Rays will be distributed uniformly
around each circular ring and then, if needed, the circular ring
will be scaled to the appropriate ellipse. Elliptical rings are
used when an elliptical clear aperture has been assigned to the
reference surface or when the SAY and SAX values are not equal. The
program default &nbsp;for "n" is 4. These four default rings will
have fractional aperture heights (relative fractional radius) of
0.5, 0.707, 0.866 and 1.0. Each default ring will have eight
equally spaced rays on that ring. Angular offsets will be zero in
this default configuration. Issued with no numeric input or with
the special interrogator "?", "RINGS" displays the current number
of rings that will be used.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">RING , i , r , m ,</span>
<span class="c15"></span><span class="c2">&nbsp; - The "RING"
command is used to specify the relative fractional radius "r" of
ring "i", the number of rays "m" to be used in ring "i" and the
angular offset "</span><span class="c9"></span><span class="c2">"
of the first ray in ring "i". The program default value for "r", if
"RING" is explicitly issued, is the reciprocal of the total number
of rings times the number of the current ring. The maximum value
for "r" is always 1.0. The maximum value for "n" is 2500 per ring.
The program default is 8 rays per ring. "</span><span class=
"c9"></span><span class="c2">" is the first ray angular offset
value measured counter-clockwise from the local X-axis of the
reference surface coordinate system toward the local Y-axis of the
reference surface coordinate system. The default value for "</span>
<span class="c9"></span><span class="c2">" is 0.0. With this
default value in effect, the first ray in the ring will always lie
on the local Y-axis of the reference surface coordinate system.
Issued with no numeric input or with the special interrogator "?",
"RING" displays the current data for each ring. Issued with numeric
word #1 input only, "RING" displays the current data for ring
"i".</span></p>
<p class="c3"><span class="c1">RECT , n</span><span class=
"c2">&nbsp; - The "RECT" command is used to specify the dimensions
of the "n" X "n" rectangular grid of rays to be traced when "SPOT
RECT" is in effect. The default value for "n" is 10 and the maximum
is 300. Issued with no numeric input or with the special
interrogator "?", "RECT" displays the current number value of
"n".</span></p>
<p class="c3"><span class="c1">RANNUM , n</span><span class=
"c2">&nbsp; - The "RANNUM" command is used to specify the total
number of rays to be traced per wavelength when "SPOT RAND" is in
effect. The default value for "n" is 100. There is no maximum.
Issued with no numeric input or with the special interrogator "?",
"RANNUM" displays the current numeric value of "n". Should the
random number generator seed need be reset, use either the
"NEWSEED" or "SEED" commands in the RAYTRACE section of the
manual.</span></p>
<p class="c3"><span class="c1">SPDRESET</span><span class=
"c2">&nbsp; - The "SPDRESET" command is used to reset all
non-optimization related spot diagram parameters to their program
default values. Whenever the characteristics of a spot pattern is
modified by the user, all characteristics must be reset by the
user. If, for example, the user sets the number of rings to 20,
then the characteristics of every ring will need to be reset by the
user using the "RING" command.</span></p>
<p class="c3"><span class="c1">APOD &nbsp;(GAUSS</span>
<span class="c6">or</span><span class="c1">&nbsp;NONE) ,
dbloss</span><span class="c2">&nbsp; - The "APOD" command is used
to set the state of aperture apodization in spot diadram, complex
aperture function and point spread function calculations. The
default is "NONE" meaning a uniform apodization. If "GAUSS"
&nbsp;is selected, a gaussian apodization will be used such that at
the edge of the reference surface aperture, the ray intensity will
be reduced by "dbloss" decibles. This apodization will be applied
program wide including in tolerance and optimization options. The
default for "dbloss" is 0.0 meaning uniform apodization. If the x
and y-fractional ray positions in the reference surface are given
by "fx" and "fy" then "APX" and "APR" are given by the following
equations:</span></p>
<p class="c3 c17"></p>
<p class="c11"><img src="rt_images/image1.png"></p>
<p class="c11"><img src="rt_images/image2.png"></p>
<p class="c3"><span class="c14 c2">and the he original ray
intensity is reduced by:</span></p>
<p class="c11"><img src="rt_images/image3.png"></p>
<p class="c11 c17"></p>
<p class="c3"><span class="c2">cast in the more familiar optical
1/e</span><span class="c2 c18">n</span> <span class=
"c2">&nbsp;intensity reduction terms, the absolute value of the
"dbloss" term is given by:</span></p>
<p class="c3 c17"></p>
<p class="c11"><img src="rt_images/image4.png"></p>
<p class="c11 c17"></p>
<p class="c3"><span class="c21 c23">EXAMPLE: &nbsp;You want to
trace a gaussian apoadized beam into an optical system such that
the 1/e</span><span class="c21 c23 c18">2</span> <span class=
"c21 c23">intensity radius is 2.5 lens units at the reference
surface but you want the full gaussian traced into the system to be
truncated at an intensity = 1/e</span><span class=
"c21 c23 c18">6</span> <span class="c21 c23">&nbsp;reference
surface.</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c21 c23">Question: what reference
aperture height &nbsp;and dbloss term should be used, so that at a
reference surface radius of 2.5 lens units, the intensity will be
1/e</span><span class="c21 c23 c18">2</span> <span class=
"c21 c23">?</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c21 c23">The dbloss term is simple. It
is 10*Log</span><span class="c21 c23 c22">10</span><span class=
"c21 c23">(e</span><span class="c21 c23 c18">-6</span><span class=
"c21 c23">) = -26.0576689142</span></p>
<p class="c3 c17"></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c1">SPD , (</span><span class=
"c15"></span><span class="c1">#) , fflag , i</span> <span class=
"c2">&nbsp;- The "SPD" command causes a spot diagram to be traced
from the field position defined by the last "FOB" command. Rays are
traced in either a ring, rectangular or random distribution over
the reference surface, depending upon the settings established by
the foregoing spot definition commands. The default distribution is
a 10x10 rectangular ray grid. Full statistics are printed unless
STATS was set to MIN using the "STATS MIN" command. Rays will be
traced at every wavelength for which there is a non-zero spectral
weight if no explicit wavelength number , (</span><span class=
"c9"></span><span class="c2">#), is entered. If a specific
wavelength number is entered, only that wavelength will be used and
the spectral weight will be assumed to be 1.0. Ray energies are
established in relation to the spectral weights set at each
wavelength. RMS spot size and centroid location is computed and
displayed along with ray failure statistics. When "STATS FULL" is
in effect, distance to best geometrical focus is also displayed.
After the spot has been generated, a number of data values may be
"gotten" using the "GET" command described later in the RAYTRACE
section of this manual. Spot statistics are reported in lens units
for modes "FOCAL" and "UFOCAL" and in angular radian measure for
modes "AFOCAL" and "UAFOCAL". If "flagg" is not explicitly input or
is zero, clear aperture and obscuration checking checks for
aperture and obscuration ray blocking from surface 0 to the final
surface. If "fflag" has been explicitly issued or is set to "1",
then clear aperture and obscuration ray blockages are checked from
the final surface to surface 0. This provies support for simulated
reverse ray tracing. If the third numeric word "i", is set to a
surface number other than the surface number of the final surface,
then all calculations performed inside the "MTRACEI GRID" command
will use the X,Y and Z coordinates of the rays at surface "i"
rather than at the final or NEWIMG surface. All other spot diagram
calculations will remain un-affected.</span></p>
<p class="c3"><span class="c1">SPD ACC, (</span><span class=
"c15"></span><span class="c1">#) , fflag , i</span><span class=
"c2">&nbsp;- The "SPD ACC" command works exactly as the "SPD"
command does, except that no display of output is performed. The
RSM spot values are calculated by these commands. ". If "flagg" is
not explicitly input or is zero, clear aperture and obscuration
checking checks for aperture and obscuration ray blocking from
surface 0 to the final surface. If "fflag" has been explicitly
issued or is set to "1", then clear aperture and obscuration ray
blockages are checked from the final surface to surface 0. This
provies support for simulated reverse ray tracing.</span></p>
<p class="c3"><span class="c1">FAIL , i , j</span><span class=
"c2">&nbsp; and</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">FAIL ACC , i , j</span><span class=
"c2">&nbsp; - The "FAIL" and "FAIL ACC" commands either display or
store in the X-register (accumulator) the number of "failed" or
"blocked" rays in the current spot diagram. A spot diagram must
already exist for these commands to be used. If no numeric input is
entered for "i" or "j", the total number of failed rays at all
surfaces is returned. If only "i" is supplied, the number of failed
rays at surface "i" will be returned. If "i" and "j" are both
entered, the number of rays which failed at surface "i" through
surface "j" will be returned. The RSM spot values are</span>
<span class="c21">not</span> <span class="c2">calculated by these
commands.</span></p>
<p class="c3"><span class="c1">SPD MOVE ,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">SPD MOVEACC ,</span> <span class=
"c15"></span><span class="c2">&nbsp; - The "SPD MOVE" and "SPD
MOVEACC" commands either display or store in the X-register
(accumulator) the RMS spot size after a shift in focus of
"</span><span class="c9"></span><span class="c2">" lens units. A
spot diagram must already exist for these commands to be used.
These commands are only applicable in MODE FOCAL and MODE UFOCAL
systems. The RSM spot values are calculated by these
commands.</span></p>
<p class="c3"><span class="c1">SPD ISTAT , i , angle1, angle2
,</span> <span class="c15"></span><span class=
"c1">angle</span><span class="c2">&nbsp;- The "SPD ISTAT" command
generates a new spot diagram with surface "i" as the new current
image surface. It then displays a table listing the number of rays,
at &nbsp;surface "i", which have angles of incidence which range
from "angle1" degrees to just less than &nbsp;"angle1" +
"</span><span class="c9"></span><span class="c2">angle" degrees.
"angle1" is then incremented by "</span><span class=
"c9"></span><span class="c2">angle". This table continues until
"angle1" + "</span><span class="c9"></span><span class="c2">angle"
= "angle2". When this end condition occurs, rays with angles of
incidence equal to "angle2" are included in the final value. The
rays tabulated are non-zero energy, non-failed rays. The total
number of non-zero energy, non-failed rays is also
listed.</span></p>
<p class="c3"><span class="c1">SPD IPSTAT , i , angle1, angle2
,</span> <span class="c15"></span><span class=
"c1">angle</span><span class="c2">&nbsp;- The "SPD IPSTAT" command
is identical to "SPD ISTAT" except that instead of performing
statistics upon the angle of incidence of each ray in the spot
diagram, statistics are performed upon the angle of refraction,
reflection or diffraction.</span></p>
<p class="c3"><span class="c1">SPDSAVE (filename) ,
wt</span><span class="c2">&nbsp; - The "SPDSAVE" command causes the
current spot diagram to be stored in the file "filename".DAT.
Before the data is saved, the energy term for each ray will be
multiplied by the "wt" factor. The default value for "wt" is 1.0.
Any existing spot diagram stored in "filename".DAT is erased. RMS
spot values are</span> <span class="c21">not</span><span class=
"c2">&nbsp;calculated by this command. If no file name is
explicitly entered, the file named "SPOTS.DAT" will be
used.</span></p>
<p class="c3"><span class="c1">SPDADD (filename) ,
wt</span><span class="c2">&nbsp;The "SPDADD" command causes the
current spot diagram to be stored in the file "filename".DAT and
appended to any spot diagram data already stored in that file.
Before the data is saved, the energy term for each added ray will
be multiplied by the "wt" factor. The default value for "wt" is
1.0. The RMS spot values are</span> <span class=
"c21">not</span><span class="c2">&nbsp;calculated by this command.
If no file name is explicitly entered, the file named "SPOTS.DAT"
will be used.</span></p>
<p class="c3"><span class="c10">SPOT DIAGRAM DEPENDENT
CALCULATIONS</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">SPDSTATS
(filename)</span><span class="c2">&nbsp; - The "SPDSTATS" command
causes the spot diagram data stored in the "saved and summed" spot
diagram file "filename".DAT to be statistically analyzed and the
results of the analysis to be displayed. This command is useful for
creating averaged spot diagrams. The RMS spot values are calculated
by this command. If the file name "filename" is not explicitly
entered, the file SPOTS.DAT will be used. All "SPD" commands which
calculate RMS (Root Mean Square) geometrical spot diameter and the
X and Y-RMS spot dimensions cause these values to be automatically
placed in the X, Y and Z-general purpose storage registers. A spot
diagram must exist before radial energy distributions, expanding
slit energy distributions, LSFs and MTFs calculations can be
performed. At least 100 non-failing rays per non-zero weighted
wavelength should be traced before any of the following commands
are issued. The commands described below generate radial and
expanding slit edge energy distributions, line spread functions and
geometrical optical transfer functions, and these calculations are
always based upon the most recent spot diagram.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c10">WRITING A SPOT
DIAGRAM</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">BWRTSPOT
(filename)</span><span class="c2">&nbsp; - The "BWRTSPOT" command
causes the last current spot diagram to be written to the main
program directory as the file named "filename" with the file
extension .SPD. The "filename" is input as a qualifier word and may
be up to 8 characters long. The data is written as a direct access
binary file. The first record is an integer which specifies the
number of records in the file not counting record 1 and the last
record. This file may later be opened, read and post-processed by a
user written program outside of this program. Each record, except
the first and the last, consists of the 50 double precision data
items kept for each ray in the spot diagram. The last record
contains the x, y, z, l, m, n and wavelength number of the chief
ray at the object surface. The file may be opened using the
following FORTRAN open statement: OPEN (UNIT = {unit number},
ACCESS = DIRECT, FILE = {file name}, FORM = 'UNFORMATTED', RECL =
240, STATUS = 'UNKNOWN'). If there are 100 rays in the spot
diagram, there will be 101 records in the file.</span></p>
<p class="c3"><span class="c1">AWRTSPOT
(filename)</span><span class="c2">&nbsp; -</span> <span class=
"c5">The "AWRTSPOT" command causes the last current spot diagram to
be written to the main program directory as the file named
"filename" with the file extension .ASC. The "filename" is input as
a qualifier word and may be up to 8 characters long. The data is
written in ASCII format. The first line &nbsp;contains an integer
which specifies the number of rays in the spot diagram. Every
following group of 25 lines contain the 50 items stored in a spot
diagram for each ray. This file may later be printed or opened,
read and post-processed by a user written program outside of this
program. If there are 100 rays in a spot diagram, there will be
1301 lines in the file plus the ending seven entries. The last
seven entries are the x, y, z, l, m, n and wavelength number of the
chief ray at the object surface. The first line holds items 1 and
two, the second line items 3 and 4 etc. The twenty-six data items
written for each ray in the spot diagram are:</span></p>
<a id="t.7b5b7068bd4977061f07bcf56aafeed97a2ba1eb"></a><a id=
"t.4"></a>
<table class="c39">
<tbody>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">Item Number</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">Data Description</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">1</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray X-coordinate at image
surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">2</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Y-coordinate at image
surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">3</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Z-coordinate at image
surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">4</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">(reserved for CAPFN
calculations)</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">5</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray X-coordinate at reference
surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">6</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Y-coordinate at reference
surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">7</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray failure code 1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">8</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray failure code 2</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">9</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray XZ-slope angle in radians
at image surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">10</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray YZ-slope angle in radians
at image surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">11</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray aperture apodization
term</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">12</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Energy term</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">13</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">OPL from object to image
surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">14</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray X-coordinate at current
Object+1 surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">15</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Y-coordinate at current
Object+1 surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">16</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Wavelength Number (1 to
10)</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">17</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Spectral Weighting
Factor</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">18</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Z-coordinate at Object+1
surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">19</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">L-dir cosine of ray at Object+1
surface in coordinate system of surface Object</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">20</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">M-dir cosine of ray at Object+1
surface in coordinate system of surface Object</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">21</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">N-dir cosine of ray at Object+1
surface in coordinate system of surface Object</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">22</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">L-dir cosine of ray at Image
surface in coordinate system of surface Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">23</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">M-dir cosine of ray at Image
surface in coordinate system of surface Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">24</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">N-dir cosine of ray at Image
surface in coordinate system of surface Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">25</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray angle of incidence at the
image surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">26</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray angle of exitance at image
surface</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">27</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">X - ray coordinate at
Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">28</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Y - ray coordinate at
Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">29</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Z - ray coordinate at
Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">30</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">L - dir cosine before surface
interaction at Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">31</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">M - dir cosine before surface
interaction at Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">32</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">N - dir cosine before surface
interaction at Image-1</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">33</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">User for Polychromatic RMSOPD
only</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">34</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Ray Energy ingnoring adjustment
due to pupil distortion</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">35</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">Spectral weight for rays
wavelength</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">36</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">0 is aimed ray is inside
reference surface clap, 1 if outside it.</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c11"><span class="c14 c2">37-50</span></p>
</td>
<td class="c27" colspan="1" rowspan="1">
<p class="c12"><span class="c14 c2">(reserved for future
use)</span></p>
</td>
</tr>
</tbody>
</table>
<hr style="page-break-before:always;display:none;">
<p class="c3 c17"></p>
<p class="c12"><span class="c10">WRITING A SUMMED SPOT
DIAGRAM</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">BWRTSUM (tofilename)
&nbsp;(fromfilename)</span><span class="c2">&nbsp; - The "BWRTSUM"
command causes the summed spot diagram in the file named
"fromfilename" in the LIBSPO directory to be written to the main
program directory as the file named "tofilename" with the file
extension .SPD. The "tofilename" is input as a qualifier word and
the "fromfilename" is input as a string. Each may be up to 8
characters long. The data is written as a direct access binary
file. The first record is an integer which specifies the number of
records in the file not counting record 1. This file may later be
opened, read and post-processed by a user written program outside
of this program. Each record after record #1 consists of the 50
double precision data items kept for each ray in the spot diagram.
The file may be opened using the following FORTRAN open statement:
OPEN (UNIT = {unit number}, ACCESS = DIRECT, FILE = {file name},
FORM = 'UNFORMATTED', RECL = 280, STATUS = 'UNKNOWN'). If there are
100 rays in the spot diagram, there will be 101 records in the
file. The "tofilename" must be explicitly entered. If the
"fromfilename" is not explicitly entered, the file SPOTS.DAT will
be used.</span></p>
<p class="c3"><span class="c1">AWRTSUM (filename)
&nbsp;(fromfilename)</span><span class="c2">&nbsp; - &nbsp;The
"AWRTSUM" command causes the summed spot diagram in the file named
"fromfilename" in the LIBSPO directory to be written to the main
program directory as the file named "tofilename" with the file
extension .ASC. The "tofilename" is input as a qualifier word and
the "fromfilename" is input as a string. Each may be up to 8
characters long. The data is written in ASCII format. The first
line &nbsp;contains an integer which specifies the number of rays
in the spot diagram. Every following group of 25 lines contain the
50 data items stored in a spot diagram for each ray. This file may
later be printed or opened, read and post-processed by a user
written program outside of this program. If there are 100 rays in a
spot diagram, there will be 1301 lines in the file. The
"tofilename" must be explicitly entered. If the "fromfilename" is
not explicitly entered, the file SPOTS.DAT will be used. The
twenty-six data items written for each ray in the spot diagram were
listed in the preceding table.</span></p>
<p class="c8"><span class="c10">SPOT DIAGRAM
PLOTS</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
This is another automated plot routine. All spot diagram plotting
routines apply to the most recently generated spot diagram. If no
spot diagram exists, a message to that effect is issued and no plot
is generated. Each ray in the spot diagram is represented by a
small plus sign &nbsp;(+). Rays in each wavelength are assigned a
color according to the current wavelength color assignments
described at the beginning of this section. All "ssi", "x",
"</span><span class="c9"></span><span class="c2">x", "Y" and
"</span><span class="c9"></span><span class="c2">y" dimensions are
entered as lens units in modes FOCAL and UFOCAL and in radian units
in modes AFOCAL and UAFOCAL.</span></p>
<p class="c8"><span class="c1">SPDSSI , ssi</span><span class=
"c2">&nbsp;- The CMD level command "SPDSSI" is used to set the
number lens system units (in the FOCAL and UFOCAL mode) or number
of RADIANS (in the AFOCAL or UAFOCAL mode) for the little scale bar
at the bottom of the spot diagram plot. The bar is 1.0 inch (25.4
mm) long in the printed version of spot diagram plots. The "ssi"
value remains set until a new spot diagram is generated. If no
"SPDSSI" command is issued, the "ssi" value will be automatically
set so that the maximum extent of the spot diagram spans 3.6 inches
(91.44 mm) on the display. The entire "square" in which the spot
diagram plots measures 4.0 inches (101.6 mm). If "SPDSSI" is issued
with the interrogator "?", the current "ssi" value will be
displayed.</span></p>
<p class="c8"><span class="c1">DET (ON or OFF)</span><span class=
"c2">&nbsp; - The CMD level command "DET" issued with the qualifier
words "ON" or "OFF" is used to specify whether or not a detector is
to be included in the spot diagram plot. The default is
"OFF".</span></p>
<p class="c8"><span class="c1">DET CIRC , diam ,</span>
<span class="c15"></span><span class="c1">x ,</span> <span class=
"c15"></span><span class="c1">y</span><span class=
"c2">&nbsp;</span></p>
<p class="c8"><span class="c2">The CMD level command "DET" issued
with the qualifier word "CIRC" is used to specify that the detector
is to be circular with diameter "diam". It is to be offset from its
nominal center position by "</span><span class=
"c9"></span><span class="c2">x" and "</span><span class=
"c9"></span><span class="c2">y" in the X and Y-directions,
respectively. The defaults for "</span><span class=
"c9"></span><span class="c2">x" and "</span><span class=
"c9"></span><span class="c2">y" are 0.0. "diam" must be explicitly
input.</span></p>
<p class="c8"><span class="c1">DET RECT ,x , y &nbsp;,</span>
<span class="c15"></span><span class="c1">x ,</span> <span class=
"c15"></span><span class="c1">y ,</span> <span class=
"c15"></span><span class="c2">&nbsp; - The CMD level command "DET"
issued with the qualifier word "RECT" is used to specify that the
detector is to be rectangular with X and Y-dimensions "x" and "y".
It is to be offset from its nominal center position by
"</span><span class="c9"></span><span class="c2">x" and
"</span><span class="c9"></span><span class="c2">y" in the X and
Y-directions, respectively. If is to be rotated
"</span><span class="c9"></span><span class="c2">" degrees
counterclockwise as seen looking from the current object surface
toward the detector. The defaults for "</span><span class=
"c9"></span><span class="c2">x", &nbsp;"</span><span class=
"c9"></span><span class="c2">y" and "</span><span class=
"c9"></span><span class="c2">" are 0.0. "x" and "y" must be
explicitly. If "DET" is issued followed by the interrogator "?",
the full current status of "DET" will be displayed. If the detector
shape is not explicitly input, the detector will not be drawn, even
if "DET ON" has been issued.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8"><span class="c1">PLTSPD (CHIEF or CENT or SUM or
ZERO) , dflag</span><span class="c2">&nbsp;- The CMD level command
"PLTSPD" causes a plot of the current spot diagram to be generated.
If "dflag" is zero (the default), the plot is automatically
displayed on the screen. Afterward, the plot may be printed using
the "GRAOUT" command. If "dflag" is set to any non-zero value, the
automatic display is suppressed. The plot may still be displayed
with the "DRAW" command and printed with the "GRAOUT" command.
Solid horizontal and vertical lines intersect at the spot center.
The qualifier "CHIEF" causes the chief ray location to be the
center of the plot. The qualifier "CENT" causes the spot centroid
to be the center of the plot. If the qualifier "CHIEF" is entered,
a pair of intersecting dashed lines will mark the spot centroid
location. If the qualifier "CENT" is entered, a pair of
intersecting dashed lines will mark the chief ray location. The
qualifier "ZERO" causes the center of the spot plot to be located
at x=0, y=0 on the image surface. Normally the current spot diagram
in file SPD.DAT is plotted. The qualifier "SUM" causes the "saved
and summed" spot diagram in file SPOTS.DAT to be plotted. This plot
is centered the X=0.0, Y=0.0 position in the spot. Spot diagrams
are "saved and summed" with the "SPD SAVE" and SPD SAVEADD"
commands described in the CMD section of this manual. If the "saved
and summed" spot diagram is stored in a file whose name is not
SPOTS.DAT, the file will first need to be renamed or copied to the
file SPOTS.DAT. A framed window 4.0 inches on a side defines the
extent of plotted spot diagram data. Any rays which would be
plotted outside this window are not plotted. If the detector would
be drawn outside this window, it, too, will be omitted. The spot
diagram plot is annotated with the lens identifier, field-of-view
position and spot diagram specification data. Spot diagrams are
always displayed with the positve y-axis of the final surface local
coordinate system pointing up, the positive x-axis of the final
surface local coordinate system pointing to the right and the
positive z-axis of the final surface local coordinate system
pointing toward the observer.</span></p>
<p class="c12"><span class="c10">GEOMETRICAL ENERGY
DISTRIBUTIONS</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- In the case of "perfect" geometrical systems, 100.0
percent of the energy will always lie within a spot of radius =
1.0X10-20 units or a slit of semi-width = 1.0X10-20 units (units
will either be linear system units or angular radian
units).</span></p>
<p class="c3"><span class="c1">RED (N) ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">RED (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
The "RED" and "RED CENT" commands produce radial energy
distributions using the current spot diagram data. "CENT" specifies
that the distribution center or reference point will be the spot
centroid location. In the absence of "CENT", the chief ray location
at the current image surface is used as the distribution center.
"</span><span class="c9"></span><span class="c2">E" specifies the
percent energy increments to be displayed. The default for
"</span><span class="c9"></span><span class="c2">E" is 10.0
(percent). Maximum and minimum allowed values for
"</span><span class="c9"></span><span class="c2">E" are 100.0
(percent) and 1.0 (percent), respectively. "</span><span class=
"c9"></span><span class="c2">X" and "</span><span class=
"c9"></span><span class="c2">Y" are interpreted as linear offsets
(in lens units) in modes "FOCAL" and "AFOCAL" and angular offsets
(in radians) in modes "AFOCAL" and "UAFOCAL". "</span><span class=
"c9"></span><span class="c2">Z" is a defocus term which is only
applicable in the "FOCAL" and "UFOCAL" modes. If the qualifier
words "N" or "NCENT" are used, no output is generated.</span></p>
<p class="c3"><span class="c1">RED ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class=
"c2">&nbsp;</span></p>
<p class="c3"><span class="c14 c2">and</span></p>
<p class="c3"><span class="c1">RED CACC , E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
The "RED ACC" and "RED CACC" commands produce no display. "RED ACC"
returns to the X-register (accumulator), the radius of the circle
which encloses "E" percent energy. All the above comments
concerning "</span><span class="c9"></span><span class="c2">X" ,
"</span><span class="c9"></span><span class="c2">Y", and
"</span><span class="c9"></span><span class="c2">Z" apply in the
same way as for the "RED" and "RED CENT" commands. "RED ACC"
centers the distribution at the chief ray; "RED CACC" centers it at
the spot centroid location.</span></p>
<p class="c3"><span class="c1">ESEDX (N) ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">ESEDX (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">ESEDX ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">ESEDX CACC , E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">ESEDY ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">ESEDY CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">ESEDY ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class=
"c2">&nbsp;</span></p>
<p class="c3"><span class="c1">ESEDY CACC , E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
The preceding eight commands act in exactly the same manner as the
four "RED" commands, except that they produce one dimensional,
expanding slit edge energy distributions in either the X or the
Y-directions at the current image surface. Instead of spot
semi-diameters, slit semi-width dimensions are displayed or
returned to the X-register (accumulator) when using the "ESED",
"ESEDX" and "ESEDY" commands. If the qualifier words "N" or "NCENT"
are used, no output is generated.</span></p>
<p class="c3"><span class="c1">ESED (N) ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">ESED (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">ESED ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">ESED CACC , E ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; - The preceding four commands
act in exactly the same manner as the eight "ESEDX" and "ESEDY"
commands, except that instead of limiting themselves to the X and Y
directions, they can produce expanding slit edge energy
distributions at any orientation specified by "</span><span class=
"c9"></span><span class="c2">" (in degrees). "</span><span class=
"c9"></span><span class="c2">" = 0 degrees corresponds to "ESEDX"
and "</span><span class="c9"></span><span class="c2">" = 90.0
degrees corresponds to "ESEDY". Instead of spot semi-diameters,
slit semi-width dimensions are displayed or returned to the
X-register (accumulator) when using the "ESED", "ESEDX" and "ESEDY"
commands. All offset dimensions for radial and expanding slit
energy distributions are represented in the coordinate system of
the image surface.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c14 c2">&nbsp;If the qualifier words "N"
or "NCENT" are used, no output is generated. After tabular data is
generated with the "RED" or the "ESED" commands, it may be
graphically displayed using the "PLTRED" and "PLTESED"
commands.</span></p>
<p class="c3"><span class="c10">SUMMED ENERGY
DISTRIBUTIONS</span><span class="c21">-I</span><span class=
"c2">&nbsp;- In the case of "perfect" geometrical systems, 100.0
percent of the energy from each spot diagram in the summation will
always lie within a spot of radius = 1.0X10-20 units or a slit of
semi-width = 1.0X10-20 units (units will either be linear system
units or angular radian units).</span></p>
<p class="c3"><span class="c1">SRED (N) ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SRED (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
The "SRED" and "SRED CENT" commands produce radial energy
distributions using the current summed spot diagram data stored in
the default summed spot diagram file, SPOTS.DAT. "CENT" specifies
that the distribution center or reference point will be the spot
centroid location. In the absence of "CENT", the vertex of the
current image surface is used as the distribution center.
"</span><span class="c9"></span><span class="c2">E" specifies the
percent energy increments to be displayed. The default for
"</span><span class="c9"></span><span class="c2">E" is 10.0
(percent). Maximum and minimum allowed values for
"</span><span class="c9"></span><span class="c2">E" are 100.0
(percent) and 1.0 (percent), respectively. "</span><span class=
"c9"></span><span class="c2">X" and "</span><span class=
"c9"></span><span class="c2">Y" are interpreted as linear offsets
(in lens units) in modes "FOCAL" and "AFOCAL" and angular offsets
(in radians) in modes "AFOCAL" and "UAFOCAL". "</span><span class=
"c9"></span><span class="c2">Z" is a defocus term which is only
applicable in the "FOCAL" and "UFOCAL" modes. If the qualifier
words "N" or "NCENT" are used, no output is generated.</span></p>
<p class="c12"><span class="c1">SRED ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SRED CACC , E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; - he
"SRED ACC" and "SRED CACC" commands produce no display. "SRED ACC"
returns to the X-register (accumulator), the radius of the circle
which encloses "E" percent energy. All the above comments
concerning "</span><span class="c9"></span><span class="c2">X" ,
"</span><span class="c9"></span><span class="c2">Y", and
"</span><span class="c9"></span><span class="c2">Z" apply in the
same way as for the "SRED" and "SRED CENT" commands. "SRED ACC"
centers the distribution at the image surface vertex; "SRED CACC"
centers it at the spot centroid location.</span></p>
<p class="c3"><span class="c1">SESEDX (N) ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SESEDX (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SESEDX ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SESEDX CACC , E ,</span>
<span class="c15"></span><span class="c1">Z</span><span class=
"c2">&nbsp;and</span></p>
<p class="c3"><span class="c1">SESEDY (N) ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class=
"c2">&nbsp;and</span></p>
<p class="c3"><span class="c1">SESEDY (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SESEDY ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SESEDY CACC , E ,</span>
<span class="c15"></span><span class="c1">Z</span><span class=
"c2">&nbsp; - The preceding eight commands act in exactly the same
manner as the four "SRED" commands, except that they produce one
dimensional, expanding slit edge energy distributions in either the
X or the Y-directions at the current image surface. Instead of spot
semi-diameters, slit semi-width dimensions are displayed or
returned to the X-register (accumulator) when using the "SESED",
"SESEDX" and "SESEDY" commands. If the qualifier words "N" or
"NCENT" are used, no output is generated.</span></p>
<p class="c3"><span class="c1">SESED &nbsp;(N),</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">SESED (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">SESED ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">SESED CACC , E ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; - The preceding four commands
act in exactly the same manner as the eight "SESEDX" and "SESEDY"
commands, except that instead of limiting themselves to the X and Y
directions, they can produce expanding slit edge energy
distributions at any orientation specified by "</span><span class=
"c9"></span><span class="c2">" (in degrees). "</span><span class=
"c9"></span><span class="c2">" = 0 degrees corresponds to "ESEDX"
and "</span><span class="c9"></span><span class="c2">" = 90.0
degrees corresponds to "SESEDY". Instead of spot semi-diameters,
slit semi-width dimensions are displayed or returned to the
X-register (accumulator) when using the "SESED", "SESEDX" and
"SESEDY" commands. All offset dimensions for radial and expanding
slit energy distributions are represented in the coordinate system
of the image surface. If the qualifier words "N" or "NCENT" are
used, no output is generated. After tabular data is generated with
the "SRED" or the "SESED" commands, it may be graphically displayed
using the "PLTRED" and "PLTESED" commands.</span></p>
<p class="c8"><span class="c10">AUTOMATED RED AND ESED
PLOTS</span><span class="c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLTRED , dflag ,
(x-extent)</span><span class="c2">&nbsp; - The "PLTRED" command
causes a plot of the current Radial Energy Distribution data to be
generated. If "dflag" is zero (the default), the plot is
automatically displayed on the screen. Afterward, the plot may be
printed using the "GRAOUT" command. If "dflag" is set to any
non-zero value, the automatic display is suppressed. The plot may
still be displayed with the "DRAW" command and printed with the
"GRAOUT" command. "PLTRED" applies to the most recently generated
RED data. If no RED data exists, a message to that effect is issued
and no plot is generated. (x-extent) optionally allows the user to
specify the number of lens units at the final surface which are
represented by the horizontal axis of the energy distribution plot.
RED data may be generated using one of the radial energy
distribution commands described in the CMD section (geometrical
based calculations) or the FOE section (diffraction based
calculations) of this manual.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8"><span class="c1">PLTESED , dflag ,
(x-extent)</span><span class="c2">&nbsp; - The "PLTESED" command
causes a plot of the current Expanding Slit Energy Distribution
data to be generated. If "dflag" is zero (the default), the plot is
automatically displayed on the screen. Afterward, the plot may be
printed using the "GRAOUT" command. If "dflag" is set to any
non-zero value, the automatic display is suppressed. The plot may
still be displayed with the "DRAW" command and printed with the
"GRAOUT" command. "PLTESED" applies to the most recently generated
ESED data. If no ESED data exists, a message to that effect is
issued and no plot is generated. (x-extent) optionally allows the
user to specify the number of lens units at the final surface which
are represented by the horizontal axis of the energy distribution
plot. ESED data may be generated using one of the expanding slit
energy distribution commands described in the CMD section
(geometrical based calculations) or the FOE section (diffraction
based calculations) of this manual. The following figure
illustrates expanding slit orientation as a function of
"</span><span class="c9"></span><span class="c2">":</span></p>
<p class="c12 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 1.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 337.53px; height: 406.80px;">
<img alt="" src="rt_images/image21.png" style=
"width: 337.53px; height: 406.80px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c11 c17"></p>
<p class="c11"><span class="c14 c2">Expanding Slit and Line Spread
Function Orientations</span></p>
<p class="c3"><span class="c10">SUMMED ENERGY
DISTRIBUTIONS-II</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- This command is only of use from inside macros. Unlike
the "SRED", "SESED", "SESEDX" and "SESEDY" commands, it can analyze
"summed and saved" spot diagrams which are stored in files which
have been given user specified names. The "REDSUM" &nbsp;command
uses "summed and saved" spot diagram data which was created by the
"SPDSAVE" and "SPDADD" commands. The file read is "filename.DAT. If
the file name is not explicitly entered, the file "SPOTS.DAT" will
be used.</span></p>
<p class="c3"><span class="c1">REDSUM (filename) ,
E</span><span class="c2">&nbsp; - The "REDSUM" command produces no
display but returns to the X-register (accumulator), the radius of
the circle which encloses "E" percent energy in the current "summed
and saved" spot diagram. No "</span><span class=
"c9"></span><span class="c2">X" , "</span><span class=
"c9"></span><span class="c2">Y", or "</span><span class=
"c9"></span><span class="c2">Z" apply in this command. "REDSUM"
centers the distribution at the spot centroid.</span><span class=
"c21">&nbsp;</span></p>
<p class="c12"><span class="c10">ENSQUARED ENERGY
DISTRIBUTIONS</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">REDSQ (N),</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">REDSQ (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
The "REDSQ" and "REDSQ CENT" commands produce ensquared rather than
encircled energy distributions using the current spot diagram data.
"CENT" specifies that the distribution center or reference point
will be the spot centroid location. In the absence of "CENT", the
chief ray location at the current image surface is used as the
distribution center. "</span><span class="c9"></span><span class=
"c2">E" specifies the percent energy increments to be displayed.
The default for "</span><span class="c9"></span><span class=
"c2">E" is 10.0 (percent). Maximum and minimum allowed values for
"</span><span class="c9"></span><span class="c2">E" are 100.0
(percent) and 1.0 (percent), respectively. "</span><span class=
"c9"></span><span class="c2">X" and "</span><span class=
"c9"></span><span class="c2">Y" are interpreted as linear offsets
(in lens units) in modes "FOCAL" and "AFOCAL" and angular offsets
(in radians) in modes "AFOCAL" and "UAFOCAL". "</span><span class=
"c9"></span><span class="c2">Z" is a defocus term which is only
applicable in the "FOCAL" and "UFOCAL" modes. If the qualifier
words "N" or "NCENT" are used, no output is generated.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">REDSQ ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">REDSQ CACC , E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
The "REDSQ ACC" and "REDSQ CACC" commands produce no display.
"REDSQ ACC" returns to the X-register (accumulator), the length of
the side of a square which encloses "E" percent energy. All the
above comments concerning "</span><span class=
"c9"></span><span class="c2">X" , "</span><span class=
"c9"></span><span class="c2">Y", and "</span><span class=
"c9"></span><span class="c2">Z" apply in the same way as for the
"REDSQ" and "REDSQ CENT" commands. "REDSQ ACC" centers the
distribution at the chief ray; "SQRED CACC" centers it at the spot
centroid location.</span><span class=
"c21">&nbsp;</span><span class="c2">After tabular data is generated
with the "REDSQ" command, it may be graphically displayed using the
"PLTRED" command described above.</span></p>
<p class="c12"><span class="c10">SUMMED ENERGY
DISTRIBUTIONS-III</span></p>
<p class="c3"><span class="c1">SREDSQ (N),</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SREDSQ (N)CENT ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
The "SREDSQ" and "SREDSQ CENT" commands produce ensquared
distributions using the current summed spot diagram data stored in
the default summed spot diagram file, SPOTS.DAT. "CENT" specifies
that the distribution center or reference point will be the spot
centroid location. In the absence of "CENT", the vertex of the
current image surface is used as the distribution center.
"</span><span class="c9"></span><span class="c2">E" specifies the
percent energy increments to be displayed. The default for
"</span><span class="c9"></span><span class="c2">E" is 10.0
(percent). Maximum and minimum allowed values for
"</span><span class="c9"></span><span class="c2">E" are 100.0
(percent) and 1.0 (percent), respectively. "</span><span class=
"c9"></span><span class="c2">X" and "</span><span class=
"c9"></span><span class="c2">Y" are interpreted as linear offsets
(in lens units) in modes "FOCAL" and "AFOCAL" and angular offsets
(in radians) in modes "AFOCAL" and "UAFOCAL". "</span><span class=
"c9"></span><span class="c2">Z" is a defocus term which is only
applicable in the "FOCAL" and "UFOCAL" modes. If the qualifier
words "N" or "NCENT" are used, no output is generated.</span></p>
<p class="c3"><span class="c1">SREDSQ ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp;
and</span></p>
<p class="c3"><span class="c1">SREDSQ CACC , E ,</span>
<span class="c15"></span><span class="c1">Z</span><span class=
"c2">&nbsp; - The "SREDSQ ACC" and "SREDSQ CACC" commands produce
no display. "SREDSQ ACC" returns to the X-register (accumulator),
the length of the side of the square which encloses "E" percent
energy. All the above comments concerning "</span><span class=
"c9"></span><span class="c2">X" , "</span><span class=
"c9"></span><span class="c2">Y", and "</span><span class=
"c9"></span><span class="c2">Z" apply in the same way as for the
"SREDSQ" and "SREDSQ CENT" commands. "SREDSQ ACC" centers the
distribution at the image surface vertex; "SREDSQ CACC" centers it
at the spot centroid location.</span><span class=
"c21">&nbsp;</span><span class="c2">After tabular data is generated
with the "SREDSQ" command, it may be graphically displayed using
the "PLTRED" command described above.</span></p>
<p class="c3"><span class="c10">SUMMED ENERGY
DISTRIBUTIONS-IV</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- This command is only of use from inside macros. Unlike
the "SREDSQ" command, it can analyze "summed and saved" spot
diagrams which are stored in files which have been given user
specified names. The "REDSUMSQ" command uses "summed and saved"
spot diagram data which was created by the "SPDSAVE" and "SPDADD"
commands. The file read is "filename.DAT. If the file name is not
explicitly entered, the file "SPOTS.DAT" will be used.</span></p>
<p class="c3"><span class="c1">REDSUMSQ (filename) ,
E</span><span class="c2">&nbsp; - The "REDSUMSQ" command produces
no display but returns to the X-register (accumulator), the
ensquaring side length which encloses "E" percent energy in the
current "summed and saved" spot diagram. No "</span><span class=
"c9"></span><span class="c2">X" , "</span><span class=
"c9"></span><span class="c2">Y", or "</span><span class=
"c9"></span><span class="c2">Z" apply in this command. "REDSUMSQ"
centers the distribution at the spot centroid.</span></p>
<p class="c3"><span class="c10">INVERSE
DISTRIBUTIONS</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- In all of the above energy distribution commands, the
qualifier words "ACC" and "CACC" were used to return to the
X-register, the size of the circle or square which encircled or
ensquared the percent energy specified in numeric word #1. If,
instead, the qualifier words "ACCX" and "CACCX" are used, then,
commands return to the X-register either the percent energy
encircled by the circle whose radius is specified in numeric word
#1 or the percent energy ensquared by the square whose side length
was specified in numeric word #1.</span></p>
<p class="c12"><span class="c10">GEOMETRICAL LINE SPREAD
FUNCTIONS</span></p>
<p class="c3"><span class="c1">LSF , N ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">LSF CENT , N ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">LSF ACC , pos ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y ,</span> <span class=
"c15"></span><span class="c1">Z,</span> <span class=
"c15"></span><span class="c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">LSF CACC , pos ,</span> <span class=
"c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; - These four "LSF" commands
act in a similar manner to the four preceding "ESED" commands,
except that they produce geometrical line spread functions based
upon the current geometrical spot diagram. They calculate image
intensity versus position across a line spread function. Peak
intensity is always normalized to 1.0. The line spread function
orientation is specified by "</span><span class=
"c9"></span><span class="c2">" (in degrees). "</span><span class=
"c9"></span><span class="c2">X" , "</span><span class=
"c9"></span><span class="c2">Y" and "</span><span class=
"c9"></span><span class="c2">Z" &nbsp;have the same meaning as in
the above "RED" and "ESED" commands. "N" specifies the number of
positions across the line spread function for which intensity
values will be displayed. The default value for "N" is 21. "pos"
specifies the position in the line spread function for which an
intensity value will be calculated. The maximum allowable value for
"N" is 100. The preceding figure illustrates line spread function
orientation as a function of</span> <span class=
"c9"></span><span class="c2">. Positions in the line spread
function are specified in current lens system units in the "FOCAL"
and "UFOCAL" modes and in radians in modes "AFOCAL" and "UAFOCAL".
"</span><span class="c9"></span><span class="c2">X" and
"</span><span class="c9"></span><span class="c2">Y" are
interpreted as linear offsets (in lens units) in modes "FOCAL" and
"AFOCAL" and angular offsets (in radians) in modes "AFOCAL" and
"UAFOCAL". "</span><span class="c9"></span><span class="c2">Z" is
a defocus term which is only applicable in the "FOCAL" and "UFOCAL"
modes. &nbsp;For geometrically "perfect" systems, the spread
function is always a delta function with height always equal to
1.0.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c1">OLSF , N</span><span class=
"c2">&nbsp; and</span></p>
<p class="c12"><span class="c1">OLSF CENT , N</span><span class=
"c2">&nbsp;and</span></p>
<p class="c12"><span class="c1">OLSF ACC , pos</span><span class=
"c2">&nbsp; and</span></p>
<p class="c3"><span class="c1">OLSF CACC , pos</span><span class=
"c2">&nbsp;- These four "OLSF" commands (meaning Old LSF) produce
displays based upon a pre-existing geometrical line spread function
calculated from spot diagram data via the preceding four "LSF"
commands. They interpolate and display image intensity versus
position across the existing line spread function. "N" specifies
the number of positions across the line spread function for which
intensity values will be displayed. The default value for "N" is
21. "pos" specifies the position in the line spread function for
which an intensity value will be displayed. If no line spread
function exists, a message to that effect is issued and no values
are displayed. The default value for "N" is always 21. The maximum
allowable value for "N" is 100. All offset dimensions for
geometrical line spread functions are represented in the coordinate
system of the image surface. The "RSPH" command, described later in
this section, &nbsp;is used to specify the center of the
geometrical line spread function. By default, the center of a
geometrical line spread function is at the intersection of the
chief ray with the image surface. After Line Spread Functions are
generated, they may be graphically displayed using the "PLTLSF"
command.</span></p>
<p class="c8"><span class="c10">AUTOMATED LSF
PLOTS</span><span class="c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLTLSF , (x-range) ,
dflag</span><span class="c2">&nbsp;- The "PLTLSF" command causes a
plot of the current geometrical Line Spread Function (LSF) data to
be generated. If "dflag" is zero (the default), the plot is
automatically displayed on the screen. Afterward, the plot may be
printed using the "GRAOUT" command. If "dflag" is set to any
non-zero value, the automatic display is suppressed. The plot may
still be displayed with the "DRAW" command and printed with the
"GRAOUT" command. "PLTLSF" applies to the most recently generated
LSF data, whether that data is generated using the "LSF" command or
the "OLSF" command. The optional input value "x-range" sets the
semi-extent of the X-axis scale. By default, the X or function
extent scale will be sized so as to include the entire spread
function. If no LSF data exists, a message to that effect is issued
and no plot is generated. LSF data may be generated using the "LSF"
command or the "OLSF" command which are described in the CMD
section of this manual.</span></p>
<p class="c12"><span class="c10">GEOMETRICAL OPTICAL TRANSFER
FUNCTION</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The commands described below generate various tabular
outputs of the Geometrical Optical Transfer Function (GOTF). This
transfer function is based only upon the residual geometrical
aberrations of the current lens system and does not consider any of
the effects of diffraction. It is best used for optical systems
whose peak-to-valley optical path differences exceed one or two
wavelengths at the reference wavelength. All "GOTF" commands use
the existing spot diagram. If no spot diagram exists, one must
first be calculated using the "SPD" command.</span></p>
<p class="c3"><span class="c1">GOTF , Fmax ,</span> <span class=
"c15"></span><span class="c1">F ,</span> <span class=
"c15"></span><span class="c1">&nbsp;,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
This version of the "GOTF" command generates an output of the GOTF
from spatial frequency 0.0 to spatial frequency
"Fmax</span><span class="c13">"</span> <span class="c2">in
frequency steps of "</span><span class="c9"></span><span class=
"c2">F". The default for "Fmax</span><span class="c13">"</span>
<span class="c2">is the diffraction limit "cutoff"
frequency,discussed in the FOE section of this manual. The smallest
allowable value of "</span><span class="c9"></span><span class=
"c2">F" is a value which produces 101 data points.
"</span><span class="c9"></span><span class="c2">" = 0.0 degrees
represents a vertical bar target (sinusoidal intensity variation in
the X-direction). "</span><span class="c9"></span><span class=
"c2">" = 90.0 degrees represents a horizontal bar target
(sinusoidal intensity variation in the Y-direction).
"</span><span class="c9"></span><span class="c2">" is measured in
a positive sense from the positive X-axis toward the positive
Y-axis in the local coordinate system of the image surface.
"</span><span class="c9"></span><span class="c2">Z" represents a
focus shift (in lens units) to be applied before the calculation is
performed and is applicable only for modes "FOCAL" and "UFOCAL".
"</span><span class="c9"></span><span class="c2">" = 0.0 degrees
represents vertical bar targets (sinusoidal intensity variation in
the X-direction). "</span><span class="c9"></span><span class=
"c2">" = 90.0 degrees represents horizontal bar targets (sinusoidal
intensity variation in the Y-direction). In the absence of an
explicit entry for "</span><span class="c9"></span><span class=
"c2">", GOTF values will be calculated for both
"</span><span class="c9"></span><span class="c2">" = 0.0 and
"</span><span class="c9"></span><span class="c2">" = 90.0 degrees.
&nbsp;The default value for "</span><span class=
"c9"></span><span class="c2">F" is "F</span><span class=
"c13">max</span> <span class="c2">"/ 10.0. The default value for
"</span><span class="c9"></span><span class="c2">Z" is 0.0. After
GOTF data has been generated with this command, the data may be
plotted using the "PLTGOTF" command.</span></p>
<p class="c3"><span class="c10">GOTF IN OBJECT
SPACE</span><span class="c2">&nbsp;- All GOTF calculations are
performed in the frequency domain of "image space". In the AFOCAL
or UAFOCAL mode, the frequency units are "lp/mrad". In FOCAL or
UFOCAL modes the frequency units are "lp/mm". Many times it proves
convernient to express the MTF in the frequency domain of "object
space" The following two commands provide the user with a way of
telling the program that the tabular MTF listings and the graphical
MTF plots of MTF versus frequency are to be displayed in the
frequency domain of "object space".</span></p>
<p class="c3"><span class="c1">SPACE (O or I)</span><span class=
"c2">&nbsp; - The "SPACE" command instructs the program as to the
spatial domain in which the tabular and graphical GOTF is to be
represented. The default is "I" for image space. This command does
not change the way the GOTF values are computed but it does change
the spatial frequency units used in the tabular and graphical
displays. ". Issuing this command with the "?" returns the current
setting</span></p>
<p class="c3"><span class="c1">NEAR or FAR</span><span class=
"c2">&nbsp;- The "NEAR" and "FAR" commands are used to specify the
units for optical transfer function display when space is set to
"O". "NEAR" sets units to "lp/mm" whereas "FAR" specifies
"lp/mrad". Issuing this command with the "?" returns the current
setting. The program default setting is "FAR"</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">THRU-FOCUS/FREQ GOTF</span></p>
<p class="c3"><span class="c1">GOTF TFOCUS , F ,
Zmin</span><span class="c19">&nbsp;</span><span class="c1">,
Zmax</span><span class="c19">&nbsp;</span><span class="c1">,</span>
<span class="c15"></span><span class="c1">Z ,</span> <span class=
"c15"></span><span class="c2">&nbsp; - The "GOTF TFOCUS" command
generates an output of the through-focus GOTF at spatial frequency
"F" in steps of "</span><span class="c9"></span><span class=
"c2">Z" about the current image position. "</span><span class=
"c9"></span><span class="c2">" = 0.0 degrees represents a vertical
bar target (sinusoidal intensity variation in the X-direction).
"</span><span class="c9"></span><span class="c2">" = 90.0 degrees
represents a horizontal bar target (sinusoidal intensity variation
in the Y-direction). "</span><span class="c9"></span><span class=
"c2">" is measured in a positive sense from the positive X-axis
toward the positive Y-axis in the local coordinate system of the
image surface. "</span><span class="c9"></span><span class="c2">Z"
is the focus shift step size (in lens units). "GOTF TFOCUS" is
applicable only for modes "FOCAL" and "UFOCAL". The default value
for &nbsp;"</span><span class="c9"></span><span class="c2">" is
0.0 degrees representing &nbsp;vertical bar targets (sinusoidal
intensity variation in the X-direction). The default value for
"</span><span class="c9"></span><span class="c2">Z" is ("Zmax" -
"Zmin") / 10.0.</span></p>
<p class="c3"><span class="c1">GOTF TFREQ ,</span> <span class=
"c15"></span><span class="c1">Z , Fmin</span><span class=
"c19">&nbsp;</span><span class="c1">, Fmax</span><span class=
"c19">&nbsp;</span><span class="c1">,</span> <span class=
"c15"></span><span class="c1">F ,</span> <span class=
"c15"></span><span class="c2">&nbsp; - The "GOTF TFREQ" command
generates an output of the through-frequency GOTF from frequency
"Fmin</span><span class="c13">"</span> <span class="c2">to
frequency "Fmax</span><span class="c13">"</span><span class=
"c2">&nbsp;in frequency steps "</span><span class=
"c9"></span><span class="c2">F" and at focus offset
"</span><span class="c9"></span><span class="c2">Z" about the
current image position. "</span><span class=
"c9"></span><span class="c2">" = 0.0 degrees represents a vertical
bar target (sinusoidal intensity variation in the X-direction).
"</span><span class="c9"></span><span class="c2">" = 90.0 degrees
represents a horizontal bar target (sinusoidal intensity variation
in the Y-direction). "</span><span class="c9"></span><span class=
"c2">" is measured in a positive sense from the positive X-axis
toward the positive Y-axis in the local coordinate system of the
image surface. "</span><span class="c9"></span><span class="c2">Z"
is only used for modes "FOCAL" and "UFOCAL". The default value for
"</span><span class="c9"></span><span class="c2">" is 0.0 degrees
representing &nbsp;vertical bar targets (sinusoidal intensity
variation in the X-direction). The default value for
"</span><span class="c9"></span><span class="c2">F" is ("Fmax" -
"Fmin") / 10.0. The default value for "</span><span class=
"c9"></span><span class="c2">Z" is 0.0.</span></p>
<p class="c3"><span class="c1">GOTF ACC , F</span><span class=
"c19">&nbsp;</span><span class="c1">,</span> <span class=
"c15"></span><span class="c1">&nbsp;,</span> <span class=
"c15"></span><span class="c1">Z</span><span class="c2">&nbsp; -
The "GOTF ACC" command causes the GOTF modulus, calculated at
frequency "F", orientation</span> <span class=
"c9"></span><span class="c2">&nbsp;and focus offset
"</span><span class="c9"></span><span class="c2">Z", to be placed
into the accumulator or X-register. The GOTF phase is calculated
and placed into the Y-register. The original content of the
X-register is placed in the LASTX-register. The command produces no
output. "</span><span class="c9"></span><span class="c2">Z" is
only used for modes "FOCAL" and "UFOCAL". Among other uses, this
command makes the modulus and phase of the GOTF available as an
optimization operand. The default value for
&nbsp;"</span><span class="c9"></span><span class="c2">" is 0.0
degrees representing vertical bar targets (sinusoidal intensity
variation in the X-direction). The default value for
"</span><span class="c9"></span><span class="c2">Z" is 0.0.
Spatial frequency is always in units of line pairs per millimeter
(lp/mm) for modes "FOCAL" and "UFOCAL" and in units of line pairs
per milli-radian (lp/mr) for modes "AFOCAL" and "UAFOCAL". All
offsets and image orientations for geometrical optical transfer
functions are represented in the coordinate system of the image
surface.</span></p>
<p class="c12"><span class="c10">MULTIPLE FOV
GOTF</span><span class="c2">&nbsp;- If multiple field of view
definitions are included in the lens database (using the "FLDS"
command) and if the command which immediately precedes the "GOTF"
command is not an "FOB" command and if "GOTF" is issued without
qualifier or numeric input, then GOTF values will be computed for
each of the defined multiple field of view positions. These values
will be stored so that they may be plotted with the next "PLTGOTF"
commands.</span></p>
<p class="c8"><span class="c10">GOTF PLOTS</span><span class=
"c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLTGOTF (LEICA) , dflag</span></p>
<p class="c8"><span class="c6 c24">CASE: No qualifier
word</span></p>
<p class="c8"><span class="c2">In this case the "PLTGOTF" command
causes a plot of the modulus of the existing Geometrical Optical
Transfer Fuction data versus spatial frequency to be generated from
0 If "dflag" is zero (the default), the plot is automatically
displayed on the screen. Afterward, the plot may be printed using
the "GRAOUT" command. If "dflag" is set to any non-zero value, the
automatic display is suppressed. The plot may still be displayed
with the "DRAW" command and printed with the "GRAOUT" command.
"PLTGOTF" applies to the most recently generated GOTF. If no GOTF
data exists, a message to that effect is issued and no plot is
generated. There is no "max freq" input for PLTGOTF as the maximum
frequency in under the control of the "GOTF" command itself. If
GOTF data exists for both vertical and horizontal target
orientations, they both will be included on one plot. If multiple
field of view "GOTF" data exists, it will be plotted on a multiple
field of view type of GOTF display. Each curve will be labeled as
to field of view position and target orientation.</span></p>
<p class="c8"><span class="c6 c24">CASE: Qualifier word = "LEICA"
(There must exist GOTF data for at least 5 multiple field of view
positions)</span></p>
<p class="c8"><span class="c2">In this case the "PLTGOTF" command
causes a plot of the modulus of the existing Geometrical Optical
Transfer Fuction data versus field of view to be generated. If
"dflag" is zero (the default), the plot is automatically displayed
on the screen. Afterward, the plot may be printed using the
"GRAOUT" command. If "dflag" is set to any non-zero value, the
automatic display is suppressed. The plot may still be displayed
with the "DRAW" command and printed with the "GRAOUT" command.
"PLTGOTF" applies to the most recently generated GOTF. If no GOTF
data exists, a message to that effect is issued and no plot is
generated. This command plots both target bar orientations of the
first 10, non-zero frequency MTFs generated using the previous
"GOTF" command. GOTF data is generated using the "GOTF" command
described in the CMD section of this manual.</span></p>
<p class="c12"><span class="c1">GEOLEICA (ON or YES or OFF or NO) ,
freq#</span><span class="c2">&nbsp; - The GEOLEICA command is used
to shut off any of the GOTF vs FOV plots in a "PLTGOTF LEICA" type
of plot. The "freq#" can be 1 through 10. Once frequency numbers
are turned "off" they stay "off" until they are "tuned on" of until
the program ends. Entered with a "?", the status for all 10
frequencies will be displayed.</span></p>
<p class="c12"><span class="c10">SURFACE SAG
COMMANDS</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The commands described below generate a printout of
surface sag and surface normal direction cosine data. Sag data
consists of Z-coordinates of points on a surface for specified X
and Y-coordinates as well as the surface normal L, M and N
direction cosines. N is positive if it points in the local
coordinate system +Z direction.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">SAG X , i , Xmin , Xmax ,</span>
<span class="c15"></span><span class="c1">x ,</span> <span class=
"c15"></span><span class="c1">y</span><span class="c2">&nbsp;- The
"SAG X" command generates surface sag and surface normal data for a
line extending in the X direction of surface number "i". Sags are
computed in intervals of</span> <span class=
"c9"></span><span class="c2">x. The Y-coordinate is defined by "Y"
=</span> <span class="c9"></span><span class="c13">y.</span>
<span class="c2">"X" ranges from Xmin to Xmax</span></p>
<p class="c3"><span class="c1">SAG Y , i , Ymin , Ymax ,</span>
<span class="c15"></span><span class="c1">y,</span> <span class=
"c15"></span><span class="c1">x</span><span class="c2">&nbsp;- The
"SAG Y" command generates surface sag and surface normal data for a
line extending in the Y direction of surface number "i". Sags are
computed in intervals of</span> <span class=
"c9"></span><span class="c2">y. The X-coordinate is defined by "X"
=</span> <span class="c9"></span><span class="c13">x.</span>
<span class="c2">"Y" ranges from Ymin to Ymax.</span></p>
<p class="c3"><span class="c1">SAG (PT or PTACC) , i , X ,
Y</span><span class="c2">&nbsp; - The "SAG PT" command generates
sag and surface normal data for the point "X" and "Y" on surface
"i". The resultant sag value is stored in the accumulator
("X"-register). The X and Y input values are placed in the "IX" and
"IY" registers. The L, M and N direction cosines of the surface
normal are placed in the "Y", "Z" and "T" registers. If "PT" is
issued, the values will be displayed. If "PTACC" is issued, no
values are displayed.</span></p>
<p class="c3"><span class="c1">SAG FILE , i , N , code ,,
prflag</span><span class="c2">&nbsp;</span><span class="c5">&nbsp;-
The "SAG FILE" command generates sag data over an "N" by "N" square
grid on surface "i" and then saves that data to the ASCII file
SAG.DAT. &nbsp;The data saved consists of the "x" and "y"
coordinates of each grid point and the associated surface sag value
at that grid point. The grid is processed from left to right and
bottom to top starting at the most negative "x" and "y" point on
the grid. The default value for "N" is 25. The grid is spread over
the greatest extent of the clear aperture on surface "i". If no
explicit clear aperture is assigned, then the grid is spread over a
temporarily assigned clear aperture equal to the sum of the
absolute values of PY and PCY or PX and PCX paraxial ray values at
that surface (which ever is the larger sum). "SAG FILE" does not
output the surface L, M and N surface normal direction cosines. The
"code" value is interpreted via the following table. The SAG.DAT
file may be plotted using the "PLOT SAGFILE" command. If "prflag"
is omitted, statistics are displayed, else they are
suppressed.</span></p>
<a id="t.024c90e559c91bc51c0640101cde3785e40ff32b"></a><a id=
"t.5"></a>
<table class="c39">
<tbody>
<tr class="c29">
<td class="c49" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">code</span></p>
</td>
<td class="c37" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">action</span></p>
</td>
</tr>
<tr class="c29">
<td class="c49" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">0 (default)</span></p>
</td>
<td class="c37" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">SAG due to all surface
parameters.</span></p>
</td>
</tr>
<tr class="c29">
<td class="c49" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">1</span></p>
</td>
<td class="c37" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">SAG leaving out special surface
definitions.</span></p>
</td>
</tr>
<tr class="c29">
<td class="c49" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">2</span></p>
</td>
<td class="c37" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">SAG leaving out all radius,
toric radius, conics and aspheric definitions but using any
existing special surface definitions.</span></p>
</td>
</tr>
</tbody>
</table>
<p class="c3 c17"></p>
<p class="c3"><span class="c14 c2">In all "SAG" commands, X and Y
coordinates are expressed in lens units. The "SAG" commands
properly recognize all contributions to surface shape, including
all special surface types.</span></p>
<p class="c8"><span class="c10">SAGFILE PLOTTING</span><span class=
"c21">&nbsp;</span></p>
<p class="c3"><span class="c1">PLOT SAGFILE ,
drflag</span><span class="c2">&nbsp;- The "PLOT SAGFILE" command
causes a 3-D plot of the current SAG.DAT file, if one exists, to be
displayed.The SAG.DAT file is generated by the "SAG FILE" command
as described in the CMD section of this manual The horizontal axes
represent the surface clear aperture. If "drflag" is left blank,
the plot will be displayed to the screen. Otherwise it will not be
displayed.</span></p>
<p class="c3"><span class="c1">SAGFLROT ("YES" or "ON" or "NO" or
"OFF")</span><span class="c2">&nbsp; - The "SAGFLROT" command is
used to specify whether or not the current SAG.DAT file is to be
plotted with a 90 degree rotation or not. This helps see "hidden"
features. Issued with the interrogator "?", "SAGFLROT" causes the
current SAG.DAT file rotation status to be displayed. If the status
is "YES" or "ON", then each time a SAG.DAT file is generated, it
will be plotted with a 90 degree rotation</span></p>
<p class="c3"><span class="c10">BEST FIT SPHERE</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- Best fit sphere
calculations are useful when it is desired to determine the closest
sphere to some non-spherical surface such that the sphere can first
generated. This sphere will such that a minimum amount of material
will need to be removed from it to form the desired non-spherical
shape. The "best fit sphere" calculation is not supported by
dedicated commands but instead a procedure using existing program
commands is used to compute this value. This procedure is outlined
in the following example. In this example, a rotationally symmetric
concave, aspheric mirror will be the surface for which the best fit
sphere is determined. Since this non-spherical surface is
rotationally symmetric, only rays in the YZ-plane are needed. If
the aspheric was not rotationally symmetric, more rays in the YZ
and XZ-planes would be needed. Since the aspheric is a concave
mirror, the GTE command is used in setting up the optimization. The
use of GTE or LTE will need to be determined by the user depending
on whether the best fit sphere will need to have a radius of
curvature greater than or less than the non-spherical
surface.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c6 c24">EXAMPLE:</span></p>
<p class="c3"><span class="c2">It is desired to determine the best
fit sphere to a concave, aspheric mirror. The mirror will be 10 cm
in diameter. It will have a base radius of curvature of 35 cm, a
conic constant of -0.085 and a 6th order aspheric coefficient of
+0.123348x10</span><span class="c2 c18">-9</span><span class=
"c2">.</span></p>
<p class="c3"><span class="c14 c2">STEP 1 Set up a new lens file by
issuing the following commands:</span></p>
<p class="c3"><span class="c24 c21 c23">LENS</span></p>
<p class="c3"><span class="c24 c21 c23">UNITS CM</span></p>
<p class="c3"><span class="c24 c21 c23">SAY , 5</span></p>
<p class="c3"><span class="c24 c21 c23">TH 1D20</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">RD , -35</span></p>
<p class="c3"><span class="c24 c21 c23">CC , -0.85</span></p>
<p class="c3"><span class="c24 c21 c23">AE , 0.123348E-9</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">EOS</span></p>
<p class="c3"><span class="c24 c21 c23">MODE AFOCAL</span></p>
<p class="c3"><span class="c14 c2">STEP 2. &nbsp;Make sure that
field #1 and rays #1 to #11 are defined to represent sampling the
aperture at 0.1 fractional aperture heights from an on-axis object
position by issuing the following commands:</span></p>
<p class="c3"><span class="c24 c21 c23">F1 , 0 0 0</span></p>
<p class="c3"><span class="c24 c21 c23">R1 , 0</span></p>
<p class="c3"><span class="c24 c21 c23">R2 , .1</span></p>
<p class="c3"><span class="c24 c21 c23">R3 , .2</span></p>
<p class="c3"><span class="c24 c21 c23">R4 , .3</span></p>
<p class="c3"><span class="c24 c21 c23">R5 , .4</span></p>
<p class="c3"><span class="c24 c21 c23">R6 , .5</span></p>
<p class="c3"><span class="c24 c21 c23">R7 , .6</span></p>
<p class="c3"><span class="c24 c21 c23">R8 , .7</span></p>
<p class="c3"><span class="c24 c21 c23">R9 , .8</span></p>
<p class="c3"><span class="c24 c21 c23">R10 , .9</span></p>
<p class="c3"><span class="c24 c21 c23">R11 , 1.0</span></p>
<p class="c3"><span class="c14 c2">STEP 3. Set up the optimization
definitions using as operands, the optical path length along each
ray from surface 2 to 3. Set the variable to be the curvature of
surface #2.</span></p>
<p class="c3"><span class="c24 c21 c23">MERIT</span></p>
<p class="c3"><span class="c24 c21 c23">GTE</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 1</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 2</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 3</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 4</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 5</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 6</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 7</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 8</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 9</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 10</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 11</span></p>
<p class="c3"><span class="c24 c21 c23">COR</span></p>
<p class="c3"><span class="c24 c21 c23">CV 0 .0000001 2</span></p>
<p class="c3"><span class="c24 c21 c23">EOS</span></p>
<p class="c3"><span class="c2">The CV operand on surface 2 with the
very small weight keeps the sphere from taking on too much power.
Make the weight small enough that none of the other operands go
negative.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c24 c21 c23">VARI</span></p>
<p class="c3"><span class="c24 c21 c23">CV 2</span></p>
<p class="c3"><span class="c24 c21 c23">EOS</span></p>
<p class="c3"><span class="c14 c2">STEP 4. Optimize surface 2
curvature using the following commands:</span></p>
<p class="c3"><span class="c24 c21 c23">IT</span></p>
<p class="c3"><span class="c24 c21 c23">PFIND 20</span></p>
<p class="c3"><span class="c24 c21 c23">IT 5</span></p>
<p class="c3"><span class="c24 c21 c23">ROBB</span></p>
<p class="c3"><span class="c24 c21 c23">PFIND 20</span></p>
<p class="c3"><span class="c24 c21 c23">IT 5</span></p>
<p class="c3"><span class="c24 c21 c23">ROBB</span></p>
<p class="c3"><span class="c14 c2">STEP 5. Get the radius of
curvature of surface 2 using the following command:</span></p>
<p class="c3"><span class="c24 c21 c23">SHO RD 2</span></p>
<p class="c3"><span class="c14 c2">(the value will be [to three
decimal places] -35.119)</span></p>
<p class="c3"><span class="c14 c2">Using the OPRD command, the OPLs
differences between the best fit sphere and the non-spherical
surface may be listed. The maximum of these values will be the
maximum departure from the best fit sphere in lens units. If a more
accurate computation is requires, the number of operands and rays
may be increased and the optimization re-run.</span></p>
<p class="c3"><span class="c10">BEST OPTICAL
SURFACE</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- Best optical surface calculations are useful when it
is desired to determine the closest sphere, conic or aspheric
surface to some set of SAG values. The "best optical surface"
calculation is not supported by dedicated commands but instead a
procedure using existing program commands is used to compute these
values. This procedure is outlined in the following example. In
this example, the sag data at 10 radial points from the axis to the
edge of a lens are known. Since this non-spherical surface is
rotationally symmetric, only rays in the YZ-plane are needed. If
the aspheric was not rotationally symmetric, more rays in the YZ
and XZ-planes would be needed. Since the aspheric is a concave
mirror, the GTE command is used in setting up the optimization. The
use of GTE or LTE will need to be determined by the user depending
on whether the best fit sphere will need to have a radius of
curvature greater than or less than the non-spherical
surface.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c6 c24">EXAMPLE:</span></p>
<p class="c3"><span class="c2">It is desired to determine the best
fit sphere to a concave, aspheric mirror. The mirror will be 10 cm
in diameter. It will have a base radius of curvature of 35 cm, a
conic constant of -0.085 and a 6th order aspheric coefficient of
+0.123348x10</span><span class="c2 c18">-9</span><span class=
"c2">.</span></p>
<p class="c3"><span class="c14 c2">STEP 1 Set up a new lens file by
issuing the following commands:</span></p>
<p class="c3"><span class="c24 c21 c23">LENS</span></p>
<p class="c3"><span class="c24 c21 c23">UNITS CM</span></p>
<p class="c3"><span class="c24 c21 c23">SAY , 5</span></p>
<p class="c3"><span class="c24 c21 c23">TH 1D20</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">RD , -35</span></p>
<p class="c3"><span class="c24 c21 c23">CC , -0.85</span></p>
<p class="c3"><span class="c24 c21 c23">AE , 0.123348E-9</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">AIR</span></p>
<p class="c3"><span class="c24 c21 c23">EOS</span></p>
<p class="c3"><span class="c24 c21 c23">MODE AFOCAL</span></p>
<p class="c3"><span class="c14 c2">STEP 2. &nbsp;Make sure that
field #1 and rays #1 to #11 are defined to represent sampling the
aperture at 0.1 fractional aperture heights from an on-axis object
position by issuing the following commands:</span></p>
<p class="c3"><span class="c24 c21 c23">F1 , 0 0 0</span></p>
<p class="c3"><span class="c24 c21 c23">R1 , 0</span></p>
<p class="c3"><span class="c24 c21 c23">R2 , .1</span></p>
<p class="c3"><span class="c24 c21 c23">R3 , .2</span></p>
<p class="c3"><span class="c24 c21 c23">R4 , .3</span></p>
<p class="c3"><span class="c24 c21 c23">R5 , .4</span></p>
<p class="c3"><span class="c24 c21 c23">R6 , .5</span></p>
<p class="c3"><span class="c24 c21 c23">R7 , .6</span></p>
<p class="c3"><span class="c24 c21 c23">R8 , .7</span></p>
<p class="c3"><span class="c24 c21 c23">R9 , .8</span></p>
<p class="c3"><span class="c24 c21 c23">R10 , .9</span></p>
<p class="c3"><span class="c24 c21 c23">R11 , 1.0</span></p>
<p class="c3"><span class="c14 c2">STEP 3. Set up the optimization
definitions using as operands, the optical path length along each
ray from surface 2 to 3. Set the variable to be the curvature of
surface #2.</span></p>
<p class="c3"><span class="c24 c21 c23">MERIT</span></p>
<p class="c3"><span class="c24 c21 c23">GTE</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 1</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 2</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 3</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 4</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 5</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 6</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 7</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 8</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 9</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 10</span></p>
<p class="c3"><span class="c24 c21 c23">OPL 0 1 3 1 11</span></p>
<p class="c3"><span class="c24 c21 c23">COR</span></p>
<p class="c3"><span class="c24 c21 c23">CV 0 .0000001 2</span></p>
<p class="c3"><span class="c24 c21 c23">EOS</span></p>
<p class="c3"><span class="c2">The CV operand on surface 2 with the
very small weight keeps the sphere from taking on too much power.
Make the weight small enough that none of the other operands go
negative.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c24 c21 c23">VARI</span></p>
<p class="c3"><span class="c24 c21 c23">CV 2</span></p>
<p class="c3"><span class="c24 c21 c23">EOS</span></p>
<p class="c3"><span class="c14 c2">STEP 4. Optimize surface 2
curvature using the following commands:</span></p>
<p class="c3"><span class="c24 c21 c23">IT</span></p>
<p class="c3"><span class="c24 c21 c23">PFIND 20</span></p>
<p class="c3"><span class="c24 c21 c23">IT 5</span></p>
<p class="c3"><span class="c21 c23 c24">ROBB</span></p>
<p class="c3"><span class="c24 c21 c23">PFIND 20</span></p>
<p class="c3"><span class="c24 c21 c23">IT 5</span></p>
<p class="c3"><span class="c24 c21 c23">ROBB</span></p>
<p class="c3"><span class="c14 c2">STEP 5. Get the radius of
curvature of surface 2 using the following command:</span></p>
<p class="c3"><span class="c24 c21 c23">SHO RD 2</span></p>
<p class="c3"><span class="c14 c2">(the value will be [to three
decimal places] -35.119)</span></p>
<p class="c3"><span class="c14 c2">Using the OPRD command, the OPLs
differences between the best fit sphere and the non-spherical
surface may be listed. The maximum of these values will be the
maximum departure from the best fit sphere in lens units. If a more
accurate computation is requires, the number of operands and rays
may be increased and the optimization re-run.</span></p>
<p class="c3 c17"></p>
<p class="c12"><span class="c10">LIMIT RAY
CALCULATIONS</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c2">The "LIMRAYS" command generates a
tabular printout of limit ray data for the current lens at the
current control wavelength and current active
configuration.</span></p>
<p class="c3"><span class="c1">LIMRAYS ( PARAX or REAL or VREAL) ,
(n)</span><span class="c2">&nbsp; - For optical systems for which
real rays cannot yet be traced, the qualifier word "PARAX" is
provided. Using the "PARAX" qualifier word causes the limiting ray
heights at each surface to be calculated as the sum of the absolute
values of the marginal and chief paraxial ray heights at each
surface. All clear apertures, surface tilts and surface
decentrations are ignored. This version of the "LIMRAYS" command is
useful during very early stages of design.</span><span class=
"c21">&nbsp;</span><span class="c2">Issuing the "LIMRAYS" command
with no qualifier word or with the qualifier word "REAL" causes
limit ray heights to be calculated using a set of unvignetted real
rays. This set of rays consists of eight marginal rays traced
around the periphery of the current reference surface from each of
nine field of view positions traced from around the periphery of
the current object surface. If there are no clear apertures
assigned to the object and reference surfaces, then circular or
elliptical clear apertures are assumed and they are sized by the
current values of the SCY, SCX, SAY and SAX values respectively. If
the clear apertures assigned to these surfaces are rectangular or
racetrack in shape, then four of the marginal rays are positioned
at the top, bottom, left and right sides of the clear apertures
while the other four rays are positioned at the extremes of the
"corners" of these clear apertures. If any of these 72 rays cannot
be traced due to ray failures, excluding clear aperture of
obscuration blocking, then a warning message is issued as part of
the output. All clear aperture decentrations and tilts are
considered during these calculations. Issuing the "LIMRAYS" command
with the "VREAL" qualifier word causes limit ray heights to be
calculated using a set of eight vignetted real marginal rays traced
from the same nine field of view positions as described in the
preceding paragraph. The vignetting factors for these rays are
calculated automatically at each of the nine field of view
positions. The "finesse" of the vignetting calculations is set with
the "n" value. By default, "n" = 25 meaning that 50 rays are traced
across both the X and Y-directions at the reference surface in
order to determine the vignetting factors. "n" may be set as low as
10 or as high as 100. All clear aperture decentrations and tilts
are also considered during these calculations. Tabular output when
using the "PARAX" qualifier word consists of a table listing
surface #, and maximum X and Y -coordinates of the limiting rays.
Tabular output when using the "REAL" or "VREAL" qualifier words or
when no qualifier is used consists of two tables. The first table
lists surface #, and the minimum and maximum X and Y -coordinates
of the limiting rays in the local coordinate system of each
surface. The second table lists surface #, maximum radial dimension
and suggested center position of the limit ray pattern in the local
coordinate system of each surface. Vignetting factors are</span>
<span class="c21">ONLY</span><span class="c2">&nbsp;computed in the
local XZ and YZ-planes of the reference surface. The "LIMRAYS"
command is useful in setting the minimum part sizes for most
optical systems being designed. In systems where there are many
complex folds, it would be wise to verify the limit ray
calculations by plotting beam footprints. Multi-configuration
systems should always have their part sizes determined using the
beam footprint plotting option.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">BLKRAYS, (n)</span><span class=
"c2">&nbsp; - The "BLKRAYS" command causes FOUR fans of rays to be
traced through the current system in the current alternate
configuration and at the control wavelength. An X-FAN, a Y-FAN, a
P-FAN and an N-FAN. The tabular output displays the ray heights in
the reference surface and whether the rays clear the system or are
blocked by clear apertures, obscurations or other ray failure
mechanisms. The surface number at which the ray fails is also
shown. The fans are traced at the field of view position defined by
the last "FOB" command. "n" designates the finesse of the fan. The
default for n is 25. The lowest value allowed is 10, the highest is
100.</span></p>
<p class="c3"><span class="c10">AUTOMATIC CLEAR
APERTURES</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The "SETCLAP" command &nbsp;works exactly the same as
the "LIMRAYS" command except that instead of generating tabular
output, it uses limit ray data to assign clear aperture data to
surfaces. If a clear aperture is already assigned to a surface, the
dimensions of the clear aperture and the clear aperture offsets are
adjusted. If no clear aperture is assigned to a surface, a circular
aperture will be assigned if the surface is not a "dummy" surface.
This exclusion of "dummy" surfaces does not occur; however, if both
starting and ending surfaces, "i" and "j", are explicitly input by
the user. "SETCLAP" does not modify alternate configuration data.
It only operates upon the current configuration. In order to set
clear apertures for multi-configuration systems, run "SETCLAP" for
each configuration, note the assigned clear aperture values and
then issue the appropriate CONFIGS or UPDATE CONFIGS
commands.</span></p>
<p class="c3"><span class="c1">SETCLAP ( PARAX or REAL or VREAL) ,
i , j , (n)</span><span class="c2">&nbsp; - "i" and "j" specify the
starting and ending surface numbers to which "SETCLAP" will apply.
Defaults for "i" and "j" are surfaces 0 and the image surface. For
optical systems for which real rays cannot yet be traced, the
qualifier word "PARAX" is provided. Using the "PARAX" qualifier
word causes the clear aperture values at each surface to be
calculated as the sum of the absolute values of the marginal and
chief paraxial ray heights at each surface. All clear apertures,
surface tilts and surface decentrations are ignored when "PARAX" is
used. This version of the "SETCLAP" command is useful during very
early stages of design.</span><span class=
"c21">&nbsp;</span><span class="c2">Issuing the "SETCLAP" command
with no qualifier word or with the qualifier word "REAL" clear
aperture values to be calculated using a set of unvignetted real
rays. This set of rays consists of eight marginal rays traced
around the periphery of the current reference surface from each of
nine field of view positions traced from around the periphery of
the current object surface. If there are no clear apertures
assigned to the object and reference surfaces, then circular or
elliptical clear apertures are assumed and they are sized by the
current values of the SCY, SCX, SAY and SAX values respectively. If
the clear apertures assigned to these surfaces are rectangular or
racetrack in shape, then four of the marginal rays are positioned
at the top, bottom, left and right sides of the clear apertures
while the other four rays are positioned at the extremes of the
"corners" of these clear apertures. If any of these 72 rays cannot
be traced due to ray failures, excluding clear aperture of
obscuration blocking, then a warning message is issued and no clear
apertures are assigned. All existing clear aperture decentrations
and tilts are considered during these calculations. Issuing the
"SETCLAP" command with the "VREAL" qualifier word causes clear
aperture values to be calculated using a set of eight vignetted
real marginal rays traced from the same nine field of view
positions as described in the preceding paragraph. The vignetting
factors for these rays are calculated automatically at each of the
nine field of view positions. The "finesse" of the vignetting
calculations is set with the "n" value. By default, "n" = 25
meaning that 50 rays are traced across both the X and Y-directions
at the reference surface in order to determine the vignetting
factors. "n" may be set as low as 10 or as high as 100. All
existing clear aperture decentrations and tilts are also considered
during these calculations. Vignetting factors are</span>
<span class="c21">ONLY</span><span class="c2">&nbsp;computed in the
local XZ and YZ-planes of the reference surface. If the program
determines that clear aperture decentrations should be assigned,
they will be assigned if they are &nbsp;greater than or equal to
1.0x10</span><span class="c2 c18">-6</span><span class=
"c2">&nbsp;lens units. The "SETCLAP" command is useful in setting
clear aperture values for most optical systems being designed. In
systems where there are many complex folds, it would be wise to
verify the clear aperture values by plotting beam footprints with
commands. Multi-configuration systems should always have their
clear aperture values determined using the beam footprint plotting
option.</span></p>
<p class="c3"><span class="c10">DISTORTION</span> <span class=
"c2">&nbsp;- Distortion is defined to be "Ftan</span><span class=
"c9"></span><span class="c2">&nbsp;distortion. For modes "FOCAL"
and "UFOCAL", distortion is therefore defined by the following
equation:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 10.67px; height: 20.00px;">
<img alt="" src="rt_images/image6.png" style=
"width: 10.66px; height: 20.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 305.33px; height: 44.00px;"><img alt=""
src="rt_images/image23.png" style=
"width: 305.31px; height: 43.98px; margin-left: 0.01px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c14 c2">The "HT"s are ray heights at the
final surface. For modes "AFOCAL" and "UAFOCAL", distortion is
defined by the following equation:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 10.67px; height: 20.00px;">
<img alt="" src="rt_images/image6.png" style=
"width: 10.66px; height: 20.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 353.33px; height: 52.00px;"><img alt=""
src="rt_images/image24.png" style=
"width: 353.31px; height: 51.97px; margin-left: 0.01px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c2">"U" and "u" are ray slope angles in
radian measure. All ray heights and ray slopes are evaluated in the
space of the final surface of the current lens system. Distortion
calculations are based upon real chief rays and upon the
"GENERALIZED PARAXIAL RAY TRACE". Since the &nbsp;"GENERALIZED
PARAXIAL RAY TRACE" is based upon real differential rays,
distortion calculations are valid for optical systems containing
tilted and decentered surfaces.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">DIST</span> <span class=
"c15"></span><span class="c1">, factor , n</span><span class=
"c2">&nbsp;- The "DIST" command generates tabular percent
distortion data for the current lens. Distortion values are
generated at "n" field of view positions along a line defined in
object space. The starting point of this line is defined by the ray
&nbsp;"RAY 0 0" traced from the central field point &nbsp;defined
by "FOB 0 0". The default values for "</span><span class=
"c9"></span><span class="c2">" and "factor" are 0.0 and 1.0,
respectively. "n" may range from 1 to 50. Its default value is 10.
The ending point of this line is defined by the ray "RAY 0 0"
traced from the field point "FOB Y</span><span class=
"c2 c22">f</span><span class="c2">&nbsp;, X</span><span class=
"c2 c22">f</span><span class="c2">", where "Y</span><span class=
"c2 c22">f</span><span class="c2">" and "X</span><span class=
"c2 c22">f</span><span class="c2">" are given by the following
equations:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 10.67px; height: 20.00px;">
<img alt="" src="rt_images/image6.png" style=
"width: 10.66px; height: 20.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 136.00px; height: 53.27px;"><img alt=""
src="rt_images/image7.png" style=
"width: 135.99px; height: 53.26px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c2">In the default case, with
"</span><span class="c9"></span><span class="c2">" = 0.0 and
"factor" = 1.0, Y</span><span class="c2 c22">f</span><span class=
"c2">&nbsp;= 1.0 and X</span><span class=
"c2 c22">f</span><span class="c2">&nbsp;= 0.0. All calculations are
performed at the current control wavelength. If the distortion is
not calculable, a message to that effect is displayed and no data
is displayed. After distortion calculations are performed, the data
may be displayed in graphical form using the "PLTDIST" command. In
systems with tilts and decenters in which the central, gut chief
ray does not strike the final surface at zero height, a TILT AUTO
may be required on the final surface in order to compute meaningful
distortion values.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8"><span class="c10">DISTORTION PLOTS</span><span class=
"c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLTDIST , (x-range) ,
dflag</span><span class="c2">&nbsp;- The "PLTDIST" command causes a
plot of the existing distortion data to be generated. If "dflag" is
zero (the default), the plot is automatically displayed on the
screen. Afterward, the plot may be printed using the "GRAOUT"
command. If "dflag" is set to any non-zero value, the automatic
display is suppressed. The plot may still be displayed with the
"DRAW" command and printed with the "GRAOUT" command. This is
another automated plot routine. "PLTDIST" applies to the most
recently generated distortion data. The optional input value
"x-range", entered in aberration units, sets the semi-extent of the
X or aberration axis scale. By default, the X or aberration scale
semi-extent will be sized so as to include all current aberration
data. If no distortion data exists, a message to that effect is
issued and no plot is generated. Distortion data is generated using
the "DIST" command described in the CMD section of this
manual.</span></p>
<p class="c3"><span class=
"c10">FISHEYE-DISTORTION</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- Fisheye-distortion is
defined to be "F</span><span class="c9"></span><span class=
"c2">&nbsp;distortion. For modes "FOCAL" and "UFOCAL", distortion
is therefore defined by the following equation:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 592.13px; height: 107.33px;">
<img alt="" src="rt_images/image25.png" style=
"width: 592.13px; height: 107.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3 c17"></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c14 c2">The "HT"s are ray heights at the
final surface. This distortion is a representation of the
perpendicular distance from the generalized paraxial chief ray's
intersection with the final surface to an extension of the real
chief ray. "U" and "u" are ray slope angles in radian measure. For
modes "AFOCAL" and "UAFOCAL", distortion is defined by the
following equation:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 10.67px; height: 20.00px;">
<img alt="" src="rt_images/image6.png" style=
"width: 10.66px; height: 20.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 390.40px; height: 72.73px;"><img alt=""
src="rt_images/image26.png" style=
"width: 390.38px; height: 72.71px; margin-left: 0.01px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c2">All ray heights and ray slopes at
computed in the space of the final surface of the current lens
system. Distortion calculations are based upon real chief rays and
upon the "GENERALIZED PARAXIAL RAY TRACE". Since the
&nbsp;"GENERALIZED PARAXIAL RAY TRACE" is based upon real
differential rays, distortion calculations are valid for optical
systems containing tilted and decentered surfaces.</span></p>
<p class="c3"><span class="c1">FISHDIST</span> <span class=
"c15"></span><span class="c1">, factor , n</span><span class=
"c2">&nbsp;- The "DIST" command generates tabular percent
distortion data for the current lens. Distortion values are
generated at "n" field of view positions along a line defined in
object space. The starting point of this line is defined by the ray
&nbsp;"RAY 0 0" traced from the central field point &nbsp;defined
by "FOB 0 0". The default values for "</span><span class=
"c9"></span><span class="c2">" and "factor" are 0.0 and 1.0,
respectively. "n" may range from 1 to 50. Its default value is 10.
The ending point of this line is defined by the ray "RAY 0 0"
traced from the field point "FOB Y</span><span class=
"c2 c22">f</span><span class="c2">&nbsp;, X</span><span class=
"c2 c22">f</span><span class="c2">", where "Y</span><span class=
"c2 c22">f</span><span class="c2">" and "X</span><span class=
"c2 c22">f</span><span class="c2">" are given by the following
equations:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 10.67px; height: 20.00px;">
<img alt="" src="rt_images/image6.png" style=
"width: 10.66px; height: 20.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 136.00px; height: 53.27px;"><img alt=""
src="rt_images/image7.png" style=
"width: 135.99px; height: 53.26px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c2">In the default case, with
"</span><span class="c9"></span><span class="c2">" = 0.0 and
"factor" = 1.0, Y</span><span class="c2 c22">f</span><span class=
"c2">&nbsp;= 1.0 and X</span><span class=
"c2 c22">f</span><span class="c2">&nbsp;= 0.0. All calculations are
performed at the current control wavelength. If the distortion is
not calculable, a message to that effect is displayed and no data
is displayed. After fisheye distortion calculations are performed,
the data may be displayed in graphical form using the "PLTFDIST"
command.</span><span class="c2 c42">&nbsp;</span></p>
<p class="c3"><span class="c2 c42">NOTE:</span><span class=
"c2">&nbsp;In systems with tilts and decenters in which the
central, gut chief ray does not strike the final surface at zero
height, a TILT AUTO may be required on the final surface in order
to compute meaningful distortion values.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8"><span class="c10">FISHEYE DISTORTION
PLOTS</span><span class="c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLTFDIST , (x-range) ,
dflag</span><span class="c2">&nbsp;- The "PLTFDIST" command causes
a plot of the existing distortion data to be generated. If "dflag"
is zero (the default), the plot is automatically displayed on the
screen. Afterward, the plot may be printed using the "GRAOUT"
command. If "dflag" is set to any non-zero value, the automatic
display is suppressed. The plot may still be displayed with the
"DRAW" command and printed with the "GRAOUT" command. This is
another automated plot routine. "PLTDIST" applies to the most
recently generated distortion data. The optional input value
"x-range", entered in aberration units, sets the semi-extent of the
X or aberration axis scale. By default, the X or aberration scale
semi-extent will be sized so as to include all current aberration
data. If no distortion data exists, a message to that effect is
issued and no plot is generated. Distortion data is generated using
the "DIST" command described in the CMD section of this
manual.</span></p>
<p class="c12"><span class="c10">FIELD CURVATURE AND
ASTIGMATISM</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The field curvature and astigmatism calculations are
based upon real chief rays and upon the "GENERALIZED PARAXIAL RAY
TRACE". Since the "GENERALIZED PARAXIAL RAY TRACE" is based upon
real differential rays, the field curvature and astigmatism
calculations are valid for optical systems containing tilted and
decentered surfaces.</span></p>
<p class="c3"><span class="c1">FLDCV</span> <span class=
"c15"></span><span class="c1">, factor , n</span><span class=
"c2">&nbsp;and</span> <span class="c1">AST</span> <span class=
"c15"></span><span class="c1">, factor , n</span><span class=
"c2">The "FLDCV" and "ASTIG" commands, respectively, &nbsp;generate
tabular field curvature and astigmatism data for the current lens.
Data values are generated at "n" field of view positions along a
line defined in object space. The starting point of this line is
defined by the ray "RAY 0 0" traced from the central field point
"FOB 0 0". The default values for "</span><span class=
"c9"></span><span class="c2">" and "factor" are 0.0 and 1.0
respectively. "n" may range from 1 to 50. Its default value is 10.
The ending point of this line is defined by the ray "RAY 0 0"
traced from the field point defined by "FOB Y</span><span class=
"c2 c22">f</span><span class="c2">&nbsp;, X</span><span class=
"c2 c22">f</span><span class="c2">", where "Y</span><span class=
"c2 c22">f</span><span class="c2">" and "X</span><span class=
"c2 c22">f</span><span class="c2">" are given by the following
equations:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 10.67px; height: 20.00px;">
<img alt="" src="rt_images/image6.png" style=
"width: 10.66px; height: 20.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 136.00px; height: 53.27px;"><img alt=""
src="rt_images/image7.png" style=
"width: 135.99px; height: 53.26px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c2">In the default case, with
"</span><span class="c9"></span><span class="c2">" = 0.0 and
"factor" = 1.0, Y</span><span class="c2 c22">f</span><span class=
"c2">&nbsp;= 1.0 and X</span><span class=
"c2 c22">f</span><span class="c2">&nbsp;= 0.0. All calculations are
performed at the current control wavelength. If field curvature or
astigmatism is not calculable, a message to that effect is
displayed and no data is displayed. After a field curvature or
astigmatism calculations are performed, the data may be displayed
in graphical form using the "PLTFLDCV" and "PLTAST"
commands.</span></p>
<p class="c8"><span class="c10">FIELD CURVATURE
PLOTS</span><span class="c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLTFLDCV , (x-range) ,
dflag</span><span class="c2">&nbsp;- The "PLTFLDCV" command causes
a plot of the existing field curvature data to be generated. If
"dflag" is zero (the default), the plot is automatically displayed
on the screen. Afterward, the plot may be printed using the
"GRAOUT" command. If "dflag" is set to any non-zero value, the
automatic display is suppressed.</span></p>
<p class="c8"><span class="c14 c2">The plot may still be displayed
with the "DRAW" command and printed with the "GRAOUT" command.
"PLTFLDCV" applies to the most recently generated field curvature
data. The optional input value "x-range" &nbsp;sets the semi-extent
of the X or aberration axis scale. By default, the X or aberration
scale semi-extent will be sized so as to include all current
aberration data. If no field curvature data exists, a message to
that effect is issued and no plot is generated. Field curvature
data is generated using the "FLDCV" command described in the CMD
section of this manual.</span></p>
<p class="c8"><span class="c10">ASTIGMATISM
PLOTS</span><span class="c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLTAST , (x-range) ,
dflag</span><span class="c2">&nbsp;- The "PLTAST" command causes a
plot of the existing astigmatism data to generated. If "dflag" is
zero (the default), the plot is automatically displayed on the
screen. Afterward, the plot may be printed using the "GRAOUT"
command. If "dflag" is set to any non-zero value, the automatic
display is suppressed. The plot may still be displayed with the
"DRAW" command and printed with the "GRAOUT" command. "PLTAST"
applies to the most recently generated astigmatism data. The
optional input value "x-range" sets the semi-extent of the X or
aberration axis scale. By default, the X or aberration scale
semi-extent will be sized so as to include all current aberration
data. If no astigmatism data exists, a message to that effect is
issued and no plot is generated. Astigmatism data is generated
using the "AST" command described in the CMD section of this
manual.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">BEAM FOOTPRINTS</span><span class=
"c21">&nbsp;</span></p>
<p class="c3"><span class="c1">FOOT GRID , n</span><span class=
"c2">&nbsp;- The "FOOT GRID" command is used to change the grid
size for footprint ray tracing. "n" may be set to a value greater
than 4, indicating a 2n+1 x 2n+1 ray grid. The larger the grid
size, the longer the ray grid ray trace will take and the larger
the "FOOT1.DAT" file will become. The default for "n" is 4 yielding
a 17 x 17 grid.</span></p>
<p class="c3"><span class="c1">FOOT (APE) , i</span><span class=
"c2">&nbsp; - The "FOOT" command generates ray beam footprint data
at surface "i". The rays are traced from the last field point
established with the last "FOB" command. The program traces a
rectangular grid of rays from this object point through the current
lens. The rays are aimed at coordinates in the NEWREF surface
(current reference surface). The rectangular grid always fully
fills the NEWREF reference surface with rays. The X, Y and Z
coordinates of each ray at surface "i" and a fail/no fail code are
remembered in the file "FOOT1.DAT". This saved "footprint" data is
used by the next "PLOT FOOT" command issued. If the optional
qualifier word "APE" is NOT used, then the fail/no fail code is set
only by clear apertures and obscurations assigned to the NEWREF
reference surface and by non-aperture/obscuration related ray
failures. If the optional qualifier word "APE" is used, then the
fail/no fail code setting considers clear aperture and obscuration
assignments on all surfaces as well as non-aperture/obscuration ray
failures. If no clear aperture is assigned to the NEWREF reference
surface, then a temporary circular clear aperture will be assigned.
Its semi-diameter will be equal to the larger of the XZ and
YZ-paraxial marginal ray heights at the reference
surface.</span></p>
<p class="c3"><span class="c1">FOOTAREA (ACC)</span><span class=
"c2">&nbsp; - The "FOOTAREA" command is used to calculate the area,
in current lens units, of the last current beam footprint generated
at the surface designated by the "i" input of the "FOOT" command.
This calculation becomes more accurate as the number of rays in the
footprint ray grid increases. The value is stored in the
accumulator. The screen display is suppressed if the optional
qualifier word "ACC" is included.</span></p>
<p class="c3"><span class="c1">FOOTSANG (ACC) , x , y ,
z</span><span class="c2">&nbsp;- The "FOOTSANG" command is used to
calculate the solid angle, in steradians, subtended by the last
beam footprint generated at the surface designated by the "i" input
of the "FOOT" command. The calculation is performed from a point
"x", "y" and "z" with respect to the vertex of the surface at which
the beam footprint was computed. The value is stored in the
accumulator. The screen display is suppressed if the optional
qualifier word "ACC" is included.</span></p>
<p class="c12"><span class="c10">AREA EQUIVALENT
F-NUMBER</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- Using the "FOOT" and the "FOOTAREA" commands, the area
of a beam from any object point may be calculated at the entrance
pupil of an optical system. This is done by placing surface #1 at
that entrance pupil using the "ASTOP EN" command. From this, an
effective aperture diameter for an equivalent area circular
aperture may be computed. If the real ray effective focal length is
also computed and retrieved using the appropriate "GET" option,
then an effective area F/# may be easily computed. This is an
excellent metric for evaluating the variation in collection
efficiency as a function of field position in optical systems with
large amounts of pupil distortion.</span></p>
<p class="c3"><span class="c14 c2">The "PLOT FOOT" command is used
to plot the current beam foot print.</span></p>
<p class="c8"><span class="c10">BEAM FOOTPRINT
PLOTS</span><span class="c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLOT FOOT</span><span class=
"c2">&nbsp; - The "PLOT FOOT" command causes a plot of the current
beam footprint, generated by the last "FOOT" command, to be
plotted. &nbsp;In general, the "PLOT FOOT" command is used as shown
in the following example. The example used the COOK TRIPLET
delivered with the program.</span></p>
<p class="c8"><span class="c24 c21 c23">LIB GET 1</span></p>
<p class="c8"><span class="c21 c23">FOOT GRID 10</span><span class=
"c2">&nbsp;(sets a 21x21 grid of rays)</span></p>
<p class="c8"><span class="c21 c23">FOB</span><span class=
"c2">&nbsp;(specifies the rays will come from the on axis object
point)</span></p>
<p class="c8"><span class="c21 c23">FOOT APE 2</span><span class=
"c2">&nbsp;(generates a 21x21 ray grid footprint at surface
2)</span></p>
<p class="c8"><span class="c21 c23">PLOT NEW</span><span class=
"c2">&nbsp;(starts a fresh plot)</span></p>
<p class="c8"><span class="c21 c23">ORIENT 2</span><span class=
"c2">&nbsp;(sets the look vector so that the plot will be facing
and normal to surface 2)</span></p>
<p class="c8"><span class="c21 c23">PLOT SCALE 2
2</span><span class="c2">&nbsp;(sets the scale factor to 2 -
meaning the plot is twice life size)</span></p>
<p class="c8"><span class="c21 c23">PLOT CLAP 2
2</span><span class="c2">&nbsp;(plots the clear aperture of surface
2)</span></p>
<p class="c8"><span class="c21 c23">PLOT FOOT</span><span class=
"c2">&nbsp;(plots the foot print)</span></p>
<p class="c8"><span class="c21 c23">FOB .5</span><span class=
"c2">&nbsp;(sets another object point)</span></p>
<p class="c8"><span class="c21 c23">FOOT APE 2</span><span class=
"c2">&nbsp;(traced another foot print from the FOB .5 position for
surface 2)</span></p>
<p class="c8"><span class="c21 c23">PLOT FOOT</span><span class=
"c2">&nbsp;(plots the new foot print)</span></p>
<p class="c8"><span class="c21 c23">DRAW</span><span class=
"c2">&nbsp;(draws the plot on the screen)</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8 c17"></p>
<p class="c8"><span class="c14 c2">The foot print appears as shown
below with the on axis foot print filling surface 2 and the off
axis foot print partiall filling surface 2:</span></p>
<p class="c35"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 360.00px; height: 252.00px;">
<img alt="" src="rt_images/image8.png" style=
"width: 359.98px; height: 251.97px; margin-left: 0.01px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c11"><span class="c2">Example Beam Foot Print Plot
&nbsp;</span></p>
<p class="c12"><span class="c10">IMAGE
ORIENTATION</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">IMAGEDIR (ALL</span> <span class=
"c6">or</span><span class="c1">&nbsp;OB</span> <span class=
"c6">or</span><span class="c1">&nbsp;OBJ)</span> <span class=
"c2 c40">or</span></p>
<p class="c8"><span class="c1">IMAGEDIR , i</span><span class=
"c2">&nbsp;- The "IMAGEDIR" command displays &nbsp;the orientation
of two vectors. These two vectors, named the "X-VECTOR" and the
"Y-VECTOR" are originally oriented parallel to the local x and
y-axes on the object surface. Whenever a chief ray is traced using
the "FOB" command, and when chief ray differential ray tracing is
"on", the results of the chief differential ray trace are used to
determine the orientations of the "X-VECTOR" and the "Y-VECTOR" at
each surface of the current lens database, in the loacal coordinate
system of each surface. Since these vectors are determined for each
chief ray traced, the resultant vectors may reflect coordinate
system distortion in the lens database and may not always be
exactly 90 degree from eachother.</span></p>
<p class="c8"><span class="c10">RAY TRACE CONTROL
PARAMETERS</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- Ray trace control parameter commands are used to set
or to display parameters which effect the operation of ray tracing.
With almost no exceptions, these control parameter values will not
need to be altered by the use. The commands should be used with
extreme care. Futhermore, if any of the ray tracing operating
condition qualifier words is issued as a command word rather than a
qualifier word, then if they are issued without numeric input, then
they are treated as if they had been preceeded by the "PMP"
command. If they are entered with numeric input, then they are
treated as if they had been preceded by the "PM"
command.</span></p>
<p class="c3"><span class="c1">PMP (qualifier)</span><span class=
"c2">&nbsp; - The "PMP" command displays the current value of the
parameter identified by "qualifier".</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">PM (qualifier) ,
i</span><span class="c2">&nbsp;</span><span class="c5">&nbsp;- The
"PM" command is used to set a control parameter, identified by
"qualifier", to the numeric value specified by "i". The table below
lists the various control parameters:</span></p>
<a id="t.ae7d520fdac9326f77aa389b30f74437eb6d5d2a"></a><a id=
"t.6"></a>
<table class="c39">
<tbody>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">QUALIFIER</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c11"><span class="c10 c24">DESCRIPTION</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">SURTOL</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This is the tolerance used for
the iterative search for the ray intersection with an aspheric or
other surface which cannot be analytically intersected.</span></p>
<p class="c3"><span class="c6 c24">Default value = 1.0D-8 lens
units</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">AIMTOL</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This is the tolerance used for
iterative ray aiming toward specific coordinates in the reference
surface.</span></p>
<p class="c3"><span class="c6 c24">Default value = 1.0D-8 lens
units</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">CAIMTOL</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This is the tolerance used for
iterative ray aiming toward specific coordinates in the image plane
when RXIM and RYIM are set. Make large enough to avoid ray aiming
failures.</span></p>
<p class="c3"><span class="c6 c24">Default value = 1.0D-3 lens
units</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">NRAITR</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This is the maximum number of
iterations used in ray aiming and ray-surface
intersecting.</span></p>
<p class="c3"><span class="c6 c24">Default value = 100</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">DIFTOL</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This is the fractional increment
used in the calculation of the ray intercept derivatives like DY/DX
or DYA/DY, etc. If, in some strange systems, differential ray
failures occur, adjust this value up or down until they no longer
occur.</span></p>
<p class="c3"><span class="c21">Default value =
1.0D</span><span class="c21 c18">-3</span><span class="c21">&nbsp;x
Relative Aperture Ht. on the Reference Surface.</span><span class=
"c2">&nbsp;</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">DELSUR</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This is the starting derivative
increment used in the calculation of the surface normals for
non-flat, non-spherical or non-conic surfaces.</span></p>
<p class="c3"><span class="c6 c24">Default value =
0.0025</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">SAGDEL</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This is the starting surface
position increment used in the calculation of the surface normals
in SAG calculations.</span></p>
<p class="c3"><span class="c6 c24">Default value = 0.001</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">MAXREG</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This sets the maximum number of
general purpose numeric and alpha numeric storage registers.
Maximum allowed value is 100,000.</span></p>
<p class="c3"><span class="c6 c24">Default (also minimum) value =
4000</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c1">MRAYS</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">This sets the maximum number of
multiple surface intersections in an NSS surface group or the
maximum number of steps when ray tracing in a gradient index
material.</span></p>
<p class="c3"><span class="c6 c24">Default (also minimum) value =
200</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c41 c58">SERINC</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c45">This is the starting search
increment used in chief ray aiming if the initial guess, based upon
the paraxial ray trace, fails. It should never exceed 1/20 of the
value assigned to SERLIM.</span></p>
<p class="c3"><span class="c14 c41">Default value = 0.01 lens
units</span></p>
</td>
</tr>
<tr class="c29">
<td class="c26" colspan="1" rowspan="1">
<p class="c11"><span class="c41 c58">SERLIM</span></p>
</td>
<td class="c25" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c45">This is the limit of the search
range used in chief ray aiming if the initial guess, based upon the
paraxial ray trace, fails. It always be greater than 20 times the
SERINC value.</span></p>
<p class="c3"><span class="c14 c41">Default value = 10.0 lens
units</span></p>
</td>
</tr>
</tbody>
</table>
<p class="c12 c17"></p>
<p class="c8"><span class="c42 c45">SHORTCUT</span><span class=
"c45">: If any of the above operating condition qualifier words is
issued as a command word rather than a qualifier word, then if they
are issued without numeric input, then they are treated as if they
had been preceeded by the "PMP" command. If they are entered with
appropriate numeric input, then they are treated as if they had
been preceded by the "PM" command.</span></p>
<p class="c12 c17"></p>
<p class="c12"><span class="c10">SAVING RAY DATA</span><span class=
"c21">&nbsp;</span></p>
<p class="c3"><span class="c1">SAVERAY</span><span class=
"c2">&nbsp;- The "SAVERAY" command is used to save, for later use,
all of the ray data associated with the current chief and regular
ray. This saves all ray data including differential ray data if it
exists.</span></p>
<p class="c12"><span class="c10">RESTORING RAY
DATA</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">RESTRAY</span><span class=
"c2">&nbsp;- If ray data has been previously saved, it may be
restored using the "RESTRAY" command. "RESTRAY" completely
overwrites all internal memonry areas occupied by the existing
"current" ray data.</span></p>
<p class="c12"><span class="c10">CLEARING SAVED RAY
DATA</span><span class="c21">&nbsp;</span></p>
<p class="c3"><span class="c1">CLEARRAY</span><span class=
"c2">&nbsp;- If ray data has been previously saved, the "CLEARRAY"
erases the internal data and deallocates any allocated memory which
was allocated with the last "SAVERAY" command.</span></p>
<p class="c12"><span class="c10">REFERENCE RAY
SAVE</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
The current reference ray may be saved and reused in complex
aperture function optical path difference calculations using the
following commands.</span></p>
<p class="c12 c17"></p>
<p class="c3"><span class="c1">SAVEREF</span><span class=
"c2">&nbsp;- The "SAVEREF" command causes the the last reference
ray and all associated values such as differential rays and
differential ray pupil data to be saved for later use in complex
aperture function calculations.</span></p>
<p class="c3"><span class="c1">USEOLREF (YES</span> <span class=
"c6">or</span><span class="c1">&nbsp;NO</span> <span class=
"c6">or</span><span class="c1">&nbsp;ON</span> <span class=
"c6">or</span><span class="c1">&nbsp;OFF)</span><span class=
"c2">&nbsp;The "USEOLREF" tells all complex aperture function
calculations ("CAPFN" in the FOE section of this manual) whether or
not to use saved reference ray data (ON or YES) if it exists rather
than using the most recent reference ray data. If saved reference
ray data does not exits, current reference ray data will be used.
The default is "NO" or "OFF".</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c10">HOW RAYS ARE
AIMED</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;-</span></p>
<p class="c3"><span class="c10">CHIEF RAY AIMING</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- When the program traces
an aimed chief ray, the program uses information from the paraxial
ray trace to pick a first guess chief ray aiming point on the
surface following the object surface. In most cases this guess is
good enough to get a ray through the system and the iterative
aiming to the center of the reference surface takes over. If the
first guess is not good enough, an automatic search is undertaken.
If this search fails, the user can still reset the aiming offsets
with the "AIMRAY OFFSET", command described later in this section
and then try to trace the chief ray again. In all cases tested,
rays which really go through an optical system can also be traced
by the program.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c10">LARGE FIELDS OF
VIEW</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;When it is desired to trace rays through very wide field
of view optical systems, in cases where the object distance
magnitude is less than 1.0X10</span><span class=
"c2 c18">10</span><span class="c2">&nbsp;lens units, it is often
helpful to use a small reference object height and then specify the
larger desired object point with input values to the "FOB" command
which are larger than 1.0. This can help mitigate the fact that the
paraxial ray trace treats all &nbsp;angles as if they were tangents
of the angles. This is exactly why the "scy fang" and "scx fang"
values can never be set to +/- 90.0 degrees or beyond. In cases
where the reference object heights are specified by "SCY FANG" and
"SCX FANG", the program internally compensates for this behavior of
the paraxial trace and no special action is needed. For optical
systems which have fields of view greater than or equal to 180
degrees, the surface following the object surface MUST NOT BE FLAT.
If that surface is PLANO, no field of view half angles greater than
or equal to 90.0 degrees can be traced by this program. After a
little thought, this fact should seem obvious. It may be useful to
have surface #1 as a curved dummy surface. Sometimes, the ray trace
demands it. Some experimentation may be useful with different
SERINC and SERLIM values. May times, setting SCY FANG and SCX FANG
to 1 degree and then calling out large FOB values is necessary in
order to successfully trace rays through angles greater than 80
degrees off axis.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c10">DIFFRACTION CALCULATIONS</span>
<span class="c2">&nbsp;- All diffraction based calculations are
issued as CMD level commands. All general statements concerning CMD
level commands, made in the CMD section of this manual, apply
equally to the commands described in this section.</span></p>
<p class="c3"><span class="c10">COMPLEX APERTURE
FUNCTION</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The commands described below are used to create a
COMPLEX APERTURE FUNCTION (CAPFN) for the current system. This is
related to the PUPIL FUNCTION. The modulus of the PUPIL FUNCTION is
equal to the square root of the COMPLEX APERTURE FUNCTION. The
PUPIL FUNCTION is the basis of the diffraction MTF and diffraction
Point Spread Function (PSF) calculations which follow. The CAPFN
is</span> <span class="c21">NOT</span><span class="c2">&nbsp;based
upon the results of the most recent spot diagram generated by an
"SPD" command but generates its own uniformly spaced, rectangular
grid spot diagram. This rectangular grid is aimed at relative
aperture coordinates in the system reference surface. Unlike the
geometrical calculations, the CAPFN calculations take into account
aperture apodization effects caused by entrance and exit pupil
aberrations, anamorphic pupil stretching and the solid angle
subtended by the entrance and exit pupils as seen from the object
and image points. This apodization factor causes the resultant
CAPFN to be adjusted so as to represent a grid of rays distributed
uniformly, in direction cosine space, over the exit
pupil.</span></p>
<p class="c3"><span class="c1">CAPFN , n</span><span class=
"c2">&nbsp;or</span> <span class="c1">CAPFN PERFECT ,
n</span><span class="c2">&nbsp; or</span> <span class="c1">CAPFN
SILENT , n</span><span class="c2">&nbsp;- The "CAPFN" command
causes a uniformly spaced, "n" x "n" rectangular grid of rays to be
traced over the reference surface of the current system. "n" may be
any even integer greater than or equal to 16. The default value for
"n" is 16. A COMPLEX APERTURE FUNCTION is computed and held in
memory for use in future diffraction based calculations. The
qualifier "PERFECT" creates a perfect COMPLEX APERTURE FUNCTION
with zero OPD. This "perfect" CAPFN considers all system
obscurations and clear apertures. The "APOD" command settings,
described earlier in the spot diagram section, are also used in
weighting or apodizing the rays traced during "CAPFN" ray trace. If
&nbsp;the program detects OPD differences across adjacent grid
points of greater than</span> <span class="c9"></span><span class=
"c2">/4, or if the entire wave front has more than one wave of OPD
error, a message will be issued warning the user of that fact.
"CAPFN SILENT" is exactly like "CAPFN" except that no warning
messages or other output is generated. When "n" is explicitly
input, it is also used to reset the value of the "capfnnrd" value.
This new "capfnnrd" value will remain set to this value until
explicitly reset by the user or until the program terminates
execution.</span></p>
<p class="c3"><span class="c1">CAPFNNRD ,
capfnnrd</span><span class="c2">&nbsp;- The "CAPFNNRD" command is
used to reset the default CAPFN grid dimension from the program
default of 16 to an even integer greater value than or equal to 16.
This saves time when issuing a large number of CAPFN commands which
use the same ray grid size.</span></p>
<p class="c3"><span class="c1">CAPFNOUT (file
name)</span><span class="c2">&nbsp;- The "CAPFNOUT" command causes
the current COMPLEX APERTURE FUNCTION to be output to the ASCII
file named (file name) .dat. The default file is CAPFNOUT.DAT if no
file name is supplied. It is stored in the working program
directory. The filename may be from 1 to 8 characters. The CAPFN is
output a row at a time starting in the lower left (-x, -y) corner
of the pupil grid. The first line of output is a header line and
contains the number of rows/columns (N) in the CAPFN and the
spacing between rows/columns (lens units for FOCAL systems or
radians for AFOCAL systems). The next (NxN) lines consist of four
values. They are the modulus (intensity), phase
(2</span><span class="c9"></span><span class="c2">. times the OPD
in waves at the reference wavelength), the ray failure code and the
surface at which the ray stopped. The format is
D23.15,1X,D23.15,1X,I3,1X,I3.</span></p>
<p class="c3"><span class="c1">CAPFNIN (file
name)</span><span class="c2">&nbsp;- The "CAPFNIN" command causes
the COMPLEX APERTURE FUNCTION stored in the ASCII file named (file
name) . DAT to be read into an internal program array. The default
file is CAPFNOUT.DAT if no file name is supplied. After the file is
read, the peak-to-valley and rms opd values for the CAPFN are
computed and may be retrieved using the GET or SHOW PTOVOPD and
RMSOPD commands.</span></p>
<p class="c3"><span class="c1">CAPFNADD (file
name)</span><span class="c2">&nbsp;- The "CAPFNADD" command causes
the COMPLEX APERTURE FUNCTION stored in the ASCII file named (file
name) . DAT to be read and added into the internal program CAPFN
array. The default file is CAPFNOUT.DAT if no file name is
supplied. After the file is added, the peak-to-valley and rms opd
values for the resultant CAPFN are computed and may be retrieved
using the GET or SHOW PTOVOPD and RMSOPD commands. This command is
useful in constructing composite CAPFNS generated from different
lens files or different alternate configurations of the same lens
file.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">CAPFNCLR</span><span class=
"c2">&nbsp;- The "CAPFNCLR" command causes the internal memory used
by the "CAPFNIN" and "CAPFNADD" commands to be released.</span></p>
<p class="c3"><span class="c1">CAPGRID</span> <span class=
"c15"></span><span class="c1">#</span><span class="c2">&nbsp;- The
"CAPGRID" command causes the COMPLEX APERTURE FUNCTION for
wavelength &nbsp;</span><span class="c9"></span><span class="c2">#
to be output both as a grid apodization file, GRIDAPD.DAT, and a
grid phase file GRIDOPD.DAT. The units of the phase file are
current lens units. The grid spacing at the currrent reference
surface, in lens units, will be placed into the accumulator and
displayed on the current output device.</span></p>
<p class="c3"><span class="c10">WAVEFRONT AND APERTURE
MAPS</span><span class="c21">&nbsp;</span><span class="c2">&nbsp;-
The commands described below are used to display, in a textual
sense, both the wavefront and the aperture apodization functions
relative to fractional reference surface position as they are
represented in the current CAPFN.</span></p>
<p class="c3"><span class="c1">WAMAP , i</span><span class=
"c2">&nbsp;or</span> <span class="c1">AMAP , i</span><span class=
"c21">&nbsp;</span><span class="c2">- The "WAMAP" command displays
a coded representation of the current wavefront map. The
X-direction at the system reference surface is displayed
horizontally and the Y-direction is displayed vertically. Following
the "map" is a decoding system which relates the alphanumeric
symbols used in the map to specific wavefront values. These
wavefront values are in waves of the current wavelength used in the
CAPFN generation. "i" specifies the wavelength number in the CAPFN
to be mapped. The default for "i" is the control wavelength number.
If no CAPFN data exists at wavelength number "i", a message to that
effect will be displayed and no other action will be taken. The
"AMAP" command displays a coded representation of the current
aperture apodization map. The X-direction at the system reference
surface is displayed horizontally and the Y-direction is displayed
vertically. Following the "map" is a decoding system which relates
the alphanumeric symbols used in the map to specific aperture
transmission values. These aperture transmission values are
relative to the average transmission through the aperture. "i"
specifies the wavelength number in the CAPFN to be mapped. The
default for "i" is the control wavelength number. If no CAPFN data
exists at wavelength number "i", a message to that effect will be
displayed and no other action will be taken.</span></p>
<p class="c12"><span class="c10">WAVE FRONT MAP FITTING TO
ZERNIKIE</span></p>
<p class="c3"><span class="c1">FITZERN ,</span> <span class=
"c15"></span><span class="c1">#</span><span class="c2">&nbsp;- The
"FITZERN" command causes the current wave front represented in the
current CAPFN to be fitted to the standard 37-term "Fringe" Zernike
polynomial. The "Fringe" Zernike polynomial is discussed in some
detail in the SPFIT and SPSRF manual sections. The fitting is
performed using CAPFN generated OPD data generated at the
wavelength number specified in numeric word #1. If this numeric
input is left blank, then the current control wavelength is
assumed. Since this Zernike polynomial is orthonormal only for unit
circular apertures, the fitting will work best if a circular clear
aperture is assigned to the reference surface. All ray obscurations
are ignored during this fit. All rays not blocked by clear
apertures are assumed to have unit intensity. The fit is performed
in unit normalized reference surface coordinates and then scaled to
the actual reference surface coordinates. The current reference
surface aperture height at the control wavelength is used to
normalize the reference surface coordinates. The coefficient values
may be used in macros via the "GET ZERN37" command discussed in the
CMD section of this manual. Complex Aperture Functions generated in
systems with highly non-circular reference surface apertures,
particularly those with high X-to-Y aspect ratios, should not be
fit using Zernike polynomials. If this is done, even though the fit
may seem "good" when checked with the "LISTOPD" command, the
coefficients may not properly represent the true aberrations
present in the system. Always use caution in these cases and check
your results using X and Y OPD fans.</span></p>
<p class="c3"><span class="c1">LISTOPD</span><span class=
"c2">&nbsp;- The "LISTOPD" command causes a report of the last
Fringe Zernike polynomial OPD map fit to be displayed. The actual
reference surface coordinates, the raw OPDs, the fit OPDs and the
fitting error are displayed for all rays not blocked by clear
apertures or obscurations.</span></p>
<p class="c3"><span class="c1">LISTZERN</span><span class=
"c2">&nbsp;- The "LISTZERN" command causes a report of the
coefficient values of last Fringe Zernike polynomial OPD map fit to
be displayed.</span></p>
<p class="c3"><span class="c1">LISTREPT</span><span class=
"c2">&nbsp;- The "LISTREPT" produces a 37-tern Fringe Zernike
report based upon the last wavefront map fit. The report displays
RMS wavefront values, based upon the coefficient values. The
calculation is based on the equations in Appendix 2 of "Optical
Shop Testing" by &nbsp;Daniel Malacara.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8"><span class="c10">CAPFN PLOTTING</span><span class=
"c21">&nbsp;</span></p>
<p class="c3"><span class="c1">PLOT CAPFNOPD ,</span> <span class=
"c15"></span><span class="c1"># , drflag , zmin ,
zmax</span><span class="c2">&nbsp;- The "PLOT CAPFNOPD" command
causes a 3-D plot of the wavefront part of the current Complex
APerture FuNction (CAPFN), if one exists, to be displayed. Numeric
word #1 specifies the wavelength number for which the wavefront
data will be displayed. The default value is the control wavelength
number. The horizontal axes are the relative exit pupil
coordinates. If "drflag" is left blank, the plot will be displayed
to the screen. Otherwise it will not be displayed. If "zmin" and
"zmax" are not entered, the z-axis (opd) will be auto-scaled to a
reasonable value. If auto-scaling is not desired, then both "zmin"
and "zmax" must be explicitly entered. Units for "zmin" and "zmax"
are waves are the current wavelength.</span></p>
<p class="c3"><span class="c1">PLOT CAPFNAPD,</span> <span class=
"c15"></span><span class="c1"># , drflag</span><span class=
"c2">&nbsp;- The "PLOT CAPFNAPD" command causes a 3-D plot of the
apodization part of the current Complex APerture FuNction (CAPFN),
if one exists, to be displayed. Numeric word #1 specifies the
wavelength number for which the wavefront data will be displayed.
The default value is the control wavelength number. The horizontal
axes are the relative exit pupil coordinates. If "drflag" is left
blank, the plot will be displayed to the screen. Otherwise it will
not be displayed.</span></p>
<p class="c3"><span class="c1">CAPFNROT ("YES" or "ON" or "NO" or
"OFF")</span><span class="c2">&nbsp; - The "CAPFNROT" command is
used to specify whether or not the current CAPFN is to be plotted
with a 90 degree rotation or not. This helps see "hidden" features.
Issued with the interrogator "?", "CAPFNROT" causes the current
CAPFN rotation status to be displayed. If the status is "YES" or
"ON", then each time a CAPFN is generated, it will be plotted with
a 90 degree rotation.</span></p>
<p class="c3"><span class="c1">PLOTCON CAPFNOPD ,</span>
<span class="c15"></span><span class="c1"># , drflag ,
zstep</span><span class="c2">&nbsp;- The "PLOTCON CAPFNOPD" command
causes a 2-D contour plot of the wave front part of the current
Complex APerture FuNction (CAPFN), if one exists, to be displayed.
Numeric word #1 specifies the wavelength number for which the wave
front data will be displayed. The default value is the control
wavelength number. The horizontal axes are the relative exit pupil
coordinates. If "drflag" is left blank, the plot will be displayed
to the screen. Otherwise it will not be displayed. If "zstep" is
not entered, then the steps between contours will be automatically
set so that there are 10 contours. The units of "zstep" are
fractions of the wavelength for which the CAPFN is being plotted.
The maximum number of contours is 20. If "zstep" is set such that
more than 20 contours would be drawn, then "zstep" is automatically
re-adjusted so that 20 contours are drawn.</span></p>
<p class="c3"><span class="c1">PLOTCON CAPFNAPD,</span>
<span class="c15"></span><span class="c1"># ,
drflag</span><span class="c2">&nbsp; - The "PLOTCON CAPFNAPD"
command causes a 2-D contour plot of the apodization part of the
current Complex APerture FuNction (CAPFN), if one exists, to be
displayed. Numeric word #1 specifies the wavelength number for
which the wave front data will be displayed. The default value is
the control wavelength number. The horizontal axes are the relative
exit pupil coordinates. If "drflag" is left blank, the plot will be
displayed to the screen. Otherwise it will not be displayed. 10
contours will be drawn from 0.0 to 100.0 % (maximum relative
intensity).</span></p>
<p class="c8"><span class="c10">OPD FIELD MAPS</span><span class=
"c21">&nbsp;</span></p>
<p class="c3"><span class="c1">RMSMAP ,</span> <span class=
"c15"></span><span class="c1"># , nrd , nflds , drflag</span>
<span class="c2">&nbsp;- The "RMSMAP" command causes a contour plot
of the RMS OPD to be generated and plotted over the field of view
defined by the current SCY/SCX or SCY FANG/SCX FANG values stored
in the lens database. The wavelength number is set by
"</span><span class="c9"></span><span class="c2">#, numeric word
#1. Its default is the control wavelength. The density of the ray
grid traced over the system aperture is set by "nrd", numeric word
#2. Its default is 16. "nrd" must be an even integer between 16 and
512. The number of field of view points across the full x and
y-field of view is set by "nflds", numeric word #3. Its default is
3. It "drflag" is not explicitly entered, the results will be
displayed to the screen, else automatic display will be
suppressed.</span></p>
<p class="c3"><span class="c1">PTVMAP ,</span> <span class=
"c15"></span><span class="c1"># , nrd , nflds , drflag</span>
<span class="c2">&nbsp;- The "PTVMAP" works exactly as "RMSMAP"
except "peak to valley" OPD will be plotted.</span></p>
<p class="c3"><span class="c1">STRLMAP ,</span> <span class=
"c15"></span><span class="c1"># , nflds , drflag</span>
<span class="c2">&nbsp;- The "STRLMAP" works exactly as "RMSMAP"
except psf based Strehl Ratio will be plotted.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">DIFFRACTION OPTICAL TRANSFER
FUNCTION</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- The DOTF command described below generates the
Diffraction Optical Transfer Function (DOTF). This transfer
function is based upon residual optical path differences in the
current lens system and considers the effects of diffraction due to
apertures and obscurations. "DOTF" uses the existing CAPFN if one
exists. If no CAPFN exists, then a "CAPFN" command is automatically
issued using a default "capfnnrd" value of 16. The user may always
change the default capfnnrd value with the CAPFNNRD command
listed earlier. DOTF is always a response to a set of sinusoidally
varying target bars.</span></p>
<p class="c3"><span class="c1">DOTF (Y or X or YACC or XACC) , (f)
, n</span><span class="c2">&nbsp;- The "DOTF" command either
generates a range of DOTF data from spatial frequency 0.0 to the
"cutoff" frequency or it generates DOTF data at a single spatial
frequency value "f". The qualifier word may be "Y", "YACC", "X"
&nbsp;or "XACC". The "cutoff" frequency used in the DOTF
calculation is based either on a true aberrated f/number or an
aberrated entrance/exit pupil calculation, depending upon the
current lens MODE and the SPACE in which the calculation is
performed. The cutoff frequency calculation, used in DOTF, does not
consider vignetting due to apertures or ray failures. This
vignetting is included in the DOTF calculation by its inclusion in
the complex aperture function (CAPFN). If the (optional) single
frequency "f" is explicitly input, then the Modulation Transfer
Function (MTF) and the Phase Transfer Function (PTF) &nbsp;values
corresponding to that frequency will be generated and placed in the
"X" and "Y" registers. These two values will be displayed if the
qualifier words "Y" or "X" are used. If the qualifier "YACC" or
"XACC" is used in the single frequency context, then all display
will be suppressed. When a range of DOTF values are generated, the
qualifier words "YACC" and "XACC" act exactly as do the qualifiers
words "Y" and "X". Qualifier word "Y" or "YACC" causes DOTF data to
be generated in response to horizontal target bars. This is known
as YZ-plane response The qualifier word "X" or "XACC" causes DOTF
data to be generated in response to vertical target bars. This is
known as XZ-plane response. Horizontal target bars are target bars
which are parallel to the local X-axis of the current reference
surface. Vertical target bars are target bars which are parallel to
the local Y-axis of the current reference surface. If no qualifier
word is entered, DOTF data will be calculated and displayed for
both vertical and horizontal target bar orientations. "n" specifies
the number of data points to display during tabular output. The
minimum for "n" is 3, the maximum is 100 and the default is 10.
After DOTF data has been generated with this command, the data may
be plotted using the "PLTDOTF" command.</span></p>
<p class="c3"><span class="c2">The definitions of "horizontal" and
"vertical" are referenced to the local coordinate system of the
current reference surface. Only when the local X and Y-axes of the
object and image surfaces are parallel to the local X and Y-axes of
the reference surface will the target orientation definitions apply
at the object and image surfaces. All DOTF calculations are
polychromatic calculations weighted by the current spectral weight
values as set with the "SPTWT" and "SPTWT2" commands. Monochromatic
calculations are performed by setting all but one wavelength's
spectral weight to zero. The "CUTOFF" frequency is defined to
be:</span></p>
<p class="c12"><span class="c14 c2">In object space with the object
at infinity (NEAR set and the object thickness less than 1.0D+5 mm)
the "cutoff" frequency is just:</span></p>
<p class="c12"><span class="c14 c2">1000 times Entrance Pupil
Diameter (EPD) divided by the shortest wavelength. The units are
line pairs per milliradian (lp/mrad) In object space with a near
object the "cutoff" frequency is just:</span></p>
<p class="c12"><span class="c14 c2">Entrance Pupil Diameter (EPD)
&nbsp;(in mm) divided by the product of the shortest wavelength (in
mm) and the distance from the current object surface to the
entrance pupil (in mm). The units are line pairs per millimeter
(lp/mm).</span></p>
<p class="c3"><span class="c14 c2">In image space with mode
"AFOCAL" or "UAFOCAL" &nbsp;the "cutoff" frequency is
just:</span></p>
<p class="c3"><span class="c14 c2">1000 X Exit Pupil Diameter (EPD)
divided by the shortest wavelength. The units are line pairs per
milliradian (lp/mrad).</span></p>
<p class="c3"><span class="c14 c2">In image space with mode "FOCAL"
or "UFOCAL" &nbsp;the "cutoff" frequency is just:</span></p>
<p class="c3"><span class="c14 c2">Exit Pupil Diameter (EPD) (in
mm) divided by the product of the shortest wavelength (in mm) and
the distance from the exit pupil to the image surface (in mm). The
units are line pairs per millimeter (lp/mm).</span></p>
<p class="c3"><span class="c1">CUTOFF (O, OACC, I or
IACC)</span><span class="c2">&nbsp;- The "CUTOFF" command generates
and displays the current value of the "cutoff" frequency. This
"cutoff" frequency calculation is based either upon a real ray
f/number calculation or a real ray entrance/exit pupil calculation
depending upon the current lens MODE and the space in which the
"cutoff" frequency is requested. The qualifier "O" or "I" causes
the "cutoff" spatial frequency to be calculated either in "object"
space or "image" space. The default qualifier is "I". The value of
the "cutoff" frequency is always placed into the "X"-register. The
qualifiers "OACC" and "IACC" work just as do "O" and "I" except
that they suppress all display.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">DOTF IN OBJECT
SPACE</span><span class="c2">&nbsp;- All DOTF calculations are
performed in the frequency domain of "image space". In the AFOCAL
or UAFOCAL mode, the frequency units are "lp/mrad". In FOCAL or
UFOCAL modes the frequency units are "lp/mm". Many times it proves
convernient to express the MTF in the frequency domain of "object
space" The following two commands provide the user with a way of
telling the program that the tabular MTF listings and the graphical
MTF plots of MTF versus frequency are to be displayed in the
frequency domain of "object space".</span></p>
<p class="c3"><span class="c1">SPACE (O or I)</span><span class=
"c2">&nbsp;- The "SPACE" command instructs the program as to the
spatial domain in which the tabular and graphical DOTF is to be
represented. The default is "I" for image space. This command does
not change the way the DOTF values are computed but it does change
the spatial frequency units used in the tabular and graphical
displays. ". Issuing this command with the "?" returns the current
setting</span></p>
<p class="c3"><span class="c1">NEAR</span><span class=
"c2">&nbsp;or</span> <span class="c1">FAR</span><span class=
"c2">&nbsp;- The "NEAR" and "FAR" commands are used to specify the
units for optical transfer function display when space is set to
"O". "NEAR" sets units to "lp/mm" whereas "FAR" specifies
"lp/mrad". Issuing this command with the "?" returns the current
setting. The program default setting is "FAR"</span></p>
<p class="c3"><span class="c10">REFERENCE SPHERE
ADJUSTMENTS</span><span class="c2">&nbsp;- The commands described
below are used to modify the location of the center and the radius
of curvature of the reference sphere for CAPFN OPD calculations.
They do</span> <span class="c21">NOT</span><span class=
"c2">&nbsp;move the center of the reference sphere or modify the
reference sphere radius of curvature for individual ray OPDs or ray
fan OPD calculations. These commands only apply for modes FOCAL and
UFOCAL. They have no impact when modes AFOCAL and UAFOCAL are
set.</span><span class="c21">&nbsp;This is the default condition
when the program starts.</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c1">RSPH CHIEF</span><span class=
"c2">&nbsp;or</span> <span class="c1">RSPH
NOTILT</span><span class="c2">&nbsp;or</span> <span class="c1">RSPH
BEST</span><span class="c2">&nbsp;- The "RSPH CHIEF" command causes
the center of the reference sphere to be located where the current
chief ray crosses the current image surface. "RSPH NOTILT" attempts
to remove wavefront tilt by fitting the wavefront to a sloped plane
in a least squares sense. It uses this sloped plane to remove
wavefront tilt and then estimates the resultant reference sphere
center of curvature position such that the center of curvature
still lies in the original image plane.</span><span class=
"c21">&nbsp;</span><span class="c2">"RSPH BEST" attempts to remove
wavefront tilt and focus by fitting the wavefront to a tilted
sphere in a least squares sense. It uses this tilted sphere to
remove wavefront tilt and focus and then estimates the resultant
reference sphere center of curvature position. The reference sphere
center may no longer be located on the original image surface. If
the "RSPH" command is issued followed by the "?", then the current
mode for locating the center of the reference sphere will be
displayed. These commands impact the behavior of RMS OPD
calculations during CAPFN ray tracing. They, in turn, impact the
calculation of the diffraction based optical transfer function and
PFSs. In the case of polychromatic calculations, the reference
sphere center position picked, is the best position considering all
wavelength's opds. The "RSPH" command is also used during
geometrical spot diagram ray tracing to specify the center of the
geometrical line spread function before any additional offsets are
applied.</span></p>
<p class="c3"><span class="c1">NOTILT</span><span class=
"c2">&nbsp;or</span> <span class="c1">BEST</span><span class=
"c2">&nbsp;- The "NOTILT" command acts to remove wavefront tilt
from the current complex aperture function (FOCAL and UFOCAL MODES
only). This is done by fitting the wavefront to a sloped plane in a
least squares sense. It uses this sloped plane to remove wavefront
tilt and then estimates the resultant reference sphere center of
curvature position such that the center of curvature still lies in
the original image plane.</span><span class=
"c21">&nbsp;</span><span class="c2">The "BEST" command acts to
remove wavefront focus and tilt from the current complex aperture
function (FOCAL and UFOCAL MODES only). This is done by fitting the
wavefront to a sloped plane in a least squares sense. It uses this
sloped plane to remove wavefront focus and tilt and then estimates
the resultant reference sphere center of curvature position such
that the center of curvature still lies in the original image
plane.</span><span class="c21">&nbsp;</span><span class="c2">In
both cases the new resultant complex aperture function replaces the
CAPFN which existed before the command was issued. The associated
reference sphere motion may be retrieved using the "GET RSPHX",
"GET RSPHY" and "GET RSPHZ" commands. New RMS and Peak to Valley
wavefront errors are also automatically computed and are available
via the "GET PTOVOPD" and "GET RMSOPD" commands.</span></p>
<p class="c3"><span class="c10">MULTIPLE FOV
DOTF</span><span class="c2">&nbsp;- If multiple field of view
definitions are included in the lens database (using the "FLDS"
command) and if the command which immediately precedes the "DOTF"
command is not an "FOB" command and if "DOTF" is issued without
qualifier or numeric input, then DOTF values will be computed for
the diffraction limit and for each of the defined multiple field of
view positions. These values will be stored so that they may be
plotted with the next "PLTDOTF" command. For multiple field of view
DOTF calculations, if the reference sphere center location had been
previously set to "BEST", it will be temporarily be reset to
"NOTILT" for the duration of the calculations.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">THRU-FOCUS DOTF</span><span class=
"c2">&nbsp;- Many other optical design programs provide a
thru-focus diffraction MTF calculation based upon the axial motion
of the final surface of the lens database. This is usually
performed via some motion of the final reference sphere center.
Even though this method is fast, it is totally inadequate for most
real optical designs for the following reasons:</span></p>
<p class="c3"><span class="c14 c2">The method ignores all AFOCAL
systems</span></p>
<p class="c3"><span class="c14 c2">Many times in REAL optical
systems "focus" is achieved through the motion of some element
other than the image surface.</span></p>
<p class="c3"><span class="c14 c2">To support a useful thru-focus
MTF capability &nbsp;the following commands are
provided:</span></p>
<p class="c3"><span class="c1">TFMOTION (X , Y or Z) , i ,</span>
<span class="c15"></span><span class="c1">t , tmin ,
tmax</span><span class="c2">&nbsp;- The "TFMOTION" command defines
the motion of surface "i" which will be used to change system
"focus". The qualifier word indicates whether the motion will be in
the local X, Y or Z-direction with respect to the local surface
coordinate system at surface "i". "</span><span class=
"c9"></span><span class="c2">t" is the increment of motion and
"tmin" and "tmax" are the limits of the motion. The default
direction is "Z". The default surface "i" is the final surface,
which for AFOCAL and UAFOCAL modes won't really work and so should
be changed by the user to a more effective surface in afocal
systems. The default for "</span><span class=
"c9"></span><span class="c2">t" is 0.001 lens unit. The defaults
for "tmin" and "tmax" are -5 and +5 times the current
"</span><span class="c9"></span><span class="c2">t".</span></p>
<p class="c3"><span class="c1">TFDOTF , freq , n</span><span class=
"c2">&nbsp;- The "TFDOTF" command generates a range of DOTF data at
spatial frequency "freq" over the thru-focus range specified by the
last "TFMOTION" command. Both XZ (vertical target bars) and YZ
(horizontal target bars)-plane modulus and phase values are
displayed. "n" is the grid size for the complex aperture function.
The default value is 16. The definitions of "horizontal" and
"vertical" are referenced to the local coordinate system of the
current reference surface. Only when the local X and Y-axes of the
object and image surfaces are parallel to the local X and Y-axes of
the reference surface will the target orientation definitions apply
at the object and image surfaces. All DOTF calculations are
polychromatic calculations weighted by the current spectral weight
values as set with the "SPTWT" and "SPTWT2" commands. Monochromatic
calculations are performed by setting all but one wavelength's
spectral weight to zero.</span></p>
<p class="c8"><span class="c10">DOTF PLOTS</span><span class=
"c21">&nbsp;</span></p>
<p class="c8"><span class="c1">PLTDOTF (LEICA) , (max-freq.) ,
dflag</span></p>
<p class="c8"><span class="c6 c24">CASE: No qualifier
word</span></p>
<p class="c8"><span class="c2">In this case the "PLTDOTF" command
causes a plot of the modulus of the existing Diffraction Optical
Transfer Fuction data versus spatial frequency to be generated. If
"(max-freq) is entered (this input is not used in LEICA type
plots), the plot will only go out to this frequency. &nbsp;If
"dflag" is zero (the default), the plot is automatically displayed
on the screen. Afterward, the plot may be printed using the
"GRAOUT" command. If "dflag" is set to any non-zero value, the
automatic display is suppressed. The plot may still be displayed
with the "DRAW" command and printed with the "GRAOUT" command.
"PLTDOTF" applies to the most recently generated DOTF. If no DOTF
data exists, a message to that effect is issued and no plot is
generated. If DOTF data exists for both vertical and horizontal
target orientations, they both will be included on one plot. If
multiple field of view "DOTF" data exists, it will be plotted on a
multiple field of view type of DOTF display. Each curve will be
labeled as to field of view position and target
orientation.</span></p>
<p class="c8"><span class="c6 c24">CASE: Qualifier word = "LEICA"
(There must exist DOTF data for at least 5 multiple field of view
positions)</span></p>
<p class="c8"><span class="c2">In this case the "PLTDOTF" command
causes a plot of the modulus of the existing Diffraction Optical
Transfer Fuction data versus field of view to be generated.
"max-freq" input is ignored in this case. If "dflag" is zero (the
default), the plot is automatically displayed on the screen.
Afterward, the plot may be printed using the "GRAOUT" command. If
"dflag" is set to any non-zero value, the automatic display is
suppressed. The plot may still be displayed with the "DRAW" command
and printed with the "GRAOUT" command. "PLTDOTF" applies to the
most recently generated DOTF. If no DOTF data exists, a message to
that effect is issued and no plot is generated. This command plots
both target bar orientations of the first 10, non-zero frequency
MTFs generated using the previous "DOTF" command. GOTF and DOTF
data is generated using the "GOTF" and "DOTF" commands described in
the CMD section of this manual.</span></p>
<p class="c8"><span class="c1">DIFLEICA (ON or YES or OFF or NO) ,
freq#</span><span class="c2">&nbsp; - The DIFLEICA command is used
to shut off any of the DOTF vs FOV plots in a "PLTDOTF LEICA" type
of plot. The "freq#" can be 1 through 10. Once frequency numbers
are turned "off" they stay "off" until they are "tuned on" of until
the program ends. Entered with a "?", the status for all 10
frequencies will be displayed.</span></p>
<p class="c12"><span class="c10">DIFFRACTION PSF</span><span class=
"c2">&nbsp;- Diffraction PSF's are calculable for both focal and
afocal systems. Focal systems represent the PSF in lens units.
Afocal systems represent the PSF in radian measure in the far
field. The commands described below are used to generate a true
diffraction Point Spread Function (PSF). They use the same routines
which generate the CAPFN and which are described in the first part
of this manual section.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">PSF FROM THE CURRENT
CAPFN</span><span class="c2">&nbsp;- If a CAPFN already exists, it
will be used to generate the next PSF. If a CAPFN does not exist,
one will be generated. The &nbsp;ray grid size for that PSF will be
set equal to the current "capfnnrd" value. "tgr" will be set to be
a power of 2 and will initially be greater than or equal to four
times the "capfnnrd". The "pgr" will be set to "tgr"-1. The user
may reset the "tgr" and "pgr" values after the CAPFN is generated
and before the PSF is generated. All "nrd", "pgr" and "tgr" values
which are reset, will remain reset until explicitly reset again by
the user or until the program terminates execution.</span></p>
<p class="c12"><span class="c10">PARAMETER SETUP</span><span class=
"c2">&nbsp;- The commands described below are used to set up the
program parameters which will be used when generating the PSF. The
PSF is polychromatic and includes information from any non-zero
wavelength for which the spectral weight is non-zero.</span></p>
<p class="c3"><span class="c1">PSF</span> <span class=
"c2">&nbsp;or</span> <span class="c1">PSF
PERFECT</span><span class="c2">&nbsp; or</span> <span class=
"c1">PSF PERFNOOB , dflag ,</span> <span class=
"c15"></span><span class="c1"># , I</span><span class="c2">&nbsp;-
The "PSF" command is used to generate a diffraction based Point
Spread Function via a Fast Fourier Transform of the Complex
Aperture Function. "PERFECT" causes all OPD errors to be set to
ZERO. "PERFNOOB" causes all OPD to be set to ZERO and causes all
obscurations to be ignored. If dflag is zero and PSF plotting is
on, the plot will be drawn to the screen. If dflag is non-zero
and PSF plotting is on, the plot will be generated but not drawn to
the screen. If "</span><span class="c9"></span><span class="c2">#"
is explicitly input, the PSF will be only computed using a pupil
function at that wavelength #, else a polychromatic PSF will be
generated. If "I" is a starting point object intensity. The default
is 1.0 and it may be set to any value between 0.0 and
1.0.</span></p>
<p class="c3"><span class="c1">NRD , nrd</span><span class=
"c2">&nbsp;- The "NRD" command is used to specify the number of
rays which will span the exit pupil of the current system at the
shortest wavelength. The default value is 16. Any even integer
greater than or equal to 16 and less than TGR may be used. Issued
with the interrogator "?", "NRD" causes the current "nrd" value to
be displayed.</span></p>
<p class="c3"><span class="c1">PGR , pgr</span><span class=
"c2">&nbsp;- The "PGR" command is used to specify the FFT transform
plotting grid extent during PSF and Streaked PSF plotting. It also
specifies the extent of the integration grid for the line spread
function output tables in the PSF.DAT and SPSF.DAT files and the
region considered during Pixel Linearity Analysis when the
qualifier words "LSF" and "SLSF" are used. It may be set to any odd
integer less than TGR. The default value is 127 which is the
default "tgr" value minus 1. If the "tgr" value is decreased below
that of the current "pgr" value, then the "pgr" value will be
automatically reset to "tgr"-1. Issued with the interrogator "?",
"PGR" causes the current "pgr" value to be displayed.</span></p>
<p class="c3"><span class="c1">TGR , tgr</span><span class=
"c2">&nbsp;- The "TGR" command is used to specify the FFT transform
grid size. It may be any even integer power of 2 greater than or
equal to 64. The default value is 128 which is four times the
default value of "nrd" Issued with the interrogator "?", "TGR"
causes the current "tgr" value to be displayed. TGR should always
be at least two times the NRD.</span></p>
<p class="c3"><span class="c1">GRI , gri</span><span class=
"c2">&nbsp;- The "GRI" command is used to specify the FFT transform
grid spacing. By default, the "gri" value is determined from the
current "tgr" and "nrd" values and by the shortest wavelength and
the f-number at the shortest wavelength. If a "gri" value is
explicitly input by the user, then the program adjusts the "nrd"
value and applies special ray scaling so as to yield the requested
"gri" If the "NRD" command is issued after the "GRI" command is
issued, then the existing "gri" specification will be cancelled and
the "gri" will again be determined from the "tgr" and "nrd" values.
In modes FOCAL and UFOCAL, "gri" is entered in lens units. In modes
AFOCAL and UAFOCAL, gri is entered in "radians".</span></p>
<p class="c3"><span class="c1">EXTENT , extent</span><span class=
"c2">&nbsp;- The "EXTENT" command is used to specify the FFT
transform displayed extent by using the existing PGR value to
calculate a new internal "gri" value such that "gri"x"pgr" =
"extent". &nbsp;This is just an alternate way for the user to
specify the "gri" value.</span></p>
<p class="c3"><span class="c1">PSFLIN</span><span class=
"c2">&nbsp;- The "PSFLIN" command is used to switch the PSF
presentation from the PSFLOG mode to the original default "linear"
presentation. Issued with the interrogator "?", the current PSF
presentation mode is displayed.</span></p>
<p class="c3"><span class="c1">PSFLOG , d</span><span class=
"c2">&nbsp;- The "PSFLOG" command is used to specify the PSF is to
be replaced everywhere by its LOG</span><span class=
"c2 c22">10</span><span class="c2">&nbsp;spread over "d" decades.
The default for "d" is "2". Issued with the interrogator "?", the
current PSF presentation mode is displayed.</span></p>
<p class="c3"><span class="c1">PSFPLOT ("YES" or "ON" or "NO" or
"OFF" or "HCONLY")</span><span class="c2">&nbsp;- The "PSFPLOT"
command is used to specify whether or not the current PSF is to be
plotted to the screen. Issued with the interrogator "?", "PLOTPSF"
causes the current PSF plot status to be displayed. If the status
is "YES" or "ON", then each time a PSF is generated, it will be
plotted to the screen and will be available for re-draw using the
"DRAW" command or for hard copy display using the "GRAOUT" command.
If the qualified word "HCONLY" is used, "PSFPLOT YES" is assumed
but no automatic "DRAW" command is issued and the PSF plot is not
automatically displayed on the screen.</span></p>
<p class="c3"><span class="c1">PSFROT &nbsp;("YES" or "ON" or "NO"
or "OFF")</span><span class="c2">&nbsp;- The "PSFROT" command is
used to specify whether or not the current PSF is to be plotted
with a 90 degree rotation or not. This helps see "hidden" features.
Issued with the interrogator "?", "PSFROT" causes the current PSF
rotation status to be displayed. If the status is "YES" or "ON",
then each time a PSF is generated, it will be plotted with a 90
degree rotation.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">PSF FILE OUTPUT</span><span class=
"c2">&nbsp;- The following commands control the output of the
current PSF to the ASCII file PSF.DAT.</span></p>
<p class="c3"><span class="c1">PSFTAG , psftag</span><span class=
"c2">&nbsp;- The "PSFTAG" command is used to specify the character
value of "psftag". "psftag" will be written as the first line of
the ASCII PSF data file. The default value is " &nbsp; &nbsp;
PSF.DAT". The tag may be up to 12 characters long. Issued with the
interrogator "?", "PSFTAG" causes the current "psftag" to be
displayed</span></p>
<p class="c3"><span class="c1">PSFLI , psfli</span><span class=
"c2">&nbsp;- The "PSFLI" command is used to specify the character
value of "psfli". "psfli" will be written as the second line of the
ASCII PSF data file. The default value is "THIS IS AN ASCII
REPRESENTATION OF A POINT SPREAD FUNCTION". The "psfli" may be up
to 78 characters long. Issued with the interrogator "?", "PSFLI"
causes the current "psfli" to be displayed</span></p>
<p class="c3"><span class="c1">PSFWRITE , ("YES" or "ON" or "NO" or
"OFF")</span><span class="c2">&nbsp;- The "PSFWRITE" command is
used to specify whether or not the current PSF is to be output to
the ASCII file PSF.DAT. Issued with the interrogator "?",
"PSFWRITE" causes the current PSF write status to be displayed. If
the status is "YES" or "ON", then each time a PSF is generated, it
will be output to the ASCII file PSF.DAT. If more than one PSF
needs to be saved, use the "SYSTEM" command to issue "RENAME" or
"COPY" commands from the operating system. The PSF.DAT file has the
formats described below. The magnitude of the PSF is written out a
row at a time starting at the -x,-y corner. The first "tgr-1"
elements of the PSF will be the "bottom" row. The last row written
out will be the top row starting at -x,+y and ending at +x,+y. The
coordinates are in the coordinate system of the image surface. The
magnitude of the PSF is scaled to a peak value of 32767. A PSF.DAT
file must exist before a Pixel Linearity analysis can be
performed.</span></p>
<p class="c12"><span class="c10">PSF.DAT FORMAT</span></p>
<p class="c3"><span class="c14 c2">1. The first line of the file is
the file "psftag" set by the "PSFTAG" command described above. This
"psftag" is written in A12 format. The default is
"PSF___.DAT".</span></p>
<p class="c3"><span class="c14 c2">2. The second line of the file
contains the "psfli" set by the "PSFLI" command described above.
The "psfli" is written in A78 format. The default is "THIS IS AN
ASCII REPRESENTATION OF A POINT SPREAD FUNCTION".</span></p>
<p class="c3"><span class="c14 c2">3. The third line contains the
value of "tgr-1" followed by the value of "pgr", written in
I10,1x,I10 format.</span></p>
<p class="c3"><span class="c14 c2">4. The fourth line contains the
current units being used. "CM", "MM", "IN" or "M" for centimeters,
millimeters, inches or meters.</span></p>
<p class="c3"><span class="c14 c2">5. The fifth line contains the
PSF extent and grid spacing in lens units. These are written in
E15.8 , 1x , E15.8 format</span></p>
<p class="c3"><span class="c14 c2">6. The sixth line contains the X
and Y-centroid locations of the PSF. These are written in E15.8,
1x, E15.8 format</span></p>
<p class="c3"><span class="c14 c2">7. The seventh line contains the
X and Y-field of view coordinated followed by the units (DEGREES
for infinite object distances or lens units ("CM", "MM", "IN" or
"M" &nbsp;for finite object distances). Format is
E15.8,1x,E15.8,1x,A9.</span></p>
<p class="c3"><span class="c14 c2">8. The next "tgr-1" x "tgr-1"
lines contain the X and Y index counters of a PSF entry followed by
the PSF intensity scaled to a peak value of 32767. Each line is
written in 2I4 , I8 format.</span></p>
<p class="c3"><span class="c14 c2">9 .The next "tgr-1" lines
contain the X index counter of the X-direction line spread function
followed by the X-direction line spread function intensity values
scaled to a peak value of 1.0000. Each line is written in I4 ,
G23.15 format. This line spread function is a result of a summation
of all the columns in the PSF.</span></p>
<p class="c3"><span class="c14 c2">10. The next "tgr-1" lines
contain the Y index counter of the Y-direction line spread function
followed by the Y-direction line spread function intensity values
scaled to a peak value of 1.0000. Each line is written in I4 ,
G23.15 format. This line spread function is a result of a summation
of all the rows in the PSF.</span></p>
<p class="c3"><span class="c14 c2">11. The last line of the file
contains the letters "EOF" standing for "End Of File".</span></p>
<p class="c3"><span class="c1">PSFBIN , ("YES" or "ON" or "NO" or
"OFF")</span><span class="c2">&nbsp;- The "PSFBIN" command is used
to specify whether or not the current PSF is to be output to the
binary file PSFBIN.DAT. Issued with the interrogator "?", "PSFBIN"
causes the current PSFBIN write status to be displayed. If the
status is "YES" or "ON", then each time a PSF is generated, it will
be output to the binary file PSFBIN.DAT. If more than one PSF needs
to be saved, use the "SYSTEM" command to issue "RENAME" or "COPY"
commands from the operating system. The PSFBIN.DAT file has the
formats described below. The magnitude of the PSF is written out a
row at a time starting at the -x,-y corner. The first "tgr-1"
elements of the PSF will be the "bottom" row. The last row written
out will be the top row starting at -x, +y and ending at +x, +y.
The coordinates are in the coordinate system of the image
surface.</span></p>
<p class="c12"><span class="c10 c24">PSFBIN.DAT FORMAT</span></p>
<p class="c3"><span class="c14 c2">1. The first record of the file
comprises the total number of record in the file, as in
INTEGER*4</span></p>
<p class="c3"><span class="c14 c2">2. The second record of the file
comprises: tgr-1 (INTEGER*4), gri-spacing in the PSF (REAL*8),
scalefactor (REAL*8), unit_flag (INTEGER*4), mode_flag (INTEGER*4).
The scalefactor is the value which when multiplied into the PSF
values, scales the peak PSF value to 32767. The unit_flag is 1 =
inch, 2 = cm, 3 = mm and 4 = meters, the current lens units. The
mode_flag is 1 = focal, 2 = afocal.</span></p>
<p class="c3"><span class="c14 c2">3. The third record comprises
wavelengths #1 to #10, in micron units. Ten (REAL*8)
items.</span></p>
<p class="c3"><span class="c14 c2">4. The fourth record comprises
the wavelength spectral weights for wavelengths #1 to #10. Ten
(REAL*8) items.</span></p>
<p class="c3"><span class="c14 c2">5. The next "tgr-1"x"tgr-1"
records comprise the x (INTEGER*4) and y (INTEGER*4) - PSF index
values followed by the associated raw PSF value (REAL*8)</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c2">There will always be ("tgr-1) x
("tgr-1") + 4 records in a PSFBIN.DAT file.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3 c17"></p>
<p class="c12"><span class="c10">HOW PSF WORKS</span><span class=
"c21">&nbsp;</span><span class="c2">- PSF (PERFECT or PERFNOOB)The
"PSF" command causes a diffraction PSF calculation to be performed
for the field of view specified by the &nbsp; current "FOB"
command. The optional qualifier "PERFECT" creates a perfect COMPLEX
APERTURE FUNCTION with zero OPD. This "perfect" CAPFN considers all
system obscurations and clear apertures. The optional qualifier
"PERFNOOB" works exactly as "PERFECT" except that all system
obscurations are ignored. The "APOD" command settings, described
earlier in the spot diagram section, are also used in weighting or
apodizing the rays traced during "CAPFN" ray trace which forms the
basis of the PSF calculations The program performs the following
operations whenever a PSF is requested via the "PSF"
command:</span></p>
<p class="c3"><span class="c14 c2">A Complex Aperture Function
(CAPFN) is created using a square ray grid of size "nrd" x "nrd"
for the shortest wavelength for which there is a non-zero spectral
weighting factor. This CAPFN is stored on disk just as would be
done if a "CAPFN" command had been issued. The ray grid spacing is
scaled for all other wavelengths in the pupil so as to produce
equal grid spacing in the transform grid.</span></p>
<p class="c3"><span class="c14 c2">A grid spacing and a transform
extent in the focal plane are computed, based upon the shortest
wavelength and the image space F/number. This is the PSF grid
spacing used in the FFT (Fast Fourier Transform).</span></p>
<p class="c3"><span class="c14 c2">The CAPFN is "zero padded" so as
to be at the center of a "tgr" x "trg" &nbsp;sized pupil
function.</span></p>
<p class="c3"><span class="c14 c2">A &nbsp;"tgr" x "tgr" Fast
Fourier Transform is performed upon the pupil function for each
wavelength, is multiplied by the current wavelength spectral
weighting factor and is finally added to the final transform
storage. By nature of the math, this grid is now of dimension
"tgr"-1. The raw PSF peak value corresponding to each of the 10
wavelengths and before being multiplied by the spectral weighting
factor, is stored in a general purpose storage registers 101 to
110. For example, The raw PSF peak for wavelength #1, is stored in
register #101 and may be retrieved with the "RCL 101"
command.</span></p>
<p class="c3"><span class="c14 c2">The central "tgr-1" x "tgr-1"
values are saved in a temporary PSF storage area.</span></p>
<p class="c3"><span class="c14 c2">The PSF is then plotted to the
screen (if "PSFPLOT" was set to "ON") and written to the ASCII file
PSF.DAT (if "PSFWRITE was set to "ON")</span></p>
<p class="c12"><span class="c10">PSF STREAKING</span><span class=
"c2">&nbsp;- There may be times when it is desired to create a
"streaked" diffraction PSF from original PSF which was stored in
the PSF.DAT file. The following commands provide this
capability.</span></p>
<p class="c3"><span class="c1">STREAK PLOT ("YES" or "ON" or "NO"
or "OFF")</span><span class="c2">&nbsp;- The "STREAK PLOT" command
is used to specify whether or not the streaked PSF is to be plotted
to the screen. Issued with the interrogator "?", "STREAK PLOT"
causes the current streaked PSF plot status to be displayed. If the
status is "YES" or "ON", then each time a streaked PSF is
generated, it will be plotted to the screen and will be available
for re-draw using the "DRAW" command or for hard copy display using
the "GRAOUT" command. The program default is "ON".
&nbsp;"pgr"x"pgr" elements of the streaked PSF are displayed even
though the entire streaked PSF is written to the SPSF.DAT
file.</span></p>
<p class="c3"><span class="c1">STREAK WRITE , ("YES" or "ON" or
"NO" or "OFF")</span><span class="c2">&nbsp;- The "STREAK WRITE"
command is used to specify whether or not the streaked PSF is to be
output to the ASCII file SPSF.DAT. Issued with the interrogator
"?", "STREAK WRITE" causes the current streaked PSF write status to
be displayed. If the status is "YES" or "ON", then each time a
streaked PSF is generated, it will be output to the ASCII file
SPSF.DAT. If more than one streaked PSF file needs to be saved, use
the "SYSTEM" command to issue "RENAME" or "COPY" commands from the
operating system. The SPSF.DAT file has exact same file format as
used for the PSF.DAT file previously described except that no
optional PSFLI or PSFTAG may be set by the user. The magnitude of
the streaked PSF is written out a row at a time starting at the
-x,-y corner. The first "m+tgr-1" elements of the PSF will be the
"bottom" row. The last row written out will be the top row starting
at -x,+y and ending at +x,+y. The coordinates are in the coordinate
system of the reference surface. The magnitude of the streaked PSF
is scaled to a peak value of 32767. "m" is the number of PSF grid
spaces that the PSF is "streaked".</span></p>
<p class="c3"><span class="c1">STREAK (X or Y or XY) ,
m</span><span class="c2">&nbsp;- The "STREAK" command causes the
current PSF stored in the PSF.DAT file to be streaked (shift-added)
either in the X or Y or XY-direction by "m" "gri" units. A new
streaked PSF is created in memory. The new streaked PSF has
dimension "tgr-1+m"x"tgr-1+m". If "STREAK WRITE" has been set to
"ON", the streaked psf will be written to the file SPSF.DAT. If
"STREAK PLOT" has been set to "ON", the streaked psf will be
plotted on the screen and may be re-drawn using the "DRAW" command
or printed using the "GRAOUT" command.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c10">PIXEL LINEARITY (CENTRIOD)
ANALYSIS</span><span class="c21">&nbsp;</span><span class="c2">-
Pixel linearity analysis is only available for systems in modes
FOCAL and UFOCAL. Star Trackers (and other similar optical systems)
which use CCD detectors, sometimes must locate a PSF centroid to
within a small fraction of a CCD pixel. For these systems the
designer may introduce specific levels of rotationally symmetric
aberration such that the PSF image is spread out over several
detector pixels while at the same time maintaining PSF symmetry.
The Pixel Linearity Analysis commands described below provide a
method for computing this PSF centroid location based upon an
"n"x"n" grid of pixels and comparing this centroid position to the
true centroid position. The difference between the true centroid
position and the centroid position computed from the nxn array of
pixels is called Linearity or Centroid Error. This error varies
with the position of the PSF within a pixel in the nxn grid of
pixels. The program computes this linearity error for a number of
sub-pixel positions within a pixel for the nxn grid of pixels,
displays these errors and then computes and displays an RMS
centroid error. The current algorithm used is a first moment or
arithmetic mean algorithm. A PSF must have been written to either
the PSF.DAT or SPSF.DAT file before a Pixel Linearity Analysis can
be performed. The dimensions of a sub-pixel are taken to be the PSF
grid spacing value set during the PSF calculation by the values
"nrd", "tgr" and the shortest wavelength and the system f/number.
There are two commands which control pixel linearity Analysis.
There are :</span></p>
<p class="c3"><span class="c1">PIXEL , m , n</span> <span class=
"c2">- The "PIXEL" command is used to set up or specify "m" the
number of sub-pixels per pixel and "n" the number of pixels in the
CCD window. "n" specifies the "n"x"n" grid of pixels mentioned
above. If the "PIXEL" command is not issued, then the default
values for "m" and "n" will be 3 and 3 respectively. &nbsp;"m" must
always be an odd integer. "n" may be even or odd.</span></p>
<p class="c3"><span class="c1">CENTROID (LSF or SLFS or PSF or
SPSF)</span><span class="c2">&nbsp;- The "CENTROID" command causes
a Pixel Linearity Analysis to be performed and the results sent to
the screen or other current output device. If no optional qualifier
word is issued (the same as using qualifier word "LSF"), the
analysis is performed using the LSF data stored in the PSF.DAT
file. If the qualifier "SLSF" is issued, the analysis is performed
using the "streaked" LSF data stored in the SPSF.DAT file. If the
qualifier word "PSF" is issued, the PSF data in file PSF.DAT is
used and if the qualifier word "SPFS" is used, the streaked PSF
data in the file SPSF.DAT is used. Existing Point Spread Functions
stored in the files PSF.DAT or SPSF.DAT may be interpolated from
their odd grids to even grids with the "PSFINT" and "PSFINTS"
commands. The grid extents of these interpolated PSF's will be set
to "pgr"+1. If this leads to PSF extrapolation rather than
interpolation, then the extrapolated values will be set to
zero.</span></p>
<p class="c3"><span class="c1">PSFINT</span><span class=
"c2">&nbsp;and</span> <span class="c1">PSFINTS</span><span class=
"c2">&nbsp;- "PSFINT" causes interpolation of the file PSF.DAT to
an even grid. PSFINTS causes interpolation of the file SPSF.DAT (a
streaked PSF) to an even grid. The new interpolatied PSF is output
to the file IPSF.DAT.</span></p>
<p class="c3"><span class="c10">STREHL RATIO</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- There are two ways in
which the STREHL ratio of the current lens database may be
computed. The exact method and the approximate method. The exact
method is described first. In this method, the STREHL ratio of an
optical system is exactly defined to be the ratio of the peak value
of the diffraction point spread function of the aberrated optical
system to the peak value of the diffracting point spread function
of the same system in the absence of aberrations.</span></p>
<p class="c3"><span class="c1">STREHL (ACC or ACCNOOB or
NOOB)</span><span class="c2">&nbsp;- After a field of view position
is defined using &nbsp;an "FOB" command, the "STREHL" command
calculates, displays, and places into the X-register, the true
value of the current optical system STREHL ratio. The PSFs which
are used in this calculation are based upon PSF parameter values
which would have been used if the "PSF" command had been issued. If
"STREHL" is issued with the qualifier words "ACC" or "ACCNOOB", the
STREHL ratio value will not be displayed. Issued with the qualifier
words "NOOB" or "ACCNOOB" causes the strehl ratio calculation to
ignore all system obscurations. The second method is an approximate
method based upon the RMS wavefront error computed when a CAPFN
(Complex Aperture Function) &nbsp;is produced. After appropriate
"FOB" and "CAPFN" commands have been issued, the &nbsp;approximate
STREHL ratio (see, Born and Wolf, Principles of Optics, Programing
Press) may be calculated using the "APSTREHL" command. This
approximation is generally valid for systems for which the RMS
wavefront error does not exceed 0.1 wave. For monochromatic
systems, there is an approximate relationship between the RMS
wavefront error and STREHL ratio.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c14 c2">This approximate relationship
is:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 287.27px; height: 45.13px;">
<img alt="" src="rt_images/image9.png" style=
"width: 287.25px; height: 45.11px; margin-left: 0.01px; margin-top: 0.01px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3"><span class="c2">where</span> <span class=
"c9"></span><span class="c2">&nbsp;is the RMS wavefront error in
waves.</span></p>
<p class="c3"><span class="c14 c2">For polychromatic systems,
polychromatic RMS wavefront error is given by:</span></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 111.73px; height: 95.40px;">
<img alt="" src="rt_images/image10.png" style=
"width: 111.73px; height: 95.39px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3"><span class="c14 c2">The summations are performed
over all non-zero weighted wavelengths in the current lens database
and:</span></p>
<p class="c3"><span class="c14 c2">are the wavelengths</span></p>
<p class="c3"><span class="c2">W</span><span class=
"c9 c22"></span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are the
wavelength spectral weights</span></p>
<p class="c3"><span class="c9"></span><span class=
"c9 c22"></span><span class=
"c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are the
monochromatic RMS wavefront values at each individual
wavelength.</span></p>
<p class="c3"><span class="c14 c2">is measured in waves at the
weighted integrated wavelength which is given by:</span></p>
<p class="c3 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 101.27px; height: 91.80px;">
<img alt="" src="rt_images/image11.png" style=
"width: 101.26px; height: 91.79px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c1">APSTREHL (ACC)</span><span class=
"c2">&nbsp; - The "APSTREHL" command computes, displays and stores
in the X-register, the approximate STREHL ratio based upon the RMS
wave front error computed by the last issuance of the "CAPFN"
command. If "APSTREHL" is issued with the qualifier word "ACC", the
approximate STREHL ratio value will not be displayed.</span></p>
<p class="c12"><span class="c10">DIFFRACTION ENERGY
DISTRIBUTIONS</span></p>
<p class="c12"><span class="c10">ENCIRCLED ENERGY</span></p>
<p class="c3"><span class="c1">DRED (N) ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y</span><span class="c2">&nbsp;- The
&nbsp;"DRED" command produces a radial energy distribution (energy
versus radial distance from the center of the PSF) using the
current diffraction PSF data. "</span><span class=
"c9"></span><span class="c2">E" specifies the percent energy
increments to be displayed. The default for "</span><span class=
"c9"></span><span class="c2">E" is 10.0 (percent). Maximum and
minimum allowed values for "</span><span class=
"c9"></span><span class="c2">E" are 100.0 (percent) and 1.0
(percent), respectively. "</span><span class=
"c9"></span><span class="c2">X" and "</span><span class=
"c9"></span><span class="c2">Y" are interpreted as linear offsets
(in lens units for focal systems and radians for a focal systems)
from the center of the PSF If the qualifier word "N" is used, no
output is generated. After tabular data is generated with the
"DRED" command, it may be graphically displayed using the "PLTRED"
command.</span></p>
<p class="c3"><span class="c1">DRED ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y</span><span class="c2">&nbsp;- The
"DRED ACC" command produces no display. "DRED ACC" returns to the
X-register (accumulator), the radius of the circle which encloses
"E" percent energy. All the above comments concerning
"</span><span class="c9"></span><span class="c2">X" and
"</span><span class="c9"></span><span class="c2">Y" apply in the
same way as for the "DRED" command.</span></p>
<p class="c12"><span class="c10">ENSQUARED ENERGY</span></p>
<p class="c3"><span class="c1">DREDSQ (N) ,</span> <span class=
"c15"></span><span class="c1">E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y</span><span class="c2">&nbsp;- The
&nbsp;"DREDSQ" command produces an ensquared energy distribution
(ensquaring square side length, centered at the PSF center, versus
energy) using the current PSF data. "</span><span class=
"c9"></span><span class="c2">E" specifies the percent energy
increments to be displayed. The default for "</span><span class=
"c9"></span><span class="c2">E" is 10.0 (percent). Maximum and
minimum allowed values for "</span><span class=
"c9"></span><span class="c2">E" are 100.0 (percent) and 1.0
(percent), respectively. "</span><span class=
"c9"></span><span class="c2">X" and "</span><span class=
"c9"></span><span class="c2">Y" are interpreted as linear offsets
(in lens units for focal systems and radians for afocal systems)
from the center of the PSF. If the qualifier word "N is used, no
output is generated.</span></p>
<p class="c3"><span class="c1">DREDSQ ACC , E ,</span> <span class=
"c15"></span><span class="c1">X ,</span> <span class=
"c15"></span><span class="c1">Y</span><span class="c2">&nbsp;- The
"DREDSQ ACC" command produces no display. "DREDSQ ACC" returns to
the X-register (accumulator), the side length of the square which
encloses "E" percent energy. All the above comments concerning
"</span><span class="c9"></span><span class="c2">X" and
"</span><span class="c9"></span><span class="c2">Y" apply in the
same way as for the "DREDSQ" command. After tabular data is
generated with the "DREDSQ" command, it may be graphically
displayed using the "PLTRED" command.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">INVERSE DISTRIBUTIONS ENSQUARED
ENERGY</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- In all of the above energy distribution commands, the
qualifier words "ACC" and "CACC" were used to return to the
X-register, the size of the circle or square which encircled or
ensquared the percent energy specified in numeric word #1. If,
instead, the qualifier words "ACCX" and "CACCX" are used, then,
commands return to the X-register either the percent energy
encircled by the circle whose radius is specified in numeric word
#1 or the percent energy ensquared by the square whose side length
was specified in numeric word #1.</span></p>
<p class="c12"><span class="c10">PSF CENTER</span> <span class=
"c2">&nbsp;- In all of the above energy distribution commands, the
PSF is considered to be centered at the chief ray position on the
image surface unless the "RSPH" command has been used to remove
wave front tilt or wave front tilt and defocus from the wave
front.</span></p>
<p class="c3"><span class="c10">ILLUMINATION</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- Illumination analysis
is generally performed at the CMD level of the program using a
specialized set of CMD level commands.</span></p>
<p class="c3"><span class="c10">ILLUMINATION RAY
TRACING</span><span class="c21">&nbsp; -</span> <span class="c2">It
is extremely important to remember the following general
information concerning the nature of non-global coordinate,
trigonometric, illumination ray tracing as it is implemented
here:</span></p>
<p class="c3"><span class="c14 c2">Ray coordinates at any surface
are represented in the local coordinate system of that
surface.</span></p>
<p class="c3"><span class="c14 c2">Illumination spot diagram data
is represented in the coordinate system of the final surface of the
system.</span></p>
<p class="c3"><span class="c14 c2">The commands which follow are
used to:</span></p>
<a id="t.c1312254b94094403442903d608130c5efc3b50d"></a><a id=
"t.7"></a>
<table class="c39">
<tbody>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">(1)</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">DEFINE AN OBJECT
POINT</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">(2)</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">TRACE AN INDIVIDUAL
RAY</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">(3)</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">SET SPOT DIAGRAM
PARAMETERS</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">(4)</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">TRACE ILLUMINATION SPOT
DIAGRAMS</span></p>
</td>
</tr>
<tr class="c29">
<td class="c7" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">(5)</span></p>
</td>
<td class="c16" colspan="1" rowspan="1">
<p class="c3"><span class="c14 c2">DISPLAY SPOT DIAGRAM
RESULTS</span></p>
</td>
</tr>
</tbody>
</table>
<p class="c3 c17"></p>
<p class="c3"><span class="c14 c2">Illumination rays are defined
using relative fractional object surface coordinates and either
relative fractional coordinates at surface #1 or angular ray
coordinates in degrees measured relative to the chief ray. Relative
fractional object coordinates are entered as fractions of the
reference object height at the object surface using the "IFOB"
command. Relative surface #1 coordinates and angular ray
coordinates are entered either in lens units or degrees. Angular
ray coordinates are measured in elevation and azimuth with respect
to the current illumination chief ray defined by the last IFOB
command.</span></p>
<p class="c3"><span class="c10">NO RAY AIMING</span><span class=
"c2">&nbsp;- Unlike the ray aiming used and described in the CMD
section of this manual, illumination rays are not iteratively
aimed. They are fired in predetermined directions. They either pass
through the optical system or they do not, due to a number of
different ray failure modes including ray blockages by clear
apertures and obscurations.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c12"><span class="c10">ILLUMINATION OBJECT POINT (IFOB
COMMAND)</span></p>
<p class="c3"><span class="c1">IFOB , Y, X , Z ,
n</span><span class="c2">&nbsp;- The "IFOB" command must be issued
before any illumination rays or illumination spot diagrams can be
traced. This command defines the object point from which subsequent
illumination rays will be traced. It stays in effect until another
"IFOB" command is issued or until it is canceled by some other
program option such as "UPDATE LENS". &nbsp;"Y", "X" AND "Z" are
the fractional y, x and z-coordinates of the object point measured
in the coordinate system of the object surface. If "Z" is zero, the
object point lies in the plane of the object surface. If "Z" is
+1.0, then the object point is a positive z-distance from the
object surface equal to the axial thickness of the current object
surface. If "Z" is -1.0, then the object point is a negative
z-distance from the object surface equal to the axial thickness of
the current object surface. Issued with the interrogator "?", the
"IFOB" command returns the last "IFOB" input data if a chief
illumination ray exists. The fifth numeric word entry, "m" is used
to specify the relative intensity of the reference ray. The default
value is 1.0. It may be set to any non-zero value less than or
equal to 1.0. Unlike the "FOB" command, no automatic ray is traced
when the "IFOB" command executes. The choice of "qualifier word"
selects the specific output to be displayed as shown in the
following table:</span></p>
<p class="c3"><span class="c1">NFOB , l , m , n</span><span class=
"c2">&nbsp;- The "NFOB" command may be issued before illumination
rays or illumination spot diagrams are traced. It is used to
specify the "l", "m" and "n"-direction cosines of the chief ray
since no ray aiming is performed during illumination ray tracing.
By default, "l" and "m" are zero and "n"=1.0.</span></p>
<p class="c3"><span class="c10">ILLUMINATION RAYS</span>
<span class="c2">&nbsp;- Single illumination rays may be traced in
an arbitrary order following an "IFOB" command. Single illumination
ray trace commands generate no display except for the "IRAY CAOB"
and "IRAYA CAOB" commands. Results of single ray traces may be
displayed using the usual single ray data display commands which
are described in the CMD section. There are four single
illumination ray commands. They are: "IRAYA", "IRAYA CAOB", "IRAY"
and "IRAY" CAOB" The &nbsp;"IRAYA" and "IRAYA CAOB" commands are
most useful when the object is "buried" inside surface #1 such as
when a lamp filament is at one focus of an elliptical reflector and
the image or other following optics are placed near or beyond the
second focus. These two commands allow illumination rays to be
trace into hyper-hemispherical directions. The "IRAY" and "IRAY
CAOB" commands, on the other hand, are very much like the "RAY" and
"RAY CAOB" commands described in the CMD section. They have most
use when the object surface is distantly removed from surface #1
and surface #1 subtends substantially less than 180 degrees as seen
from the object surface.</span></p>
<p class="c3"><span class="c1">IRAYA , el , az , n ,
I</span><span class="c2">&nbsp;- The "IRAYA" command is used to
specify illumination ray tracing in a particular direction with
respect to the chief ray direction. "el" and "az" are the angular
elevation and azimuth angles (in degrees) measured from the
illumination chief ray direction as defined by the last "IFOB"
command. "n" is the wavelength number. If no entry is made for "n",
the ray is traced at the control wavelength number. "I" is the
relative ray intensity &nbsp;which can be set to any non-zero value
less than or equal to 1.0. The "az" angle is measured positive from
0 through 360 degrees (counter-clockwise) in a plane perpendicular
to the direction of the chief ray. &nbsp;This definition is shown
in the following figure. The positive Z-axis is coming out of the
figure.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c11 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 360.60px; height: 360.60px;">
<img alt="" src="rt_images/image12.png" style=
"width: 360.53px; height: 360.53px; margin-left: 0.04px; margin-top: 0.04px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c12 c17"></p>
<p class="c11"><span class="c2">(AZ) IRAYA Angle
Definition</span></p>
<p class="c12"><span class="c14 c2">The "el" angle is measured from
0 through 180 degrees from the direction of the current chief ray
toward the IRAY direction.</span></p>
<p class="c12 c17"></p>
<p class="c11"><span style=
"overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 354.33px; height: 355.27px;">
<img alt="" src="rt_images/image13.png" style=
"width: 354.26px; height: 355.20px; margin-left: 0.04px; margin-top: 0.04px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);"
title=""></span></p>
<p class="c11 c17"></p>
<p class="c11"><span class="c2">(EL) IRAYA Angle Definition
&nbsp;</span></p>
<p class="c3"><span class="c1">IRAYA CAOB , el , az , n ,
I</span><span class="c2">&nbsp;- The "IRAYA CAOB" command works
just like the standard "IRAYA" command, except that it causes
checking for ray blockages due to clear apertures and obstructions.
If a ray falls outside a clear aperture or within an obscuration, a
ray failure message will be generated, saved internally and
displayed. Clear apertures are not checked on the current object
surface or the current image surface by "IRAYA CAOB".</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c1">IRAY , Y, X, n ,
I</span><span class="c2">&nbsp;- The IRAY" command is very similar
to the "RAY" command described in the CMD section. "Y" and "X" are
the relative fractional surface #1 &nbsp;coordinates with respect
to the vertex of surface #1. "n" is the wavelength number. If no
entry is made for "n", the ray is traced at the control wavelength
number. All decenters and tilts and decentered clear apertures are
ignored by the "IRAY" command. "I" is the starting intensity of the
ray. It is assumed to be 1.0 by default. It may be set to any value
from 0.0 to 1.0.</span></p>
<p class="c3"><span class="c1">IRAY CAOB , Y, X, n ,
I</span><span class="c2">&nbsp;- The "IRAY CAOB" command works just
like the standard "IRAY" command, except that it causes checking
for ray blockages due to clear apertures and obstructions. If a ray
falls outside a clear aperture or within an obscuration, a ray
failure message will be generated, saved internally and displayed.
Clear apertures are not checked on the current object surface or
the current image surface by "IRAY CAOB".</span></p>
<p class="c3"><span class="c10">SINGLE RAY DATA
DISPLAY</span><span class="c2">&nbsp;- Individual illumination ray
data is displayed in exactly the same manner as all other single
ray data is displayed, using the single ray data display commands
described in the CMD section of this manual. Since differential
rays are not traced, OPD data may be meaningless and should be
ignored.</span></p>
<p class="c3"><span class="c10">DIFFERENTIAL
RAYS</span><span class="c2">&nbsp;- No differential rays are traced
when illumination rays are traced. No values based upon real
differential rays will be evaluated correctly based upon single
illumination rays.</span></p>
<p class="c3"><span class="c10">GLOBAL
COORDINATES</span><span class="c2">&nbsp;- Global ray tracing is
possible with illumination rays. See the global ray tracing
description in the CMD section of this manual.</span></p>
<p class="c3"><span class="c10">RAY DIAGNOSTICS</span><span class=
"c2">&nbsp;- The "FOBDUMP" and RAYDUMP" commands described in the
CMD section are available for diagnosing unexpected ray trace
results for illumination rays. See the description in the CMD
section of this manual.</span></p>
<p class="c3"><span class="c10">ILLUMINATION SPOT
DIAGRAMS</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- Illumination spot diagram ray tracing provides a means
to trace a random distribution of illumination rays through the
current lens system. Each ray in the distribution is aimed in a
random direction with respect to the current chief illumination
ray. Illumination spot diagram ray tracing is used to analyze
illumination distribution properties of the current lens in its
current active configuration. An "IFOB" command must be in effect
before spot diagrams can be traced. Illumination spot diagram rays
all have equal starting energy in the current version of the
program. For the current version of the program, all reflections
are assumed to be 100% efficient. There are no energy losses at
refracting surfaces. These limitations will be removed in a future
version of the program. Future versions will provide more control
over the illumination nature of the object surface(s). Should the
random number generator seed need be reset, use either the
"NEWSEED" or "SEED" commands in the CMD section of the
manual.</span></p>
<p class="c3"><span class="c1">ISPD , n</span><span class=
"c2">&nbsp;- The "ISPD" command causes a random distribution spot
diagram to be traced from the field position defined by the last
"IFOB" command. The maximum number of rays to be traced may be
issued as numeric word #1. The random grid of rays is spread over a
square which covers surface #1 so as to "fill" surface #1. If no
clear aperture is defined on surface #1, a temporary clear aperture
will be assigned just as is done with the "SPD" commands of the CMD
section. The default value for numeric word #1 is 1000. "ISPD" is
most useful when the object surface is far removed from surface #1
and surface #1 subtends less than 180 degrees when seen from the
object surface. This command uses "IRAY CAOB" ray
tracing.</span></p>
<p class="c3"><span class="c1">ISPDA , n , ang</span><span class=
"c2">&nbsp;- The "ISPDA" command causes a random distribution spot
diagram to be traced from the field position defined by the last
"IFOB" command. The maximum number of rays to be traced may be
issued as numeric word #1. The maximum cone half-angle may be
issued as numeric word #2. The default value for numeric word #1 is
1000. The cone half-angle must be explicitly input by the user.
"ISPDA" is most useful when the object surface is near or "inside"
surface #1 and when surface #1 subtends more than 180 degrees as
seen from the object surface. This command uses "IRAYA CAOB" ray
tracing.</span></p>
<p class="c3"><span class="c10">DISPLAYING
RESULTS</span><span class="c21">&nbsp;</span><span class=
"c2">&nbsp;- Illumination spot diagrams are stored in the same
internal file locations as regular spots diagram results. The
illumination spot diagrams may therefore be "saved" and "saved and
summed" using the "SPDSAVE" and "SPDADD" commands described in the
CMD section. The illumination spot diagrams and the "saved and
summed" illumination spot diagrams may be graphically displayed
using the " PLTSPD" command. The spot diagrams may be written to
files just as can be done for non-illumination stop diagrams. This
is the limit of the illumination ray tracing option in the current
version of the program. These capabilities will be expanded in a
later version of the program.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c10">IMAGING</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- The following commands
perform visualization of optical system imaging
performance</span></p>
<p class="c3"><span class="c1">COLOR (MONO</span> <span class=
"c6">or</span><span class="c1">&nbsp;RGB)</span> <span class="c2">-
The "COLOR" command specifies that the imagery will either be 8 bit
monochrome (MONO) or 24 bit color (RGB). The wavelength used when
MONO is set is the control wavelength. The wavelengths used in RGB
mode are the control wavelength for Green, the first wavelength
number in the secondary wavelength pair for Blue and the second
wavelength in the secondary wavelength pair for Red. 8 bit data is
written as 24 bit data with the R, G abd B values identical. The
default color mode is MONO.</span></p>
<p class="c3"><span class="c1">IOBJECT , X , Y ,</span>
<span class="c15"></span><span class="c1">x ,</span> <span class=
"c15"></span><span class="c1">y</span> <span class="c2">- The
"OBJECT" command defines a pixelated reference "Object Field of
View". "X" and "Y" are the full extent dimensions of the "Object
Field of View", assumed symmetric about the optical axis defined by
the central chief ray traced at the control wavelength and
intersecting the object surface. "</span><span class=
"c9"></span><span class="c2">x" and "</span><span class=
"c9"></span><span class="c2">y" are the "x" and "y" dimension of
each pixel. All pixels are "rectangular". All values must be
explicitly input. There is no dead space between pixels. If "x" and
"y" are not integer divisors of "X" and "Y", "X" and "Y" will be
adjusted so that they are. All "Object Plane" dimensions" are in
lens units. The extents are measured from center of pixel
positions.</span></p>
<p class="c3"><span class="c1">IOBJECTN , X , Y , Nx , Ny</span>
<span class="c2">- The "OBJECTN" command defines a pixelated
reference "Object Field of View". "X" and "Y" are the full extent
dimensions of the "Object Field of View", assumed symmetric about
the optical axis defined by the central chief ray traced at the
control wavelength. "Nx" and "Ny" are the number of pixels in the x
and y-directions. All pixels are "rectangular". All values must be
explicitly input. There is no dead space between pixels. All
"Object Plane" dimensions" are in lens units. The extents are
measured from center of pixel positions.</span></p>
<p class="c3"><span class="c1">IOBJECTD</span> <span class=
"c15"></span><span class="c1">x ,</span> <span class=
"c15"></span><span class="c1">y, Nx , Ny</span> <span class="c2">-
The "IOBJECTD" command defines a pixilated reference Object Field
of View. "</span><span class="c9"></span><span class="c2">x" and
"</span><span class="c9"></span><span class="c2">y" are the "x"
and "y" lengths of a single pixel". The "Object Plane" is assumed
symmetric about the optical axis defined by the central chief ray
traced at the control wavelength. "Nx" and "Ny" are the number of
pixels in the x and y-directions. All pixels are "rectangular" All
values must be explicitly input. There is no dead space beteween
pixels. All "Object Plane" dimensions" are in lens
units.</span></p>
<p class="c3"><span class="c1">OBJVAL (M, R, G or B) , i , j ,
value</span> <span class="c2">- The "OBJVAL" command sets the
intensity value of the "i"th row and "j"th column object space to
"value" where "value" ranges from 0 (zero intensity) to 255
(maximum intensity). M specifies MONO, R specifies Red, G specifies
Green and B specifies Blue.</span></p>
<p class="c3"><span class="c1">IIMAGE , X , Y ,</span> <span class=
"c15"></span><span class="c1">x ,</span> <span class=
"c15"></span><span class="c1">y</span> <span class="c2">- The
"IMAGE" command defines a pixelated "Image Plane", "X" and "Y" are
the full extent dimensions of the "Image Plane", assumed symmetric
about the optical axis defined by the central chief ray traced at
the control wavelength. "</span><span class=
"c9"></span><span class="c2">x" and "</span><span class=
"c9"></span><span class="c2">y" are the "x" and "y" lengths of
each image plane pixel. All pixels are "rectangular". &nbsp;All
values must be explicitly input. If "x" and "y" are not integer
divisors of "X" and "Y", "X" and "Y" will be adjusted so that they
are. All "Image Plane" dimensions" are in lens units. The extents
are measured from center of pixel positions.</span></p>
<p class="c3"><span class="c1">IIMAGEN , X , Y , Nx , Ny</span>
<span class="c2">- The "IMAGEN" command defines a pixelated "Image
Plane", "X" and "Y" are the full extent dimensions of the "Image
Plane", assumed symmetric about the optical axis defined by the
central chief ray traced at the control wavelength. "Nx" and "Ny"
are the number of pixels in the x and y-directions. All pixels are
"rectangular" All values must be explicitly imput. There is no dead
space beteween pixels. All "Image Plane" dimensions" are in lens
units. The extents are measured from center of pixel
positions.</span></p>
<p class="c3"><span class="c1">IIMAGED</span> <span class=
"c15"></span><span class="c1">x ,</span> <span class=
"c15"></span><span class="c1">y, Nx , Ny</span> <span class="c2">-
The "IMAGED" command defines a pixelated "</span><span class=
"c9"></span><span class="c2">x" and "</span><span class=
"c9"></span><span class="c2">y" are the "x" and "y" lengths of a
single pixel". The "Image Plane" is assumed symmetric about the
optical axis defined by the central chief ray traced at the control
wavelength. "Nx" and "Ny" are the number of pixels in the x and
y-directions. All pixels are "rectangular" All values must be
explicitly imput. There is no dead space beteween pixels. All
"Image Plane" dimensions" are in lens units.</span></p>
<p class="c3"><span class="c1">IMTRACE1 &nbsp;</span><span class=
"c2">- The "IMTRACE1" command causes one chief ray to be traced, at
each wavelength set by the COLOR command, from each object plane
pixel, through the current system, and terminating at the image
plane. &nbsp;The image is then automatically built using the
resulting "Image Plane" array. Since only chief rays are traced,
only lateral chromatic aberration and distortion can be represented
with this image tracing command.</span></p>
<p class="c3"><span class="c1">IMTRACE2</span> <span class="c2">-
The "IMTRACE2" command is exactly like "IMTRACE1 , 1" except that
an on-axis Point Spread Functions is generated (one for MONO and
three for RGB mode) and are then used in the image plane, image
reconstruction. The assumption is that the PSF is uniform over the
field of view.</span></p>
<p class="c3"><span class="c1">IMTRACE3</span> <span class="c2">-
The "IMTRACE3" command is exactly like "IMTRACE2 , 1" except that
after each chief ray is traced, a diffraction based Point Spread
Function is generated from the object point (one for MONO and three
for RGB mode) and are then used in the image plane, image
reconstruction. This is slow and should only be used when the PSF
varies significantly across the field of view.</span></p>
<p class="c3"><span class="c1">PSFTOIMG , n</span> <span class=
"c2">- The "PSFTOIMG" command causes the last Point Spread Function
generated with a "PSF" command to be added to one of four storage
levels in the Image Array designated by "n". "n" may be 1, 2, 3 or
4.</span></p>
<p class="c3"><span class="c1">INTTOIMG , n</span> <span class=
"c2">- The "INTTOIMG" command causes the data saved in the
INTEN.DAT file generated by an "INTEN" command to be added to one
of four storage levels in the Image Array designated by "n". "n"
may be 1, 2, 3 or 4.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3 c17"></p>
<p class="c3"><span class="c1">IMSLICE (X</span> <span class=
"c6">or</span><span class="c1">&nbsp;Y</span> <span class=
"c6">or</span><span class="c1">&nbsp;DIAG) , offset , color # ,
k</span> <span class="c2">- The "IMSLICE" command a slice through
the current Image Array to be plotted. The slice may be in the "X"
or "Y" or "DIAG" direction. The offset is measurd from the bottom
(X) or the left (Y) edge of the array. The offset defaults place
the slice through the center of the Image Array. "DIAG" takes no
user supplied offset. The offset is in pixels. Color # is the1, 2
or 3 for R, G or B. The default color # is 2. If "k" is not
explicitly input, the resulting plot will be linear. I "k" is
explicitly input, the plot will be log10 intensity.</span></p>
<p class="c3"><span class="c1">LMINUSR , threshold , color #</span>
<span class="c2">- The "LMINUSR" command plots the results of a
left minus right analysis. The LEFT values are the 1 and 2
positions in the Image Array, the RIGHT values are the 3 and 4
positions. The "theshold" value (default 0.001) allows the user to
elliminate small stored values. The color # is as in the IMSLICE
command.</span></p>
<p class="c3"><span class="c1">OTOBMP (filename with no
extension)</span><span class="c2">&nbsp;</span><span class=
"c1">&nbsp;</span><span class="c2">- The "OTOBMP" command causes
the current object field of view array to be written as a bitmapped
.BMP file. If the color mode is MONO, a monochromatic, 24 bit file
will be created with identical R, G and B values. If the color mode
is RGB, an RGB 24 bit, bitmapped file will be created. The file
name will be "filename" with a BMP file extension.</span></p>
<p class="c3"><span class="c1">ITOBMP (filename with no
extension)</span><span class="c2">&nbsp;</span><span class=
"c1">&nbsp;</span><span class="c2">- The "ITOBMP" command causes
the current image plane array to be written as a bitmapped .BMP
file. If the color mode is MONO, a monochromatic, 24 bit file will
be created with identical R, G and B values. If the color mode is
RGB, an RGB 24 bit, bitmapped file will be created. The file name
will be "filename" with a BMP file extension.</span></p>
<p class="c3"><span class="c1">OFROMBMP (filename with no
extention) , X-extent</span><span class=
"c2">&nbsp;</span><span class="c1">&nbsp;</span><span class="c2">-
The "OFROMBMP" command causes the file named "filename".BMP to be
read into the current object field of view array where it can be
used as a source object field for image simulations. &nbsp;The full
X-extent of the object field of view array, in current lens units
in the object surface plane, is specified by "X". There is no
default for "X". The dimensions of the .BMP file are used to
automatically specify the</span> <span class=
"c9"></span><span class="c2">x,</span> <span class=
"c9"></span><span class="c2">y and full Y-extent of the object
field of view array. The full extents are assumed to be measured
from center of pixel positions.</span></p>
<p class="c3"><span class="c1">IFROMBMP (filename with no
extension) , X-extent</span><span class=
"c2">&nbsp;</span><span class="c1">&nbsp;</span><span class="c2">-
The "IFROMBMP" command causes the file named "filename".BMP to be
read into the current image array. The full X-extent of the image
array, in current lens units in the image surface plane, is
specified by "X". There is no default for "X". The dimensions of
the .BMP file are used to automatically specify the</span>
<span class="c9"></span><span class="c2">x,</span> <span class=
"c9"></span><span class="c2">y and full Y-extent of the image
array. The full extents are assumed to be measured from center of
pixel positions.</span></p>
<p class="c3"><span class="c1">PLTOBJ</span> <span class=
"c2">&nbsp;</span><span class="c1">&nbsp;</span><span class="c2">-
The "PLTOBJ" command causes the object array to be
plotted.</span></p>
<p class="c3"><span class="c1">PLTIMG , trim pixels</span>
<span class="c2">&nbsp;</span><span class=
"c1">&nbsp;</span><span class="c2">- The "PLTIMG" command causes
the image array to be plotted. A non-zero value for "trim pixels"
causes that many pixels to be trimmed from each edge of the image.
This is used to trim off the dark edge caused by the fact that the
object plane was not false padded.</span></p>
<p class="c3"><span class="c1">BMPREADR (name of .BMP
reader)</span><span class="c2">&nbsp;</span><span class=
"c1">&nbsp;</span><span class="c2">- The "BMPREADER" command is
used to set the name of the program bit map reader application. The
current application is BMP.EXE and is provided with this
program.</span></p>
<p class="c3"><span class="c10">IMAGING DEMO</span><span class=
"c21">&nbsp;</span><span class="c2">&nbsp;- The included file
"IMDEMO.DAT" contains a working demonstration of PSF imaging using
the 24 bit .BMP file "PORT.BMP". "PORT.BMP" is a 320x240 RGB
bitmapped image of the L. A. Airport area. Loading the demo by
typing "</span><span class="c21 c23">IN FILE
IMDEMO.DAT</span><span class="c2">" causes a simple perfect (no
aberrations, just diffraction effects) lens file to be loaded and
stored in lens library file number 999. It then loads three macros
named IMTEST1, IMTEST2 and IMTEST3 into the macro library. IMTEST1
performs perfect IMTRACE1 chief ray imaging. IMTEST2 assumes that
the PSF is essentially uniform over the object field of view (as it
really is) and performs IMTRACE2 imagery. IMTEST3 performs a new
PSF for every 10th pixel row and column and performs IMTEST3
imagery. This is the slowest type of image reconstruction and is
appropriate when aberrations are present which vary significantly
over the field of view. The demo is run by typing
"</span><span class="c21 c23">IMTEST1</span> <span class=
"c6">or</span><span class="c21 c23">&nbsp;IMTEST2</span>
<span class="c6">or</span><span class=
"c21 c23">&nbsp;IMTEST3</span><span class="c2">". The object image
is first displayed to the screen. After you close this object file
view, PSFs are created at each wavelength and then are convolved
with the bit mapped file. This takes seconds to &nbsp;min on a P4
running at 2 GHz. The PSF is significantly larger than a pixel and
so the resultant image is degraded, as expected. The TGR is set to
512. NRD is set to 64 and pgr is set to 91. PGR was set to 91
empirically to minimize aliasing during image reconstruction. The
resultant image is then displayed to the screen. Setting the SAY
value to greater than 1.0, speeds up the optical system and thus
reduced the PSF size and the image degradation.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3 c17"></p>
<p class="c12"><span class="c36">THE MULTI RAY
TRACE</span><span class="c50 c43">&nbsp;</span><span class=
"c43">&nbsp;- Multiple rays may be traced following an "FOB"
command. Furthermore they may be traced from multiple FOV
positions. The multiple ray trace commands generate no display. The
"MFOBS" command is used to set up multiple FOV positions. The MRAYS
command is used to set up multiple ray definitions. These commands
populate a ray history file. They have no other purpose.</span></p>
<p class="c3"><span class="c20">MFOBS , Y, X , n ,
m</span><span class="c43">&nbsp; - If the number of FOBs to be
traced ("m") is 1, then "Y" and "X" are the FOB values from which
the chief ray will be traced. If the number of FOBs to be traced
("m") is greater than 1, then "Y" and "X" are the absolute values
of &nbsp;fractional reference object heights. "n" is the wavelength
number. If no entry is made for "n", the rays are traced at the
control wavelength number. "m" is the dimension of an "m" x "m"
array of rays extending from FOBs -X to +X and from -Y to
+Y.</span></p>
<p class="c3"><span class="c20">MRAYS (CAOB) , Y, X, n , I ,
m</span><span class="c43">&nbsp; - If the number of RAYs to be
traced ("m") is 1, then "Y" and "X" are the fractional reference
aperture heights through which the ray will be aimed. If the number
of rays to be traced ("m") is greater than 1, then "Y" and "X" are
the absolute values of &nbsp;fractional reference surface
coordinates. "n" is the wavelength number. If no entry is made for
"n", the rays are traced at the control wavelength number. "I" is
the starting ray intensity which may be set to any non-zero value
less than or equal to 1.0. The default value for "I" is 1.0. If the
reference surface has no clear aperture assigned, the actual
reference ray coordinates will be calculated based upon the
reference aperture height set by the paraxial ray trace. If a clear
aperture has been assigned to the reference surface, the actual
reference ray coordinates will be calculated based upon the
fractional reference aperture height relative to the center of the
clear aperture. "m" is the dimension of an "m" x "m" array of rays
extending from -X to +X and from -Y to +Y. If the qualifier word
"CAOB" is used, clear aperture checking is performed. Rays which
fail are not added to the ray history.</span></p>
<p class="c3"><span class="c20">MTRACE</span><span class=
"c43">&nbsp; - The "MTRACE" command is used to execute a multi-ray
trace.</span></p>
<p class="c3"><span class="c20">MTRACEI , n , D , i
&nbsp;</span><span class="c43">- The "MTRACEI" command is used to
execute a multi-ray trace and perform an intensity calculation at
the current spot diagram surface specified by "i". By default, "i"
is the final surface of the system (see the SPD command) for each
FOB specified in the "MFOBS" command. "n" is the dimensionality of
the 2-D intensity array centered at the spot diagram surface. "D"
is the side length of the intensity map in lens units at the spot
diagram surface. The intensity map is always square. Ray
intensities are summed into this array. The angle of incidence (or
the average when more than one ray impacts an intensity grid
square, is also stored, along with its X and
Y-components.</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">A report is also sent to the default
output device. The report comprises:</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">FOB#, total summed intensity at
surface i from that FOB, p-v intensity variation across surface,
number of rays stricking surface and average intensity at surface
"i"</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">The final line reports for all
FOBs:</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">Total summed intensity at surface
"i", p-v intensity variation across surface, number of rays
stricking surface and average intensity at surface "i"</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">During the execution of the
"MTRACEI" command, all ray aiming and differential ray tracing is
temporarily turned "off".</span></p>
<p class="c3 c17"></p>
<p class="c8"><span class="c36">THE SCREEN
SURFACE</span><span class="c50 c43">&nbsp;</span></p>
<p class="c3"><span class="c20">SCREEN (YES</span> <span class=
"c43 c50">or</span><span class="c20">&nbsp;ON</span> <span class=
"c50 c43">or</span><span class="c20">&nbsp;NO</span> <span class=
"c50 c43">or</span><span class="c20">&nbsp;OFF) , i , d , h , s ,
ang</span> <span class="c43">&nbsp;- A screen surface comprises a
surface property which diminished the intensity of the radiation
passing through that surface. It acts in a manner similar to an
opaque plate with many small circular holes drilled in it on a
uniform rectangular grid. "i" specifies which surface the screen
will be attached to. "d" is the hole diameter. "h" is the screen's
plate thickness. "s" is the x and y-hole spacing on an assumed
rectangular grid. The default qualifier word is "ON". "SCREEN"
issued with a "?" will return the "SCREEN" setting for the current
lens prescription. The screen surface is not zoomable.</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">Rays are not blocked &nbsp;by the
screen surface but the ray intensity of a group of rays
representing a beam of light will be reduced by the following
factor:</span></p>
<p class="c11"><img src="rt_images/image5.png"></p>
<p class="c3"><span class="c43">AOI is the angle of incidence of
each ray striking the screen. If AOI is 90 degrees, the
Intensity-Reduction factor is 0.0. If the reduction factor goes
negative. it is automatically set to 0.0. Near field diffraction is
ignored. This is a slightly approximate representation of the true
Intensity-Reduction factor but it avoids the necessity of
performing a slow elliptical integral! "ang" is the angle of
incidence beyond which nothing gets through the screen and relates
to other screen geometry.</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c8"><span class="c36">RAY HISTORIES</span></p>
<p class="c8"><span class="c20">RHIST (YES</span> <span class=
"c50 c40 c43">or</span><span class="c20">&nbsp;ON</span>
<span class="c50 c40 c43">or</span><span class=
"c20">&nbsp;NO</span> <span class=
"c50 c40 c43">or</span><span class="c20">&nbsp;OFF</span>
<span class="c50 c40 c43">or</span><span class=
"c20">&nbsp;WRITE</span><span class="c50 c40 c43">&nbsp;
or</span><span class="c20">&nbsp;SWRITE)</span><span class=
"c43">&nbsp;- The "RHIST" command is used to turn ray history
saving "on" ("YES" or "ON") or "off" ("NO" or "OFF") The default is
"off". All ray data and differential ray data for all individual
rays traced using the "MRAYS" command is saved for all surfaces.
The qualifier word "WRITE" causes all this saved ray data to be
written to a file named RAYHIST.DAT". One header line with the
total number of rays in I10 format followed by the total number of
surfaces in I4 format followed by the total number of field of view
positions in I10 format. The header line is then followed (number
of rays)x(number of the final surface+1) number of lines, each
holding the following 93 data items:</span></p>
<p class="c8"><span class="c4">Surface #</span></p>
<p class="c8"><span class="c4">Sequential Ray #</span></p>
<p class="c8"><span class="c4">1. &nbsp;Local
X-coordinate</span></p>
<p class="c8"><span class="c4">2. &nbsp;Local
Y-coordinate</span></p>
<p class="c8"><span class="c4">3. &nbsp;Local
Z-coordinate</span></p>
<p class="c8"><span class="c4">4. &nbsp;Local L-Direction Cosine
after interaction</span></p>
<p class="c8"><span class="c4">5. &nbsp;Local M-Direction Cosine
after interaction</span></p>
<p class="c8"><span class="c4">6. &nbsp;Local N-Direction Cosine
after interaction</span></p>
<p class="c8"><span class="c4">7. &nbsp;Optical Path Length from
surface I-1 to surface I</span></p>
<p class="c8"><span class="c4">8. &nbsp;Physical length from
surface I-1 to surface I</span></p>
<p class="c8"><span class="c4">9. &nbsp;Cosine of angle of
incidence</span></p>
<p class="c8"><span class="c4">10. &nbsp;Cosine of Angle of
reflection, refraction or diffraction</span></p>
<p class="c8"><span class="c4">11. Marginal XZ-slope angle
(radians)</span></p>
<p class="c8"><span class="c4">12. Marginal YZ-slope angle
(radians)</span></p>
<p class="c8"><span class="c4">13. Surface normal
L-dircos</span></p>
<p class="c8"><span class="c4">14. Surface normal
M-dircos</span></p>
<p class="c8"><span class="c4">15. Surface normal
N-dircos</span></p>
<p class="c8"><span class="c4">16. Local X-coordinate before
interaction</span></p>
<p class="c8"><span class="c4">17. Local Y-coordinate before
interaction</span></p>
<p class="c8"><span class="c4">18. Local Z-coordinate before
interaction</span></p>
<p class="c8"><span class="c4">19. Local L-Direction Cosine before
interaction</span></p>
<p class="c8"><span class="c4">20. Local M-Direction Cosine before
interaction</span></p>
<p class="c8"><span class="c4">21. Local N-Direction Cosine before
interaction</span></p>
<p class="c8"><span class="c4">22. Optical Path Length fron NEWOBJ
surface to surface I</span></p>
<p class="c12"><span class="c14 c2">23. 1 for non-RV ray, -1 for RV
ray (direction of ray)</span></p>
<p class="c12"><span class="c14 c2">24. 1 for POSRAY, -1 for not
POSRAY (object distance negative)</span></p>
<p class="c12"><span class="c14 c2">25. Ray energy term</span></p>
<p class="c8"><span class="c4">26. Local XL-Direction Cosine after
interaction</span></p>
<p class="c8"><span class="c4">27. Local XM-Direction Cosine after
interaction</span></p>
<p class="c8"><span class="c4">28. Local XN-Direction Cosine after
interaction</span></p>
<p class="c8"><span class="c4">29. Local YL-Direction Cosine after
interaction</span></p>
<p class="c8"><span class="c4">30. Local YM-Direction Cosine after
interaction</span></p>
<p class="c8"><span class="c4">31. Local YN-Direction Cosine after
interaction</span></p>
<p class="c8"><span class="c4">32. (NOT USED ALL ZERO)</span></p>
<p class="c8"><span class="c4">33. (NOT USED ALL ZERO)</span></p>
<p class="c8"><span class="c4">34. Polarization Parallel
Modulus</span></p>
<p class="c8"><span class="c4">35. Polarization Perpendicular
Modulus</span></p>
<p class="c8"><span class="c4">36. Polarization Parallel
Phase</span></p>
<p class="c8"><span class="c4">37. Polarization Perpendicular
Phase</span></p>
<p class="c8"><span class="c4">38. Polarization angle in degrees
between Y-ray vector and the parallel plane</span></p>
<p class="c8"><span class="c4">39. - 50. (NOT USED ALL
ZERO)</span></p>
<p class="c3"><span class="c4">51. &nbsp;XZ-plane X-coordinate
chief differential trace</span></p>
<p class="c3"><span class="c4">52. &nbsp;XZ-plane Y-coordinate
chief differential trace</span></p>
<p class="c3"><span class="c4">53. &nbsp;XZ-plane Z-coordinate
chief differential trace</span></p>
<p class="c3"><span class="c4">54. &nbsp;XZ-plane L-dircos chief
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">55. &nbsp;XZ-plane M-dircos chief
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">56. &nbsp;XZ-plane N-dircos chief
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">57. &nbsp;YZ-plane X-coordinate
chief differential trace</span></p>
<p class="c3"><span class="c4">58. &nbsp;YZ-plane Y-coordinate
chief differential trace</span></p>
<p class="c3"><span class="c4">59. &nbsp;YZ-plane Z-coordinate
chief differential trace</span></p>
<p class="c3"><span class="c4">60. &nbsp;YZ-plane L-dircos chief
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">61. &nbsp;YZ-plane M-dircos chief
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">62. &nbsp;YZ-plane N-dircos chief
differential trace (after interaction)</span></p>
<p class="c3"><span class="c43">63. &nbsp;XZ-plane L-dircos chief
differential trace (before interaction)</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c4">64. &nbsp;XZ-plane M-dircos chief
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">65. &nbsp;XZ-plane N-dircos chief
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">66. &nbsp;YZ-plane L-dircos chief
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">67. &nbsp;YZ-plane M-dircos chief
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">68. &nbsp;YZ-plane N-dircos chief
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">69. &nbsp;XZ-plane X-coordinate
marginal differential trace</span></p>
<p class="c3"><span class="c4">70. &nbsp;XZ-plane Y-coordinate
marginal differential trace</span></p>
<p class="c3"><span class="c4">71. &nbsp;XZ-plane Z-coordinate
marginal differential trace</span></p>
<p class="c3"><span class="c4">72. &nbsp;XZ-plane L-dircos marginal
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">73. &nbsp;XZ-plane M-dircos marginal
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">74. &nbsp;XZ-plane N-dircos marginal
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">75. &nbsp;YZ-plane X-coordinate
marginal differential trace</span></p>
<p class="c3"><span class="c4">76. &nbsp;YZ-plane Y-coordinate
marginal differential trace</span></p>
<p class="c3"><span class="c4">77. &nbsp;YZ-plane Z-coordinate
marginal differential trace</span></p>
<p class="c3"><span class="c4">78. &nbsp;YZ-plane L-dircos marginal
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">79. &nbsp;YZ-plane M-dircos marginal
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">80. &nbsp;YZ-plane N-dircos marginal
differential trace (after interaction)</span></p>
<p class="c3"><span class="c4">81. &nbsp;YZ-plane L-dircos marginal
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">82. &nbsp;YZ-plane M-dircos marginal
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">83. &nbsp;YZ-plane N-dircos marginal
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">84. &nbsp;XZ-plane L-dircos marginal
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">85. &nbsp;XZ-plane M-dircos marginal
differential trace (before interaction)</span></p>
<p class="c3"><span class="c4">86. &nbsp;XZ-plane N-dircos marginal
differential trace (before interaction)</span></p>
<p class="c0"><span class=
"c4">87.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
X-coordinate of cheif ray at object surface</span></p>
<p class="c0"><span class="c4">88. &nbsp;Y-coordinate of cheif ray
at object surface</span></p>
<p class="c0"><span class=
"c4">89.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; XZ-slope
angle, in radians, of the chief ray at the object
surface</span></p>
<p class="c0"><span class="c4">90. &nbsp;YZ-slope angle, in
radians, of the chief ray at the object surface</span></p>
<p class="c0"><span class="c4">91. &nbsp;Sequential number of the
chief ray (from 1 to the maximum number of chief rays)</span></p>
<p class="c0"><span class="c4">92. RAYCOD(1) (Ray failure code, 0 =
no fail)</span></p>
<p class="c0"><span class="c4">93. RAYCOD(2) (Surface where ray
stopped)</span></p>
<p class="c3"><span class="c4">The qualifier word "SWRITE" causes a
subset this saved ray data to be written to a file named
RAYHIST.DAT. &nbsp;One header line with the total number of rays in
I10 format followed by the total number of surfaces in I4 format
followed by the total number of field of view positions in I10
format. The header line is then followed (number of rays)x(number
of the final surface+1) number of lines, each holding the following
14 data items:</span></p>
<p class="c8"><span class="c4">Surface #</span></p>
<p class="c8"><span class="c4">Sequential Ray #</span></p>
<p class="c0"><span class=
"c4">1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local
X-coordinate</span></p>
<p class="c0"><span class=
"c4">2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local
Y-coordinate</span></p>
<p class="c0"><span class=
"c4">3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local
Z-coordinate</span></p>
<p class="c0"><span class=
"c4">4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Angle of
Incidence</span></p>
<p class="c0"><span class=
"c4">5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ray Energy
Term</span></p>
<p class="c0"><span class=
"c4">6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X-component
of the Angle of Incidence</span></p>
<p class="c0"><span class=
"c4">7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y-component
of the Angle of Incidence</span></p>
<p class="c0"><span class=
"c4">8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X-coordinate
of cheif ray at object surface</span></p>
<p class="c0"><span class=
"c4">9.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y-coordinate
of cheif ray at object surface</span></p>
<p class="c0"><span class=
"c4">10.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XZ-slope
angle, in radians, of the chief ray at the object
surface</span></p>
<p class="c0"><span class="c4">11. YZ-slope angle, in radians, of
the chief ray at the object surface</span></p>
<p class="c0"><span class=
"c4">12.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequential
number of the chief ray (from 1 to the maximum number of chief
rays)</span></p>
<p class="c0"><span class="c4">13. RAYCOD(1) (Ray failure code, 0 =
no fail)</span></p>
<p class="c0"><span class="c4">14. RAYCOD(2) (Surface where ray
stopped)</span></p>
<p class="c8"><span class="c36">INTENSITY</span><span class=
"c50 c43">&nbsp;</span><span class="c43">&nbsp;- The following
command provides a way to generate a surface intensity file
INTEN.DAT from the RAYHIST.DAT file</span></p>
<p class="c3"><span class="c20">INTEN , i , n , D</span>
<span class="c43">&nbsp; - The "INTEN" command is used to generate
a program internal intensity map for surface "i" from the current
RAYHIST.DAT file when it is written as a "short" ray history file
using the "SWRITE" qualifier of the "RHIST" command and a SCENE.DAT
scene file if one exists. The scene file is an ascii file which is
used to assign a ray intensity multiplicative factor to each ray
intensity value, based upon the FOB position of the starting
multi-ray ray trace on the object surface. The format of the scene
file is:</span></p>
<p class="c3"><span class="c24 c47 c23 c43"># of FOB positions
(must match the number of FOB positions stored in the short
RAYHIST.DAT file)</span></p>
<p class="c3"><span class="c24 c47 c23 c43">multiplicative factor
for FOB #1</span></p>
<p class="c3"><span class="c23 c43">multiplicative factor for FOB
#2</span></p>
<hr style="page-break-before:always;display:none;">
<p class="c3"><span class="c24 c47 c23 c43">multiplicative factor
for &nbsp;the last FOB</span></p>
<p class="c3"><span class="c43">FOB #1 is the FOB with the most
negative X and Y-FOB values.</span> <span class="c50 c43">Be
carefull to remember whether "FANG" was set in the "SCY" and "SCX"
reference object specification commands.</span></p>
<p class="c3"><span class="c4">FOB #2 is the FOB with the most
negative Y-FOB value but with a lesser X-FOB value than FOB
#1</span></p>
<p class="c3"><span class="c4">The next to last FOB has the most
positive Y-FOB value but a less positive X-FOB value than the last
FOB value</span></p>
<p class="c3"><span class="c4">The last FOB has the most positive
X-FOB and Y-FOB values. The SCENE.DAT file is read as free format.
If no SCENE.DAT file exists, a uniform scene with all
multiplicative factors = 1.0 is assumed. "n" is the dimension of
the 2-D intensity array. "D" is the side length of the intensity
map in lens units. The intensity map is always square. The map is
assumed to be centered at the local coordinate origin of the
specified surface. Ray intensities, multipled by the cosine of the
angle of incidence are then summed into this array. If a SCENE.DAT
file exists, then the appropriate scene multiplicative factor,
based upon the FOB of the current ray, will be multiplied into the
intensity. The angle of incidence (or the average when more than
one ray impacts an intensity grid square, is also stored, along
with its X and Y-components. After the short RAYHIST.DAT file is
processed, the following data is written to the ASCII file
INTEN.DAT. The lower left hand corner (X=-D/2,Y=-D/2) of the array
is designated by the indecies 1,1, the upper right corner (X=D/2),
Y=(D/2) of the array is designated by the indecies n,n. The
INTEN.DAT file comprises a header line followed by nxn entries of
the form x-index , y-index , summed intensity, angle of incidence
(or average of angles of incidence), X-component angle of incidence
(or average of X-components of the angles of incidence),
Y-component angle of incidence (or average of Y-components of the
angles of incidence).</span></p>
<p class="c3"><span class="c4">INTEN.DAT file sample
follows:</span></p>
<p class="c3"><span class="c24 c47 c23 c43">i , n , D</span></p>
<p class="c3"><span class="c24 c47 c23 c43">1 , 1 , summed
intensities, raw summed AOIs, raw summed X-AOIs, averaged
intensity, averaged AOI, averaged X-AOI, averaged Y-AOI</span></p>
<p class="c12"><span class="c24 c47 c23 c43">1 , 2 , summed
intensities, raw summed AOIs, raw summed X-AOIs averaged intensity,
averaged AOI, averaged X-AOI, averaged Y-AOI</span></p>
<p class="c12"><span class="c24 c47 c23 c43">.</span></p>
<p class="c12"><span class="c24 c47 c23 c43">.</span></p>
<p class="c3"><span class="c24 c47 c23 c43">n , n , summed
intensities, raw summed AOIs, raw summed X-AOIs, averaged
intensity, averaged AOI, averaged X-AOI, averaged Y-AOI</span></p>
<p class="c3"><span class="c4">The "INTEN" command also writes a
file named RHFOOT.DAT to enable "footprint" type plots to be
generated for the INTEN surface "i".</span></p>
<p class="c3"><span class="c4">A report is also sent to the default
output device. the report comprises:</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">FOB#, total summed intensity at
surface i from that FOB, p-v intensity variation across surface,
rms intensity variation across surface, number of rays stricking
surface</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">The final line reports for all
FOBs:</span></p>
<p class="c3 c17"></p>
<p class="c3"><span class="c4">total summed intensity at surface i
, p-v intensity variation across surface, rms intensity variation
across surface, number of rays stricking surface</span></p>
<p class="c3 c17"></p>
<p class="c8"><span class="c20">PLOT RHFOOT</span> <span class=
"c43">&nbsp; - The "PLOT RHFOOT" command causes a ray footprint
plot to be generated from the current RHFOOT.DAT command. It
assumes the surface is being viewed along its surface normal, so if
the clear aperture is to be drawn, the "ORIENT , i , 1" command
should be issued.</span></p>
<p class="c12 c17"></p>
<p class="c12 c17"></p>
<p class="c3 c17"></p>
<div>
<p class="c11 c17"></p>
</div>
</body>
</html>
